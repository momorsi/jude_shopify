2025-09-28 16:11:30,558 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7465071640666
2025-09-28 16:11:30,562 - sync_service - INFO - Product gid://shopify/Product/7465071771738 has 1 variants, is_single_variant: True
2025-09-28 16:11:30,563 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:11:30,564 - sync_service - INFO - Processing single variant product: Sulla Luna Mix Earrings
2025-09-28 16:11:31,185 - sync_service - INFO - Created variant mapping record for SKU: FG-0000077 in store: international
2025-09-28 16:11:31,914 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000077 in store: international
2025-09-28 16:11:32,364 - sync_service - INFO - Created product mapping record for product: 7465071771738 in store: international
2025-09-28 16:11:32,366 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 16:11:32,368 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7465071771738 in store international
2025-09-28 16:11:37,429 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465071771738 (attempt 1/3): 
2025-09-28 16:11:37,433 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 16:11:40,712 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7465071771738
2025-09-28 16:11:40,714 - sync_service - INFO - Product gid://shopify/Product/7465071902810 has 1 variants, is_single_variant: True
2025-09-28 16:11:40,715 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:11:40,717 - sync_service - INFO - Processing single variant product: Sulla Luna Earrings
2025-09-28 16:11:41,164 - sync_service - INFO - Created variant mapping record for SKU: FG-0000075 in store: international
2025-09-28 16:11:41,548 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000075 in store: international
2025-09-28 16:11:42,060 - sync_service - INFO - Created product mapping record for product: 7465071902810 in store: international
2025-09-28 16:11:42,062 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 16:11:42,062 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7465071902810 in store international
2025-09-28 16:11:43,130 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7465071902810
2025-09-28 16:11:43,135 - sync_service - INFO - Product gid://shopify/Product/7481860980826 has 3 variants, is_single_variant: False
2025-09-28 16:11:43,138 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:11:43,139 - sync_service - INFO - Processing multi-variant product: Essence Bangle with 3 variants
2025-09-28 16:11:43,921 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000618' - success
2025-09-28 16:11:43,924 - sync_service - INFO - Variant with SKU FG-0000618 is already synced, skipping
2025-09-28 16:11:44,891 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000619' - success
2025-09-28 16:11:44,892 - sync_service - INFO - Variant with SKU FG-0000619 is already synced, skipping
2025-09-28 16:11:45,857 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000620' - success
2025-09-28 16:11:45,858 - sync_service - INFO - Variant with SKU FG-0000620 is already synced, skipping
2025-09-28 16:11:45,859 - sync_service - INFO - All variants for product gid://shopify/Product/7481860980826 are already synced
2025-09-28 16:11:45,861 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481860980826 in store international
2025-09-28 16:11:46,957 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481860980826
2025-09-28 16:11:46,959 - sync_service - INFO - Product gid://shopify/Product/7481861013594 has 3 variants, is_single_variant: False
2025-09-28 16:11:46,960 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:11:46,961 - sync_service - INFO - Processing multi-variant product: Horizon Bracelet with 3 variants
2025-09-28 16:11:47,743 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000621' - success
2025-09-28 16:11:47,744 - sync_service - INFO - Variant with SKU FG-0000621 is already synced, skipping
2025-09-28 16:11:48,953 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000622' - success
2025-09-28 16:11:48,956 - sync_service - INFO - Variant with SKU FG-0000622 is already synced, skipping
2025-09-28 16:11:49,797 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000623' - success
2025-09-28 16:11:49,801 - sync_service - INFO - Variant with SKU FG-0000623 is already synced, skipping
2025-09-28 16:11:49,803 - sync_service - INFO - All variants for product gid://shopify/Product/7481861013594 are already synced
2025-09-28 16:11:49,804 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481861013594 in store international
2025-09-28 16:11:54,843 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7481861013594 (attempt 1/3): 
2025-09-28 16:11:54,844 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 16:11:57,860 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481861013594
2025-09-28 16:11:57,861 - sync_service - INFO - Product gid://shopify/Product/7481861046362 has 3 variants, is_single_variant: False
2025-09-28 16:11:57,862 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:11:57,863 - sync_service - INFO - Processing multi-variant product: Serenity Bangle with 3 variants
2025-09-28 16:11:58,532 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000624' - success
2025-09-28 16:11:58,537 - sync_service - INFO - Variant with SKU FG-0000624 is already synced, skipping
2025-09-28 16:11:59,498 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000625' - success
2025-09-28 16:11:59,500 - sync_service - INFO - Variant with SKU FG-0000625 is already synced, skipping
2025-09-28 16:12:00,413 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000627' - success
2025-09-28 16:12:00,415 - sync_service - INFO - Variant with SKU FG-0000627 is already synced, skipping
2025-09-28 16:12:00,417 - sync_service - INFO - All variants for product gid://shopify/Product/7481861046362 are already synced
2025-09-28 16:12:00,418 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481861046362 in store international
2025-09-28 16:12:01,591 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481861046362
2025-09-28 16:12:01,593 - sync_service - INFO - Product gid://shopify/Product/7481861079130 has 3 variants, is_single_variant: False
2025-09-28 16:12:01,594 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:12:01,594 - sync_service - INFO - Processing multi-variant product: Serenity Bangle with 3 variants
2025-09-28 16:12:02,396 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000626' - success
2025-09-28 16:12:02,398 - sync_service - INFO - Variant with SKU FG-0000626 is already synced, skipping
2025-09-28 16:12:03,486 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000629' - success
2025-09-28 16:12:03,491 - sync_service - INFO - Variant with SKU FG-0000629 is already synced, skipping
2025-09-28 16:12:04,362 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000628' - success
2025-09-28 16:12:04,364 - sync_service - INFO - Variant with SKU FG-0000628 is already synced, skipping
2025-09-28 16:12:04,366 - sync_service - INFO - All variants for product gid://shopify/Product/7481861079130 are already synced
2025-09-28 16:12:04,368 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481861079130 in store international
2025-09-28 16:12:05,894 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481861079130
2025-09-28 16:12:05,896 - sync_service - INFO - Product gid://shopify/Product/7481861111898 has 1 variants, is_single_variant: True
2025-09-28 16:12:05,896 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:12:05,897 - sync_service - INFO - Processing single variant product: Multi-way Bliss Hoops
2025-09-28 16:12:06,492 - sync_service - INFO - Created variant mapping record for SKU: FG-0000631 in store: international
2025-09-28 16:12:07,528 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000631 in store: international
2025-09-28 16:12:07,883 - sync_service - INFO - Created product mapping record for product: 7481861111898 in store: international
2025-09-28 16:12:07,886 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 16:12:07,887 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481861111898 in store international
2025-09-28 16:12:12,914 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7481861111898 (attempt 1/3): 
2025-09-28 16:12:12,915 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 16:12:22,691 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7481861111898 (attempt 2/3): 
2025-09-28 16:12:22,692 - sync_service - INFO - Retrying in 4 seconds...
2025-09-28 16:12:31,741 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7481861111898 (attempt 3/3): 
2025-09-28 16:12:31,742 - sync_service - ERROR - Failed to set metafield custom.sap_sync for product gid://shopify/Product/7481861111898 after 3 attempts: 
2025-09-28 16:12:31,744 - sync_service - INFO - Product gid://shopify/Product/7481861144666 has 1 variants, is_single_variant: True
2025-09-28 16:12:31,744 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:12:31,745 - sync_service - INFO - Processing single variant product: Multi-way Bliss Hoops
2025-09-28 16:12:37,078 - sync_service - INFO - Created variant mapping record for SKU: FG-0000630 in store: international
2025-09-28 16:12:39,860 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000630 in store: international
2025-09-28 16:12:55,477 - sync_service - INFO - Created product mapping record for product: 7481861144666 in store: international
2025-09-28 16:12:55,477 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 16:12:55,478 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481861144666 in store international
2025-09-28 16:13:00,511 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7481861144666 (attempt 1/3): 
2025-09-28 16:13:00,513 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 16:13:07,939 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481861144666
2025-09-28 16:13:07,943 - sync_service - INFO - Product gid://shopify/Product/7481861275738 has 3 variants, is_single_variant: False
2025-09-28 16:13:07,943 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:13:07,944 - sync_service - INFO - Processing multi-variant product: Ember Earrings with 3 variants
2025-09-28 16:13:11,755 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000632' - success
2025-09-28 16:13:11,759 - sync_service - INFO - Variant with SKU FG-0000632 is already synced, skipping
2025-09-28 16:13:13,131 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000633' - success
2025-09-28 16:13:13,136 - sync_service - INFO - Variant with SKU FG-0000633 is already synced, skipping
2025-09-28 16:13:15,443 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000635' - success
2025-09-28 16:13:15,444 - sync_service - INFO - Variant with SKU FG-0000635 is already synced, skipping
2025-09-28 16:13:15,444 - sync_service - INFO - All variants for product gid://shopify/Product/7481861275738 are already synced
2025-09-28 16:13:15,445 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481861275738 in store international
2025-09-28 16:13:20,477 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7481861275738 (attempt 1/3): 
2025-09-28 16:13:20,480 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 16:13:24,957 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481861275738
2025-09-28 16:13:24,961 - sync_service - INFO - Product gid://shopify/Product/7481861406810 has 3 variants, is_single_variant: False
2025-09-28 16:13:24,962 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:13:24,963 - sync_service - INFO - Processing multi-variant product: Ember Earrings with 3 variants
2025-09-28 16:13:26,377 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000634' - success
2025-09-28 16:13:26,381 - sync_service - INFO - Variant with SKU FG-0000634 is already synced, skipping
2025-09-28 16:13:27,269 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000637' - success
2025-09-28 16:13:27,272 - sync_service - INFO - Variant with SKU FG-0000637 is already synced, skipping
2025-09-28 16:13:28,134 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000636' - success
2025-09-28 16:13:28,137 - sync_service - INFO - Variant with SKU FG-0000636 is already synced, skipping
2025-09-28 16:13:28,138 - sync_service - INFO - All variants for product gid://shopify/Product/7481861406810 are already synced
2025-09-28 16:13:28,139 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481861406810 in store international
2025-09-28 16:13:29,272 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481861406810
2025-09-28 16:13:29,275 - sync_service - INFO - Product gid://shopify/Product/7481861472346 has 3 variants, is_single_variant: False
2025-09-28 16:13:29,278 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:13:29,279 - sync_service - INFO - Processing multi-variant product: Essence Earrings with 3 variants
2025-09-28 16:13:30,071 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000638' - success
2025-09-28 16:13:30,074 - sync_service - INFO - Variant with SKU FG-0000638 is already synced, skipping
2025-09-28 16:13:31,026 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000639' - success
2025-09-28 16:13:31,027 - sync_service - INFO - Variant with SKU FG-0000639 is already synced, skipping
2025-09-28 16:13:31,858 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000641' - success
2025-09-28 16:13:31,862 - sync_service - INFO - Variant with SKU FG-0000641 is already synced, skipping
2025-09-28 16:13:31,865 - sync_service - INFO - All variants for product gid://shopify/Product/7481861472346 are already synced
2025-09-28 16:13:31,867 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481861472346 in store international
2025-09-28 16:13:33,263 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481861472346
2025-09-28 16:13:33,287 - sync_service - INFO - Product gid://shopify/Product/7481861603418 has 3 variants, is_single_variant: False
2025-09-28 16:13:33,298 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:13:33,305 - sync_service - INFO - Processing multi-variant product: Essence Earrings with 3 variants
2025-09-28 16:13:34,246 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000640' - success
2025-09-28 16:13:34,249 - sync_service - INFO - Variant with SKU FG-0000640 is already synced, skipping
2025-09-28 16:13:35,504 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000643' - success
2025-09-28 16:13:35,506 - sync_service - INFO - Variant with SKU FG-0000643 is already synced, skipping
2025-09-28 16:13:37,025 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000642' - success
2025-09-28 16:13:37,030 - sync_service - INFO - Variant with SKU FG-0000642 is already synced, skipping
2025-09-28 16:13:37,033 - sync_service - INFO - All variants for product gid://shopify/Product/7481861603418 are already synced
2025-09-28 16:13:37,035 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481861603418 in store international
2025-09-28 16:13:38,075 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481861603418
2025-09-28 16:13:38,077 - sync_service - INFO - Product gid://shopify/Product/7481861734490 has 3 variants, is_single_variant: False
2025-09-28 16:13:38,077 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:13:38,078 - sync_service - INFO - Processing multi-variant product: Nova Earrings with 3 variants
2025-09-28 16:13:38,885 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000653' - success
2025-09-28 16:13:38,889 - sync_service - INFO - Variant with SKU FG-0000653 is already synced, skipping
2025-09-28 16:13:39,754 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000654' - success
2025-09-28 16:13:39,757 - sync_service - INFO - Variant with SKU FG-0000654 is already synced, skipping
2025-09-28 16:13:41,276 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000655' - success
2025-09-28 16:13:41,277 - sync_service - INFO - Variant with SKU FG-0000655 is already synced, skipping
2025-09-28 16:13:41,278 - sync_service - INFO - All variants for product gid://shopify/Product/7481861734490 are already synced
2025-09-28 16:13:41,278 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481861734490 in store international
2025-09-28 16:13:42,313 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481861734490
2025-09-28 16:13:42,318 - sync_service - INFO - Product gid://shopify/Product/7481861865562 has 3 variants, is_single_variant: False
2025-09-28 16:13:42,321 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:13:42,322 - sync_service - INFO - Processing multi-variant product: Serenity Earrings with 3 variants
2025-09-28 16:13:43,184 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000656' - success
2025-09-28 16:13:43,188 - sync_service - INFO - Variant with SKU FG-0000656 is already synced, skipping
2025-09-28 16:13:44,137 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000657' - success
2025-09-28 16:13:44,140 - sync_service - INFO - Variant with SKU FG-0000657 is already synced, skipping
2025-09-28 16:13:48,538 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000659' - success
2025-09-28 16:13:48,542 - sync_service - INFO - Variant with SKU FG-0000659 is already synced, skipping
2025-09-28 16:13:48,545 - sync_service - INFO - All variants for product gid://shopify/Product/7481861865562 are already synced
2025-09-28 16:13:48,549 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481861865562 in store international
2025-09-28 16:13:53,594 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7481861865562 (attempt 1/3): 
2025-09-28 16:13:53,596 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 16:13:56,836 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481861865562
2025-09-28 16:13:56,839 - sync_service - INFO - Product gid://shopify/Product/7481862062170 has 3 variants, is_single_variant: False
2025-09-28 16:13:56,842 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:13:56,843 - sync_service - INFO - Processing multi-variant product: Serenity Earrings with 3 variants
2025-09-28 16:13:57,727 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000658' - success
2025-09-28 16:13:57,731 - sync_service - INFO - Variant with SKU FG-0000658 is already synced, skipping
2025-09-28 16:13:58,553 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000661' - success
2025-09-28 16:13:58,557 - sync_service - INFO - Variant with SKU FG-0000661 is already synced, skipping
2025-09-28 16:13:59,326 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000660' - success
2025-09-28 16:13:59,333 - sync_service - INFO - Variant with SKU FG-0000660 is already synced, skipping
2025-09-28 16:13:59,337 - sync_service - INFO - All variants for product gid://shopify/Product/7481862062170 are already synced
2025-09-28 16:13:59,340 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481862062170 in store international
2025-09-28 16:14:00,762 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481862062170
2025-09-28 16:14:00,766 - sync_service - INFO - Product gid://shopify/Product/7481862258778 has 3 variants, is_single_variant: False
2025-09-28 16:14:00,769 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:14:00,770 - sync_service - INFO - Processing multi-variant product: Solara Earrings with 3 variants
2025-09-28 16:14:01,655 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000662' - success
2025-09-28 16:14:02,605 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000664' - success
2025-09-28 16:14:02,610 - sync_service - INFO - Variant with SKU FG-0000664 is already synced, skipping
2025-09-28 16:14:03,539 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000663' - success
2025-09-28 16:14:03,543 - sync_service - INFO - Variant with SKU FG-0000663 is already synced, skipping
2025-09-28 16:14:03,544 - sync_service - INFO - Processing 1 unsynced variants out of 3 total variants
2025-09-28 16:14:04,604 - sync_service - INFO - Created product mapping record for product: 7481862258778 in store: international
2025-09-28 16:14:05,994 - sync_service - INFO - Created variant mapping record for SKU: FG-0000662 in store: international
2025-09-28 16:14:06,625 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000662 in store: international
2025-09-28 16:14:06,627 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 16:14:06,627 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481862258778 in store international
2025-09-28 16:14:07,758 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481862258778
2025-09-28 16:14:07,761 - sync_service - INFO - Product gid://shopify/Product/7481862455386 has 1 variants, is_single_variant: True
2025-09-28 16:14:07,762 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:14:07,763 - sync_service - INFO - Processing single variant product: Vault Earcuff
2025-09-28 16:14:08,118 - sync_service - INFO - Created variant mapping record for SKU: FG-0000665 in store: international
2025-09-28 16:14:08,526 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000665 in store: international
2025-09-28 16:14:08,943 - sync_service - INFO - Created product mapping record for product: 7481862455386 in store: international
2025-09-28 16:14:08,946 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 16:14:08,948 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481862455386 in store international
2025-09-28 16:14:09,962 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481862455386
2025-09-28 16:14:09,964 - sync_service - INFO - Product gid://shopify/Product/7481862651994 has 1 variants, is_single_variant: True
2025-09-28 16:14:09,966 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:14:09,967 - sync_service - INFO - Processing single variant product: Vault Earcuff
2025-09-28 16:14:10,395 - sync_service - INFO - Created variant mapping record for SKU: FG-0000666 in store: international
2025-09-28 16:14:10,832 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000666 in store: international
2025-09-28 16:14:11,225 - sync_service - INFO - Created product mapping record for product: 7481862651994 in store: international
2025-09-28 16:14:11,227 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 16:14:11,228 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481862651994 in store international
2025-09-28 16:14:16,258 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7481862651994 (attempt 1/3): 
2025-09-28 16:14:16,259 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 16:14:19,444 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481862651994
2025-09-28 16:14:19,445 - sync_service - INFO - Product gid://shopify/Product/7481862815834 has 3 variants, is_single_variant: False
2025-09-28 16:14:19,446 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:14:19,447 - sync_service - INFO - Processing multi-variant product: Eclipse Necklace with 3 variants
2025-09-28 16:14:20,916 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000667' - success
2025-09-28 16:14:20,918 - sync_service - INFO - Variant with SKU FG-0000667 is already synced, skipping
2025-09-28 16:14:21,807 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000668' - success
2025-09-28 16:14:21,811 - sync_service - INFO - Variant with SKU FG-0000668 is already synced, skipping
2025-09-28 16:14:22,777 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000669' - success
2025-09-28 16:14:22,778 - sync_service - INFO - Variant with SKU FG-0000669 is already synced, skipping
2025-09-28 16:14:22,778 - sync_service - INFO - All variants for product gid://shopify/Product/7481862815834 are already synced
2025-09-28 16:14:22,779 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481862815834 in store international
2025-09-28 16:14:23,797 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481862815834
2025-09-28 16:14:23,803 - sync_service - INFO - Product gid://shopify/Product/7481863012442 has 3 variants, is_single_variant: False
2025-09-28 16:14:23,805 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:14:23,807 - sync_service - INFO - Processing multi-variant product: Ember Necklace with 3 variants
2025-09-28 16:14:25,004 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000670' - success
2025-09-28 16:14:25,007 - sync_service - INFO - Variant with SKU FG-0000670 is already synced, skipping
2025-09-28 16:14:25,894 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000671' - success
2025-09-28 16:14:25,895 - sync_service - INFO - Variant with SKU FG-0000671 is already synced, skipping
2025-09-28 16:14:26,943 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000673' - success
2025-09-28 16:14:26,945 - sync_service - INFO - Variant with SKU FG-0000673 is already synced, skipping
2025-09-28 16:14:26,945 - sync_service - INFO - All variants for product gid://shopify/Product/7481863012442 are already synced
2025-09-28 16:14:26,945 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481863012442 in store international
2025-09-28 16:14:28,078 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481863012442
2025-09-28 16:14:28,081 - sync_service - INFO - Product gid://shopify/Product/7481863176282 has 3 variants, is_single_variant: False
2025-09-28 16:14:28,083 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:14:28,084 - sync_service - INFO - Processing multi-variant product: Ember Necklace with 3 variants
2025-09-28 16:14:29,299 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000672' - success
2025-09-28 16:14:29,301 - sync_service - INFO - Variant with SKU FG-0000672 is already synced, skipping
2025-09-28 16:14:30,701 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000675' - success
2025-09-28 16:14:30,705 - sync_service - INFO - Variant with SKU FG-0000675 is already synced, skipping
2025-09-28 16:14:31,926 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000674' - success
2025-09-28 16:14:31,928 - sync_service - INFO - Variant with SKU FG-0000674 is already synced, skipping
2025-09-28 16:14:31,928 - sync_service - INFO - All variants for product gid://shopify/Product/7481863176282 are already synced
2025-09-28 16:14:31,929 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481863176282 in store international
2025-09-28 16:14:33,014 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481863176282
2025-09-28 16:14:33,018 - sync_service - INFO - Product gid://shopify/Product/7481863405658 has 3 variants, is_single_variant: False
2025-09-28 16:14:33,019 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:14:33,020 - sync_service - INFO - Processing multi-variant product: Horizon Necklace with 3 variants
2025-09-28 16:14:34,002 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000679' - success
2025-09-28 16:14:34,005 - sync_service - INFO - Variant with SKU FG-0000679 is already synced, skipping
2025-09-28 16:14:35,022 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000680' - success
2025-09-28 16:14:36,127 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000681' - success
2025-09-28 16:14:36,128 - sync_service - INFO - Variant with SKU FG-0000681 is already synced, skipping
2025-09-28 16:14:36,129 - sync_service - INFO - Processing 1 unsynced variants out of 3 total variants
2025-09-28 16:14:37,073 - sync_service - INFO - Created product mapping record for product: 7481863405658 in store: international
2025-09-28 16:14:37,489 - sync_service - INFO - Created variant mapping record for SKU: FG-0000680 in store: international
2025-09-28 16:14:37,979 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000680 in store: international
2025-09-28 16:14:37,979 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 16:14:37,980 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481863405658 in store international
2025-09-28 16:14:43,000 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7481863405658 (attempt 1/3): 
2025-09-28 16:14:43,001 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 16:14:50,126 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481863405658
2025-09-28 16:14:50,128 - sync_service - INFO - Product gid://shopify/Product/7481863602266 has 2 variants, is_single_variant: False
2025-09-28 16:14:50,129 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:14:50,130 - sync_service - INFO - Processing multi-variant product: Multi-way Halo Ring with 2 variants
2025-09-28 16:14:51,103 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000699' - success
2025-09-28 16:14:51,106 - sync_service - INFO - Variant with SKU FG-0000699 is already synced, skipping
2025-09-28 16:14:51,992 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000687' - success
2025-09-28 16:14:51,995 - sync_service - INFO - Variant with SKU FG-0000687 is already synced, skipping
2025-09-28 16:14:51,996 - sync_service - INFO - All variants for product gid://shopify/Product/7481863602266 are already synced
2025-09-28 16:14:51,997 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481863602266 in store international
2025-09-28 16:14:53,354 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481863602266
2025-09-28 16:14:53,359 - sync_service - INFO - Product gid://shopify/Product/7481863798874 has 2 variants, is_single_variant: False
2025-09-28 16:14:53,360 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:14:53,362 - sync_service - INFO - Processing multi-variant product: Multi-way Halo Ring with 2 variants
2025-09-28 16:14:54,523 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000700' - success
2025-09-28 16:14:55,673 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000688' - success
2025-09-28 16:14:55,677 - sync_service - INFO - Variant with SKU FG-0000688 is already synced, skipping
2025-09-28 16:14:55,678 - sync_service - INFO - Processing 1 unsynced variants out of 2 total variants
2025-09-28 16:14:56,135 - sync_service - INFO - Created product mapping record for product: 7481863798874 in store: international
2025-09-28 16:14:56,776 - sync_service - INFO - Created variant mapping record for SKU: FG-0000700 in store: international
2025-09-28 16:14:57,176 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000700 in store: international
2025-09-28 16:14:57,177 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 16:14:57,177 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481863798874 in store international
2025-09-28 16:15:02,216 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7481863798874 (attempt 1/3): 
2025-09-28 16:15:02,219 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 16:15:05,345 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481863798874
2025-09-28 16:15:05,348 - sync_service - INFO - Product gid://shopify/Product/7481863995482 has 6 variants, is_single_variant: False
2025-09-28 16:15:05,351 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:15:05,354 - sync_service - INFO - Processing multi-variant product: Ember Ring with 6 variants
2025-09-28 16:15:06,360 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000689' - success
2025-09-28 16:15:06,364 - sync_service - INFO - Variant with SKU FG-0000689 is already synced, skipping
2025-09-28 16:15:07,315 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000697' - success
2025-09-28 16:15:07,319 - sync_service - INFO - Variant with SKU FG-0000697 is already synced, skipping
2025-09-28 16:15:08,110 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000686' - success
2025-09-28 16:15:08,111 - sync_service - INFO - Variant with SKU FG-0000686 is already synced, skipping
2025-09-28 16:15:09,206 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000696' - success
2025-09-28 16:15:09,209 - sync_service - INFO - Variant with SKU FG-0000696 is already synced, skipping
2025-09-28 16:15:10,112 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000698' - success
2025-09-28 16:15:10,115 - sync_service - INFO - Variant with SKU FG-0000698 is already synced, skipping
2025-09-28 16:15:11,248 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000695' - success
2025-09-28 16:15:11,250 - sync_service - INFO - Variant with SKU FG-0000695 is already synced, skipping
2025-09-28 16:15:11,251 - sync_service - INFO - All variants for product gid://shopify/Product/7481863995482 are already synced
2025-09-28 16:15:11,253 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481863995482 in store international
2025-09-28 16:15:12,278 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481863995482
2025-09-28 16:15:12,279 - sync_service - INFO - Product gid://shopify/Product/7481864159322 has 6 variants, is_single_variant: False
2025-09-28 16:15:12,279 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:15:12,280 - sync_service - INFO - Processing multi-variant product: Ember Ring with 6 variants
2025-09-28 16:15:13,228 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000689' - success
2025-09-28 16:15:13,235 - sync_service - INFO - Variant with SKU FG-0000689 is already synced, skipping
2025-09-28 16:15:14,113 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000692' - success
2025-09-28 16:15:14,117 - sync_service - INFO - Variant with SKU FG-0000692 is already synced, skipping
2025-09-28 16:15:14,938 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000686' - success
2025-09-28 16:15:14,941 - sync_service - INFO - Variant with SKU FG-0000686 is already synced, skipping
2025-09-28 16:15:15,825 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000691' - success
2025-09-28 16:15:15,827 - sync_service - INFO - Variant with SKU FG-0000691 is already synced, skipping
2025-09-28 16:15:16,749 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000694' - success
2025-09-28 16:15:16,754 - sync_service - INFO - Variant with SKU FG-0000694 is already synced, skipping
2025-09-28 16:15:17,490 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000693' - success
2025-09-28 16:15:17,492 - sync_service - INFO - Variant with SKU FG-0000693 is already synced, skipping
2025-09-28 16:15:17,493 - sync_service - INFO - All variants for product gid://shopify/Product/7481864159322 are already synced
2025-09-28 16:15:17,494 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481864159322 in store international
2025-09-28 16:15:18,826 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7481864159322
2025-09-28 16:15:18,827 - sync_service - INFO - Product gid://shopify/Product/7496429371482 has 3 variants, is_single_variant: False
2025-09-28 16:15:18,828 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:15:18,832 - sync_service - INFO - Processing multi-variant product: Solara Necklace with 3 variants
2025-09-28 16:15:18,834 - sync_service - WARNING - Variant gid://shopify/ProductVariant/42000242540634 has no SKU, including in unsynced list
2025-09-28 16:15:18,835 - sync_service - WARNING - Variant gid://shopify/ProductVariant/42000242573402 has no SKU, including in unsynced list
2025-09-28 16:15:18,836 - sync_service - WARNING - Variant gid://shopify/ProductVariant/42000242606170 has no SKU, including in unsynced list
2025-09-28 16:15:18,837 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 16:15:19,257 - sync_service - INFO - Created product mapping record for product: 7496429371482 in store: international
2025-09-28 16:15:19,258 - sync_service - WARNING - Variant gid://shopify/ProductVariant/42000242540634 has no SKU, skipping
2025-09-28 16:15:19,259 - sync_service - WARNING - Variant gid://shopify/ProductVariant/42000242573402 has no SKU, skipping
2025-09-28 16:15:19,259 - sync_service - WARNING - Variant gid://shopify/ProductVariant/42000242606170 has no SKU, skipping
2025-09-28 16:15:19,259 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7496429371482 in store international
2025-09-28 16:15:20,484 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7496429371482
2025-09-28 16:15:20,488 - sync_service - INFO - Product gid://shopify/Product/7506688770138 has 2 variants, is_single_variant: False
2025-09-28 16:15:20,490 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:15:20,491 - sync_service - INFO - Processing multi-variant product: Flare Earrings with 2 variants
2025-09-28 16:15:21,435 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000645' - success
2025-09-28 16:15:21,439 - sync_service - INFO - Variant with SKU FG-0000645 is already synced, skipping
2025-09-28 16:15:22,719 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000644' - success
2025-09-28 16:15:22,723 - sync_service - INFO - Variant with SKU FG-0000644 is already synced, skipping
2025-09-28 16:15:22,725 - sync_service - INFO - All variants for product gid://shopify/Product/7506688770138 are already synced
2025-09-28 16:15:22,727 - sync_service - INFO - Setting metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7506688770138 in store international
2025-09-28 16:15:23,777 - sync_service - INFO - Created metafield custom.sap_sync = synced_prd for product gid://shopify/Product/7506688770138
2025-09-28 16:15:23,779 - sync_service - INFO - Completed initialization for store international
2025-09-28 16:15:23,782 - sync_service - INFO - Shopify items initialization completed successfully
2025-09-28 16:58:41,443 - sync_service - INFO - Initialized Shopify client for store: International Store (international)
2025-09-28 16:58:41,451 - sync_service - INFO - Starting Shopify items initialization process
2025-09-28 16:58:41,454 - sync_service - INFO - This will process both local and international stores
2025-09-28 16:58:41,454 - sync_service - INFO - SAP item field updates will only be applied to the local store
2025-09-28 16:58:41,457 - sync_service - INFO - Mapping records will be created for both stores
2025-09-28 16:58:41,459 - sync_service - INFO - Starting initialization for 1 stores
2025-09-28 16:58:41,462 - sync_service - INFO - Processing store: International Store (international)
2025-09-28 16:58:41,463 - sync_service - INFO - Fetching active products from store: international
2025-09-28 16:58:41,463 - sync_service - INFO - Executing GraphQL query for store: international
2025-09-28 16:58:41,464 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_international', 'request': {'query': '\n        query GetUnsyncedProducts($cursor: String) {\n            products(first: 150, after: $cursor, query: "status:active") {\n                pageInfo {\n                    hasNextPage\n                    endCursor\n                }\n                edges {\n                    node {\n                        id\n                        title\n                        metafields(first: 5, namespace: "custom") {\n                            edges {\n                                node {\n                                    key\n                                    value\n                                }\n                            }\n                        }\n                        variants(first: 50) {\n                            edges {\n                                node {\n                                    id\n                                    title\n                                    sku\n                                    inventoryItem {\n                                        id\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        ', 'variables': {}}, 'response': None, 'status': None}
2025-09-28 16:58:51,516 - sync_service - ERROR - GraphQL query error for store international: 
2025-09-28 16:58:52,548 - sync_service - INFO - SAP logging client login successful
2025-09-28 16:58:53,307 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_international - failure
2025-09-28 16:58:53,313 - sync_service - WARNING - GraphQL attempt 1/3 failed: GraphQL query error for store international: 
2025-09-28 16:58:53,316 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 16:58:55,329 - sync_service - INFO - Executing GraphQL query for store: international
2025-09-28 16:58:55,330 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_international', 'request': {'query': '\n        query GetUnsyncedProducts($cursor: String) {\n            products(first: 150, after: $cursor, query: "status:active") {\n                pageInfo {\n                    hasNextPage\n                    endCursor\n                }\n                edges {\n                    node {\n                        id\n                        title\n                        metafields(first: 5, namespace: "custom") {\n                            edges {\n                                node {\n                                    key\n                                    value\n                                }\n                            }\n                        }\n                        variants(first: 50) {\n                            edges {\n                                node {\n                                    id\n                                    title\n                                    sku\n                                    inventoryItem {\n                                        id\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        ', 'variables': {}}, 'response': None, 'status': None}
2025-09-28 16:58:56,574 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_international', 'request': None, 'response': {'products': {'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo3NTA2Njg4NzcwMTM4LCJsYXN0X3ZhbHVlIjoiNzUwNjY4ODc3MDEzOCJ9'}, 'edges': [{'node': {'id': 'gid://shopify/Product/7465063546970', 'title': 'Una Ring', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass dipped in Rhodium with a shiny finish\nSize: ADJUSTABLE'}}, {'node': {'key': 'styling_tips', 'value': "Pair the Una Ring with the Janus Cuff to create a striking ensemble that reflects the theme of duality. Coordinate the resin stone's color with your outfit for a cohesive and stylish look."}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920068321370', 'title': 'Teal Blue', 'sku': None, 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017857003610'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920068354138', 'title': 'Purple', 'sku': None, 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017857036378'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920068386906', 'title': 'Black', 'sku': None, 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017857069146'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465063579738', 'title': 'Elara Hoops', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 24k gold.\n'}}, {'node': {'key': 'styling_tips', 'value': 'Wear the Elara Hoops with the Liana Mix Necklace for a perfectly coordinated look, or let them stand alone to add a touch of understated sophistication to your ensemble.\n'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920068419674', 'title': 'Default Title', 'sku': 'FG-0000616', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017857101914'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465063612506', 'title': 'Shareable Gemino Bracelet', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 24k gold.\n'}}, {'node': {'key': 'styling_tips', 'value': 'Style this bracelet with the Gemino ring to maximize the mixed metal contrast, or share with a friend for a matching moment!\n'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920068452442', 'title': 'Default Title', 'sku': 'FG-0000574', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017857134682'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465063645274', 'title': 'Gemino Earrings', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 24k gold.\n'}}, {'node': {'key': 'styling_tips', 'value': 'Pair these earrings with a simple, minimalist outfit to let them shine. A plain cut or silhouette will provide the perfect canvas for the earrings to take center stage.\n'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920068485210', 'title': 'Default Title', 'sku': 'FG-0000579', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017857167450'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465063678042', 'title': 'Liana Necklace', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 24k gold.\n'}}, {'node': {'key': 'styling_tips', 'value': 'Pair the Liana Mix Necklace with the rest of the collection for a cohesive statement, or let it shine solo against a high neckline for a refined and graceful look.\n'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920068517978', 'title': 'Default Title', 'sku': 'FG-0000613', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017857200218'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465063710810', 'title': 'Elara Earrings', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 24k gold.\n'}}, {'node': {'key': 'styling_tips', 'value': 'Let the Elara Earrings take center stage with sleek, pulled-back hair or pair them with Gemino necklace for an elevated look.\n'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920068550746', 'title': 'Default Title', 'sku': 'FG-0000614', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017857232986'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465063776346', 'title': 'Gemino Ring', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 24k gold.\n'}}, {'node': {'key': 'styling_tips', 'value': 'Styling tip:\nStack multiple Gemino Rings to create a striking diagonal effect. For an even bolder statement, combine it with other pieces from the Gemino set to showcase the mixed metal aesthetic.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920068616282', 'title': 'Default Title', 'sku': 'FG-0000588', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017857298522'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465063809114', 'title': 'Gemino Necklace', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 24k gold.\n'}}, {'node': {'key': 'styling_tips', 'value': 'Pair with the rest of the Gemino set to complete the look, and pair this necklace with a higher neckline.\n'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920068649050', 'title': 'Default Title', 'sku': 'FG-0000586', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017857331290'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465063841882', 'title': 'Mini Gemino Earrings', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 24k gold.\n'}}, {'node': {'key': 'styling_tips', 'value': 'Pair with the rest of the Gemino set to complete the look, and pair this necklace with a higher neckline.\n'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920068681818', 'title': 'Default Title', 'sku': 'FG-0000615', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017857364058'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465063907418', 'title': 'Una Mix', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': '925 sterling silver & 18K gold-plated silver. Weight: 5.2g Dimensions H: 3cm x W: 1.7cm\n'}}, {'node': {'key': 'styling_tips', 'value': 'For a fresh daytime look, pair the remixed una earring with loose waves and a crisp white shirt. As the day turns into night, transition effortlessly by styling it with a sleek bun and a bold, minimalist outfit.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920068747354', 'title': 'Default Title', 'sku': 'FG-0000584', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017857429594'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465063972954', 'title': 'Lupa Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '38811'}}, {'node': {'key': 'materials', 'value': 'Brass dipped in Rhodium with a shiny finish and custom-dyed resin stones.'}}, {'node': {'key': 'styling_tips', 'value': 'These earrings are perfect for elevating any lookC\x11wear them as a striking statement or pair them with minimalist pieces for a balanced, sophisticated style.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920068812890', 'title': 'Black', 'sku': 'FG-0000599', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017857527898'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920068845658', 'title': 'Purple', 'sku': 'FG-0000600', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017857560666'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920068878426', 'title': 'Teal Blue', 'sku': 'FG-0000601', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017857593434'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465064038490', 'title': 'Mini Lupa Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '38806'}}, {'node': {'key': 'materials', 'value': 'Brass dipped in Rhodium with a shiny finish and custom-dyed resin stones.'}}, {'node': {'key': 'styling_tips', 'value': 'The Mini Lupa Earrings are the perfect finishing touch for any outfit. These earrings are perfect for creating a unique asymmetrical look on yourself.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920069009498', 'title': 'Black', 'sku': 'FG-0000606', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017857691738'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920069042266', 'title': 'Teal Blue', 'sku': 'FG-0000607', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017857724506'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920069075034', 'title': 'Purple', 'sku': 'FG-0000608', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017857757274'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465064071258', 'title': 'Amori Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '38797'}}, {'node': {'key': 'materials', 'value': 'Brass dipped in Rhodium with a shiny finish and custom-dyed resin stones.'}}, {'node': {'key': 'styling_tips', 'value': 'For a chic and modern style, wear these earrings with your hair pulled back. To create a striking contrast, pair it with a linen top or a flowing evening gown.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920069107802', 'title': 'Black', 'sku': 'FG-0000596', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017857790042'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920069140570', 'title': 'Teal Blue', 'sku': 'FG-0000597', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017857822810'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920069173338', 'title': 'Purple', 'sku': 'FG-0000598', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017857855578'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465064136794', 'title': 'Una Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '38699'}}, {'node': {'key': 'materials', 'value': 'Brass dipped in Rhodium with a shiny finish'}}, {'node': {'key': 'styling_tips', 'value': 'Day or night, these earrings are perfect. For a casual workday, pair them with a messy updo and a simple shirt. To elevate your look for evening events, style them with sleek hair and a sophisticated outfit.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920069238874', 'title': 'Default Title', 'sku': 'FG-0000594', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017857921114'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465064169562', 'title': 'Interchangeable Dos Amores Necklace', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '38689'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish '}}, {'node': {'key': 'styling_tips', 'value': 'Wear the pendant with a simple shirt or V-neck for a casual look. For a more formal evening, style the double strand necklace with a flowing gown. Or, share the necklace with a friend for a matching moment!'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920069271642', 'title': 'Default Title', 'sku': 'FG-000605', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017857953882'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465064267866', 'title': 'Interchangeable Dos Amores Necklace', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '38686'}}, {'node': {'key': 'materials', 'value': 'Brass dipped in Rhodium with a shiny finish'}}, {'node': {'key': 'styling_tips', 'value': 'Wear the pendant with a simple shirt or V-neck for a casual look. For a more formal evening, style the double strand necklace with a flowing gown. Or, share the necklace with a friend for a matching moment!'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920069501018', 'title': 'Default Title', 'sku': 'FG-0000585', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017858183258'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465064300634', 'title': 'Elea Ear Cuff', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '23621'}}, {'node': {'key': 'materials', 'value': 'Brass dipped in 21k gold with matte finish'}}, {'node': {'key': 'styling_tips', 'value': 'Pair it with the Harmonia Hoop and a black slip dress for a super romantic look.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920069533786', 'title': 'Default Title', 'sku': 'FG-0000251', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017858216026'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465064333402', 'title': 'Elea Ear Cuff', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '23618'}}, {'node': {'key': 'materials', 'value': '925 Sterling silver'}}, {'node': {'key': 'styling_tips', 'value': 'Pair it with the Ophelia Earrings and a black dress for a super elegnt look '}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920069566554', 'title': 'Default Title', 'sku': 'FG-0000250', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017858248794'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465064366170', 'title': 'Pacaya Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '11695'}}, {'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 21k gold.'}}, {'node': {'key': 'styling_tips', 'value': 'The Pacaya Earrings are best Paired with the Magma Necklace on an off the shoulder top'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920069599322', 'title': 'Default Title', 'sku': 'FG-0000096', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017858281562'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465064464474', 'title': 'Una Ring', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '38695'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish.'}}, {'node': {'key': 'styling_tips', 'value': 'The Pacaya Earrings are best Paired with the Magma Necklace on an off the shoulder top'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920069697626', 'title': 'Pink', 'sku': 'FG-0000591', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017858379866'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920069730394', 'title': 'Green', 'sku': 'FG-0000590', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017858412634'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920069763162', 'title': 'Pearl White', 'sku': 'FG-0000589', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017858445402'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465064497242', 'title': 'Amori Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '38807'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish and custom-made resin stones.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920069894234', 'title': 'Pearl White', 'sku': 'FG-0000576', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017858576474'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920069927002', 'title': 'Pink', 'sku': 'FG-0000578', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017858609242'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920069959770', 'title': 'Green', 'sku': 'FG-0000577', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017858642010'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465064530010', 'title': 'Juno Necklace', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '38698'}}, {'node': {'key': 'materials', 'value': 'Brass dipped in Rhodium with a shiny finish'}}, {'node': {'key': 'styling_tips', 'value': 'Pair this asymmetrical necklace with a simple, symmetrical top to create a visually striking contrast, allowing the necklace to be the focal point of your outfit.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920069992538', 'title': 'Default Title', 'sku': 'FG-0000593', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017858674778'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465064595546', 'title': 'Janus Cuff', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '38690'}}, {'node': {'key': 'materials', 'value': 'Brass dipped in Rhodium with a shiny finish'}}, {'node': {'key': 'styling_tips', 'value': 'Best paired with a cuff on each wrist, or with the Una Ring for a complete arm look.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920070058074', 'title': 'Default Title', 'sku': 'FG-0000595', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017858740314'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465064628314', 'title': 'Janus Cuff', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '38684'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish '}}, {'node': {'key': 'styling_tips', 'value': 'Best paired with a cuff on each wrist, or with the Una Ring for a complete arm look.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920070090842', 'title': 'Default Title', 'sku': 'FG-0000575', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017858773082'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465064661082', 'title': 'Juno Necklace', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '38682'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish '}}, {'node': {'key': 'styling_tips', 'value': 'Pair this asymmetrical necklace with a simple, symmetrical top to create a visually striking contrast, allowing the necklace to be the focal point of your outfit.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920070123610', 'title': 'Default Title', 'sku': 'FG-0000587', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017858805850'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465064726618', 'title': 'Una Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '38681'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish and custom-made resin stones.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920070156378', 'title': 'Default Title', 'sku': 'FG-0000583', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017858838618'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465064759386', 'title': 'Mini Lupa Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '38707'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish and custom-made resin stones.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920070221914', 'title': 'Pink', 'sku': 'FG-0000611', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017858904154'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920070254682', 'title': 'Green', 'sku': 'FG-0000610', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017858936922'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920070287450', 'title': 'Pearl White', 'sku': 'FG-0000609', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017858969690'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465064792154', 'title': 'Lupa Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '38814'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish and custom-made resin stones.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920070320218', 'title': 'Pink', 'sku': 'FG-0000582', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859002458'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920070352986', 'title': 'Green', 'sku': 'FG-0000581', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859035226'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920070385754', 'title': 'Pearl White', 'sku': 'FG-0000580', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859067994'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465064857690', 'title': 'Flow Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '34421'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish and custom-made resin stones.'}}, {'node': {'key': 'styling_tips', 'value': 'Pick a pair that contrasts with your hair color to make these earrings stand out.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920070484058', 'title': 'Teal Blue', 'sku': 'FG-0000522', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859166298'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920070516826', 'title': 'Emerald Green', 'sku': 'FG-0000523', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859199066'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920070549594', 'title': 'Lime Green', 'sku': 'FG-0000524', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859231834'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920070582362', 'title': 'Burnt Orange', 'sku': 'FG-0000525', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859264602'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920070615130', 'title': 'Pearl White', 'sku': 'FG-0000526', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859297370'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465064923226', 'title': 'Waterwall Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '34426'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish and custom-made resin stones.'}}, {'node': {'key': 'styling_tips', 'value': 'Balance these shoulder-dusters with a short dress or cropped top.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920070680666', 'title': 'Teal Blue', 'sku': 'FG-0000536', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859362906'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920070713434', 'title': 'Emerald Green', 'sku': 'FG-0000537', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859395674'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920070746202', 'title': 'Pearl White', 'sku': 'FG-0000538', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859428442'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465064955994', 'title': 'Gravel Ring', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '34367'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish and custom-made resin stones.'}}, {'node': {'key': 'styling_tips', 'value': 'Stack alongside the Riverstone Ring for a dimensioned look.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920070778970', 'title': 'Teal Blue', 'sku': 'FG-0000545', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859461210'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920070811738', 'title': 'Emerald Green', 'sku': 'FG-0000546', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859493978'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920070844506', 'title': 'Lime Green', 'sku': 'FG-0000547', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859526746'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920070877274', 'title': 'Pearl White', 'sku': 'FG-0000548', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859559514'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465065021530', 'title': 'Interchangeable Gravel Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '34364'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish and custom-made resin stones.'}}, {'node': {'key': 'styling_tips', 'value': 'Choose an outfit in a complementary color to your earrings to create a striking look.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920070975578', 'title': 'Lime Green', 'sku': 'FG-0000529', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859657818'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920071008346', 'title': 'Burnt Orange', 'sku': 'FG-0000530', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859690586'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920071041114', 'title': 'Pearl White', 'sku': 'FG-0000531', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859723354'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920071073882', 'title': 'Teal Blue', 'sku': 'FG-0000527', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859756122'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920071106650', 'title': 'Emerald Green', 'sku': 'FG-0000528', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859788890'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465065087066', 'title': 'Riverstone Bracelet', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '34358'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish and custom-made resin stones.'}}, {'node': {'key': 'styling_tips', 'value': 'Wear with the Riverstone Necklace for a subtle pop of color.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920071139418', 'title': 'Teal Blue', 'sku': 'FG-0000510', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859821658'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920071172186', 'title': 'Emerald Green', 'sku': 'FG-0000511', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859854426'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920071204954', 'title': 'Pearl White', 'sku': 'FG-0000512', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859887194'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465065119834', 'title': 'Interchangeable Erosion Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '34443'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish and custom-made resin stones.'}}, {'node': {'key': 'styling_tips', 'value': 'Wear with the Riverstone Necklace for a subtle pop of color.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920071237722', 'title': 'Teal Blue', 'sku': 'FG-0000517', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859919962'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920071270490', 'title': 'Emerald Green', 'sku': 'FG-0000518', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859952730'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920071303258', 'title': 'Lime Green', 'sku': 'FG-0000519', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017859985498'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920071336026', 'title': 'Burnt Orange', 'sku': 'FG-0000520', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017860018266'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920071368794', 'title': 'Pearl White', 'sku': 'FG-0000521', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017860051034'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465065185370', 'title': 'Snowdrop Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '30658'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish and custom-made resin stones.'}}, {'node': {'key': 'styling_tips', 'value': 'Wear the Snowdrop Earrings with bare shoulders or a wide neck chemise.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920071434330', 'title': 'Pearl White', 'sku': 'FG-0000487', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017860116570'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920071467098', 'title': 'Teal Green', 'sku': 'FG-0000486', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017860149338'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920071499866', 'title': 'Dusty Blue', 'sku': 'FG-0000485', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017860182106'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465065316442', 'title': 'Frost Necklace', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '30533'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish and custom-made resin stones.'}}, {'node': {'key': 'styling_tips', 'value': 'Perfect for a strapless black evening gown.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920072220762', 'title': 'Pearl White', 'sku': 'FG-0000491', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017860903002'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920072253530', 'title': 'Green', 'sku': 'FG-0000489', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017860935770'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920072286298', 'title': 'Red', 'sku': 'FG-0000490', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017860968538'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920072319066', 'title': 'Blue', 'sku': 'FG-0000488', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017861001306'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465065414746', 'title': 'Frost Ring', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '30513'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish and custom-made resin stones.'}}, {'node': {'key': 'styling_tips', 'value': 'Match the Frost ring with the rest of the Frost Set for a night out or wear alone for a pop of color.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920072515674', 'title': 'Green', 'sku': 'FG-0000466', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017861197914'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920072548442', 'title': 'Pearl White', 'sku': 'FG-0000467', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017861230682'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920072581210', 'title': 'Blue', 'sku': 'FG-0000465', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017861263450'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920072613978', 'title': 'Red', 'sku': 'FG-0000468', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017861296218'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465065480282', 'title': 'Plunge Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '30454'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish and irregular-shaped custom-made resin stones.'}}, {'node': {'key': 'styling_tips', 'value': 'Style the Plunge earrings with an updo and a simple outfit for that jaw-dropping style statement.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920072745050', 'title': 'Pearl White', 'sku': 'FG-0000464', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017861427290'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920072777818', 'title': 'Green', 'sku': 'FG-0000462', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017861460058'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920072810586', 'title': 'Blue', 'sku': 'FG-0000461', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017861492826'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920072843354', 'title': 'Red', 'sku': 'FG-0000463', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017861525594'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465065545818', 'title': 'Droplet Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '30449'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish and irregular-shaped custom-made resin stones.'}}, {'node': {'key': 'styling_tips', 'value': 'Stack the droplet earrings with the Plunge earrings for a full ear look'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920072908890', 'title': 'Pearl White', 'sku': 'FG-0000458', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017861591130'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920072941658', 'title': 'Blue', 'sku': 'FG-0000457', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017861623898'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920072974426', 'title': 'Red', 'sku': 'FG-0000460', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017861656666'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920073007194', 'title': 'Green', 'sku': 'FG-0000459', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017861689434'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465065578586', 'title': 'Mini Pebble Hoops Mix', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '36903'}}, {'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 21k gold.'}}, {'node': {'key': 'styling_tips', 'value': 'For a refined look, layer the Mini Pebble Hoops Mix along the ear or wear alone with a pulled-back hairstyle to let their subtle elegance shine.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920073039962', 'title': 'Default Title', 'sku': 'FG-0000570', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017861722202'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465065611354', 'title': 'Mini Arroyo Mix Bracelet', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '36901'}}, {'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 21k gold.'}}, {'node': {'key': 'styling_tips', 'value': 'Wear with an asymmetrical cut to maximize the look.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920073072730', 'title': 'Default Title', 'sku': 'FG-0000572', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017861754970'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465065644122', 'title': 'Riverstone Ring Mix', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '36899'}}, {'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 21k gold.'}}, {'node': {'key': 'styling_tips', 'value': 'Maximize the mixed metal look by pairing this with the Mini Riverstone Earrings Mix and Riverstone Necklace Mix.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920073105498', 'title': 'Default Title', 'sku': 'FG-0000571', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017861787738'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465065676890', 'title': 'Riverstone Necklace Mix', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '36895'}}, {'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 21k gold.'}}, {'node': {'key': 'styling_tips', 'value': 'Style this necklace with a bardot, strapless top, or fitted mock-neck.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920073138266', 'title': 'Default Title', 'sku': 'FG-0000568', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017861820506'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465065775194', 'title': 'Mini Riverstone Earrings Mix', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '36878'}}, {'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 21k gold.'}}, {'node': {'key': 'styling_tips', 'value': 'Wear with an updo to show these off.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920073269338', 'title': 'Default Title', 'sku': 'FG-0000569', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017861951578'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465065807962', 'title': 'Cliff Earcap', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '34321'}}, {'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 21k gold.'}}, {'node': {'key': 'styling_tips', 'value': 'Wear with your hair to the side for an edgier touch'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920073302106', 'title': 'Default Title', 'sku': 'FG-0000515', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017861984346'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465065840730', 'title': 'Shoreline Necklace', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '34312'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish'}}, {'node': {'key': 'styling_tips', 'value': 'Pair with the Flow Earrings to keep it understated, yet chic.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920073334874', 'title': 'Default Title', 'sku': 'FG-0000543', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017862017114'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465065906266', 'title': 'Shoreline Cuff', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '34308'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish'}}, {'node': {'key': 'styling_tips', 'value': 'Complete the Shoreline look with the Shoreline Necklace, perfect with a white flowy dress.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920073400410', 'title': 'Default Title', 'sku': 'FG-0000513', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017862082650'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465065971802', 'title': 'Floway ring set', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '34303'}}, {'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 21k gold.'}}, {'node': {'key': 'styling_tips', 'value': 'Maximize the mixed metal look by pairing this with the Arroyo Earrings and Necklace. Wear together or separately.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920073498714', 'title': 'Default Title', 'sku': 'FG-0000544', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017862180954'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465066070106', 'title': 'Arroyo Bracelet', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '34289'}}, {'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 21k gold.'}}, {'node': {'key': 'styling_tips', 'value': 'Wear with an asymmetrical cut to maximize the look.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920073662554', 'title': 'Default Title', 'sku': 'FG-0000508', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017862344794'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465066233946', 'title': 'Arroyo Necklace', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '34287'}}, {'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 21k gold and sculpted irregular clear resin stone.'}}, {'node': {'key': 'styling_tips', 'value': 'Style with a deep V-neck or a fitted turtleneck to accentuate the drop.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920074121306', 'title': 'Default Title', 'sku': 'FG-0000540', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017862803546'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465066397786', 'title': 'Arroyo Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '34282'}}, {'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 21k gold.'}}, {'node': {'key': 'styling_tips', 'value': 'Wear with an updo to show these off.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920074448986', 'title': 'Default Title', 'sku': 'FG-0000514', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017863131226'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465066463322', 'title': 'Mini Pebble Hoops', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '34279'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish'}}, {'node': {'key': 'styling_tips', 'value': 'Stack with the larger Pebble Hoops for a layered and dimensioned look.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920074580058', 'title': 'Default Title', 'sku': 'FG-0000532', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017863262298'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465066528858', 'title': 'Whirlpool Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '34274'}}, {'node': {'key': 'materials', 'value': 'Brass dipped in 21k gold with custom dyed resin stones'}}, {'node': {'key': 'styling_tips', 'value': 'Transform any outfit into a statement with these flattering earrings.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920074711130', 'title': 'Default Title', 'sku': 'FG-0000539', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017863393370'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465066692698', 'title': 'Pebble Hoops', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '34268'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish'}}, {'node': {'key': 'styling_tips', 'value': 'Stack with the Mini Pebble Hoops for a layered and dimensioned look.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920075235418', 'title': 'Default Title', 'sku': 'FG-0000534', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017863917658'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465066791002', 'title': 'Creek Hoops', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '34264'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish'}}, {'node': {'key': 'styling_tips', 'value': 'Style with long straight hair to accentuate the curves of the hoops.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920075497562', 'title': 'Default Title', 'sku': 'FG-0000516', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017864179802'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465066922074', 'title': 'Gravel Bracelet', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '34189'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish'}}, {'node': {'key': 'styling_tips', 'value': 'Get the full Gravel look by pairing it with the Gravel Choker, Gravel Earrings and Gravel Ring.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920075661402', 'title': 'Default Title', 'sku': 'FG-0000509', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017864343642'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465067020378', 'title': 'Gravel Chocker', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '34173'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish'}}, {'node': {'key': 'styling_tips', 'value': 'Pair with statement earrings like the Gravel Earrings for an edgy look.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920075890778', 'title': 'Default Title', 'sku': 'FG-0000541', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017864573018'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465067085914', 'title': 'Riverstone ring', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '34164'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish'}}, {'node': {'key': 'styling_tips', 'value': 'Pair with the Gravel Ring for a mix of textures, shapes and colors.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920076087386', 'title': 'Default Title', 'sku': 'FG-0000549', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017864769626'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465067184218', 'title': 'Riverstone Necklace', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '34156'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish'}}, {'node': {'key': 'styling_tips', 'value': 'Style this necklace with a bardot, strapless top, or fitted mock-neck.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920076185690', 'title': 'Default Title', 'sku': 'FG-0000542', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017864867930'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465067249754', 'title': 'Mini Riverstone Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '34074'}}, {'node': {'key': 'materials', 'value': 'Brass dipped in 21k gold with a matte finish and sculpted irregular clear resin stone.'}}, {'node': {'key': 'styling_tips', 'value': 'Pair with the Riverstone Necklace for a maximalist look.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920076349530', 'title': 'Default Title', 'sku': 'FG-0000533', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017865031770'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465067282522', 'title': 'Riverstone Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '34071'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish'}}, {'node': {'key': 'styling_tips', 'value': 'Wear with a fitted dress to make these earrings pop.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920076382298', 'title': 'Default Title', 'sku': 'FG-0000535', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017865064538'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465067675738', 'title': 'Cassandra Bracelet', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '30651'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish'}}, {'node': {'key': 'styling_tips', 'value': 'Match it with the Cassandra Choker with a black evening gown.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920077758554', 'title': 'Default Title', 'sku': 'FG-0000289', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017866440794'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465067741274', 'title': 'Cassandra Choker', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '30642'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish'}}, {'node': {'key': 'styling_tips', 'value': 'Perfect for a strapless black evening gown.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920077856858', 'title': 'Default Title', 'sku': 'FG-0000253', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017866539098'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465067774042', 'title': 'Cassandra Pinky Ring', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '30638'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish'}}, {'node': {'key': 'styling_tips', 'value': 'The Cassandra ring can be stacked with the Pinky Cassandra Ring for a maximized look'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920077889626', 'title': 'Default Title', 'sku': 'FG-0000498', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017866571866'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465067839578', 'title': 'Cassandra Ring', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '30631'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish'}}, {'node': {'key': 'styling_tips', 'value': 'The Cassandra ring can be stacked with the Pinky Cassandra Ring for a maximized look'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920078151770', 'title': 'Default Title', 'sku': 'FG-0000496', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017866834010'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465067905114', 'title': 'Cassandra Mix Pinky Ring', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '30629'}}, {'node': {'key': 'materials', 'value': '925 sterling silver & 21K gold-plated silver with custom-made resin stones.'}}, {'node': {'key': 'styling_tips', 'value': 'Match the ring with the Icefall Mix Earrings for a full mixed metal look'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920078348378', 'title': 'Default Title', 'sku': 'FG-0000499', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017867030618'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465068036186', 'title': 'Cassandra Mix Ring', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '30625'}}, {'node': {'key': 'materials', 'value': '925 sterling silver & 21K gold-plated silver with custom-made resin stones.'}}, {'node': {'key': 'styling_tips', 'value': 'Match the ring with the Icefall Mix Earrings for a full mixed metal look'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920078872666', 'title': 'Default Title', 'sku': 'FG-0000497', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017867554906'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465068134490', 'title': 'Frost Mix Ring', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '30495'}}, {'node': {'key': 'materials', 'value': '925 sterling silver & 21K gold-plated silver with custom-made resin stones.'}}, {'node': {'key': 'styling_tips', 'value': 'Match the ring with the Icefall Mix Earrings to complete the set, or stack 2 together for a bold look'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920079364186', 'title': 'Default Title', 'sku': 'FG-0000500', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017868046426'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465068167258', 'title': 'Icefall Mix Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '30483'}}, {'node': {'key': 'materials', 'value': '925 sterling silver & 21K gold-plated silver with custom-made resin stones.'}}, {'node': {'key': 'styling_tips', 'value': 'Put your hair up in a bun to really show off these lobe-shaped earrings.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920079396954', 'title': 'Default Title', 'sku': 'FG-0000482', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017868079194'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465068331098', 'title': 'Cassandra Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '30432'}}, {'node': {'key': 'materials', 'value': '121k gold-plated brass with a matte finish and irregular-shaped custom-made resin stones.'}}, {'node': {'key': 'styling_tips', 'value': 'Match the pair with the rest of the Cassandra family to complete the set, or wear them alone with a bold red lip.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920079855706', 'title': 'Default Title', 'sku': 'FG-0000477', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017868537946'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465068396634', 'title': 'Nebula Necklace', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '28904'}}, {'node': {'key': 'materials', 'value': 'Brass dipped in 21k gold with custom dyed resin stones'}}, {'node': {'key': 'styling_tips', 'value': 'Wear with a V-cut gown to make the most out of this statement piece.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920080085082', 'title': 'Space Blue', 'sku': 'FG-0000429', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017868767322'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920080117850', 'title': 'Terrestrial Green', 'sku': 'FG-0000428', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017868800090'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920080150618', 'title': 'Jupiter Red', 'sku': 'FG-0000430', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017868832858'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465068462170', 'title': 'Nebula Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '28896'}}, {'node': {'key': 'materials', 'value': 'Brass dipped in 21k gold with custom dyed resin stones'}}, {'node': {'key': 'styling_tips', 'value': 'Wear with an up-do to make them the focal point.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920080281690', 'title': 'Space Blue', 'sku': 'FG-0000425', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017868963930'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920080314458', 'title': 'Terrestrial Green', 'sku': 'FG-0000424', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017868996698'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920080347226', 'title': 'Jupiter Red', 'sku': 'FG-0000426', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017869029466'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465068560474', 'title': 'The Cruiser', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '37469'}}, {'node': {'key': 'materials', 'value': '100% woven linen exterior, velvet interior with brass hardware (zipper and emblem).'}}, {'node': {'key': 'styling_tips', 'value': 'The perfect box to store all your jewlery '}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920080543834', 'title': 'Beige', 'sku': 'FG-0000560', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017869226074'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920080576602', 'title': 'Burnt Orange', 'sku': 'FG-0000554', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017869258842'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920080609370', 'title': 'Green', 'sku': 'FG-0000553', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017869291610'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920080642138', 'title': 'Purple', 'sku': 'FG-0000566', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017869324378'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465068691546', 'title': 'The Jetsetter', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '38930'}}, {'node': {'key': 'materials', 'value': '100% woven linen exterior, velvet interior with brass hardware (zipper and emblem).'}}, {'node': {'key': 'styling_tips', 'value': 'The perfect box to store all your jewlery '}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920081100890', 'title': 'Beige', 'sku': 'FG-0000555', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017869783130'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920081133658', 'title': 'Burnt Orange', 'sku': 'FG-0000557', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017869815898'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920081166426', 'title': 'Green', 'sku': 'FG-0000556', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017869848666'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920081199194', 'title': 'Purple', 'sku': 'FG-0000565', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017869881434'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465068789850', 'title': 'The Weekender', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '37463'}}, {'node': {'key': 'materials', 'value': '100% woven linen exterior, velvet interior with brass hardware (zipper and emblem).'}}, {'node': {'key': 'styling_tips', 'value': 'The perfect box to store all your jewlery '}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920081461338', 'title': 'Green', 'sku': 'FG-0000559', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017870143578'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920081494106', 'title': 'Purple', 'sku': 'FG-0000567', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017870176346'}}}, {'node': {'id': 'gid://shopify/ProductVariant/42003222954074', 'title': 'Orange', 'sku': None, 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44100497014874'}}}, {'node': {'id': 'gid://shopify/ProductVariant/42003222986842', 'title': 'Beige', 'sku': None, 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44100497047642'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465069117530', 'title': 'Cyclone Bracelet', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '26987'}}, {'node': {'key': 'materials', 'value': 'Brass dipped in 21k gold with custom dyed resin stones'}}, {'node': {'key': 'styling_tips', 'value': 'This cuff makes a storm on its own, so match with a simple sleeve to make it pop! Paired with the Mini Meteorite Earrings and your look is complete.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920082640986', 'title': 'Space Blue', 'sku': 'FG-0000417', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017871323226'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920082673754', 'title': 'Terrestrial Green', 'sku': 'FG-0000415', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017871355994'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920082706522', 'title': 'Jupiter Red', 'sku': 'FG-0000416', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017871388762'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465069215834', 'title': 'Sandstone Necklace', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '26984'}}, {'node': {'key': 'materials', 'value': 'Brass dipped in 21k gold with custom dyed resin stones'}}, {'node': {'key': 'styling_tips', 'value': 'Embrace the simplicity of this statement by combining with a shirt or square neck top.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920083001434', 'title': 'Jupiter Red', 'sku': 'FG-0000432', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017871683674'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920083034202', 'title': 'Space Blue', 'sku': 'FG-0000433', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017871716442'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920083066970', 'title': 'Olive Green', 'sku': 'FG-0000431', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017871749210'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465069477978', 'title': 'Meteorite Necklace', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '26773'}}, {'node': {'key': 'materials', 'value': 'Brass dipped in 21k gold with custom dyed resin stones'}}, {'node': {'key': 'styling_tips', 'value': 'Wear with a square neck for a dynamic mix of shapes and silhouettes.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920084017242', 'title': 'Moon White', 'sku': 'FG-0000381', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017872699482'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920084050010', 'title': 'Space Blue', 'sku': 'FG-0000378', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017872732250'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920084082778', 'title': 'Olive Green', 'sku': 'FG-0000379', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017872765018'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920084115546', 'title': 'Jupiter Red', 'sku': 'FG-0000380', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017872797786'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465069674586', 'title': 'Interchangeable Meteorite Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '26754'}}, {'node': {'key': 'materials', 'value': 'Brass dipped in 21k gold with custom dyed resin stones'}}, {'node': {'key': 'styling_tips', 'value': 'Wear long with a barely-there fit to make these earrings stand out, or short for an everyday look.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920084738138', 'title': 'Jupiter Red', 'sku': 'FG-0000372', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017873420378'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920084770906', 'title': 'Moon White', 'sku': 'FG-0000373', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017873453146'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920084803674', 'title': 'Space Blue', 'sku': 'FG-0000370', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017873485914'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920084836442', 'title': 'Olive Green', 'sku': 'FG-0000371', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017873518682'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465070198874', 'title': 'Selene Pendant', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '24100'}}, {'node': {'key': 'materials', 'value': 'Brass dipped in 21k gold with custom dyed resin stones'}}, {'node': {'key': 'styling_tips', 'value': 'Stack or wear long, the Selene Pendant can be worn day-to-night.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920086638682', 'title': 'Pink', 'sku': 'FG-0000255', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017875320922'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920086671450', 'title': 'Olive Green', 'sku': 'FG-0000254', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017875353690'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920086704218', 'title': 'Burnt Orange', 'sku': 'FG-0000256', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017875386458'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41920086736986', 'title': 'Pearl White', 'sku': 'FG-0000257', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017875419226'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465070329946', 'title': 'Aurora Choker', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '26985'}}, {'node': {'key': 'materials', 'value': '21k gold-plated brass with a matte finish.'}}, {'node': {'key': 'styling_tips', 'value': 'Wear the Aurora Necklace with bare shoulders or a wide neck chemise.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920087162970', 'title': 'Default Title', 'sku': 'FG-0000427', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017875845210'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465070493786', 'title': 'Ripple Mix Bracelet', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '26628'}}, {'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 21k gold.'}}, {'node': {'key': 'styling_tips', 'value': 'Wear alone to make a statement, or mix with silver and gold to tie it all together!'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920087588954', 'title': 'Default Title', 'sku': 'FG-0000384', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017876271194'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465070559322', 'title': 'Ripple Gold Bracelet', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '26627'}}, {'node': {'key': 'materials', 'value': 'Brass dipped in 21k gold with matte finish'}}, {'node': {'key': 'styling_tips', 'value': 'Stack these for a maximalist arm candy look.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920087883866', 'title': 'Default Title', 'sku': 'FG-0000383', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017876566106'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465070624858', 'title': 'Mini Sahara Mix Hoop', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '26624'}}, {'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 21k gold.'}}, {'node': {'key': 'styling_tips', 'value': 'Get ready to wear these with any and everything!'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920088014938', 'title': 'Default Title', 'sku': 'FG-0000369', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017876697178'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465070821466', 'title': 'Sahara Mix Hoop', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '26622'}}, {'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 21k gold.'}}, {'node': {'key': 'styling_tips', 'value': 'Stack these with the Mini Sahara Hoop for a dynamic look.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920088539226', 'title': 'Default Title', 'sku': 'FG-0000367', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017877221466'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465070952538', 'title': 'Mini Harmonia Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '26126'}}, {'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 21k gold.'}}, {'node': {'key': 'styling_tips', 'value': 'Wear your hair up to flaunt these ear-cuffing earrings.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920088997978', 'title': 'Default Title', 'sku': 'FG-0000345', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017877778522'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465071083610', 'title': 'Elea Hoop', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '26117'}}, {'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 21k gold.'}}, {'node': {'key': 'styling_tips', 'value': 'A chic everyday earring, style the Elea Hoop with a casual outfit to elevate any look.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920089391194', 'title': 'Default Title', 'sku': 'FG-0000347', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017878073434'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465071181914', 'title': 'Medusa Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '26116'}}, {'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 21k gold.'}}, {'node': {'key': 'styling_tips', 'value': 'Go edgy with a leather C\x14fit or flirty with a sweetheart neckline.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920089587802', 'title': 'Default Title', 'sku': 'FG-0000344', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017878270042'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465071247450', 'title': 'Thalia Necklace', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '23947'}}, {'node': {'key': 'materials', 'value': 'Brass dipped in 21k gold with a matte finish with an irregular-shaped pearl'}}, {'node': {'key': 'styling_tips', 'value': 'Style with a sweetheart neckline or a deep V-Neck for the ultimate romantic looks'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920089718874', 'title': 'Default Title', 'sku': 'FG-0000223', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017878401114'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465071411290', 'title': 'Hera Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '23943'}}, {'node': {'key': 'materials', 'value': 'Brass dipped in 21k gold with matte finish'}}, {'node': {'key': 'styling_tips', 'value': 'Throw on a white dress and sport a wavy hairstyle to really feel the full Hera effect.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920090046554', 'title': 'Default Title', 'sku': 'FG-0000267', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017878728794'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465071640666', 'title': 'Harmonia Hoop', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '23615'}}, {'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 21k gold.'}}, {'node': {'key': 'styling_tips', 'value': 'Pair these earrings with our Elea Silver Earcuff and a black silk dress for an elegant look.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920090407002', 'title': 'Default Title', 'sku': 'FG-0000225', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017879089242'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465071771738', 'title': 'Sulla Luna Mix Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '10474'}}, {'node': {'key': 'materials', 'value': '925 Sterling silver dipped in 21k gold.'}}, {'node': {'key': 'styling_tips', 'value': 'Flaunt these earrings with sleek hair or a low ponytail.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920090701914', 'title': 'Default Title', 'sku': 'FG-0000077', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017879384154'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7465071902810', 'title': 'Sulla Luna Earrings', 'metafields': {'edges': [{'node': {'key': 'external_id', 'value': '8703'}}, {'node': {'key': 'materials', 'value': 'Brass dipped in 21k gold with matte finish'}}, {'node': {'key': 'styling_tips', 'value': 'These earrings are a jack-of-all-trades, style them with anything in your closet to elevate your look!'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41920090898522', 'title': 'Default Title', 'sku': 'FG-0000075', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44017879580762'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7481860980826', 'title': 'Essence Bangle', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in Rhodium with a shiny finish, custom-made Resin stones & crystals. Our signature hand-sculpted resin captures a luminous, translucent effect. While strong and durable for daily wear, it should be treated with care as it can break if dropped or subjected to impact.\n'}}, {'node': {'key': 'styling_tips', 'value': 'Embrace your full Aura by stacking Essence bangles in different colors, creating a vibrant, personalized expression of your unique spirit.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41970136416346', 'title': 'Blue', 'sku': 'FG-0000618', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067597254746'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970136449114', 'title': 'Sage Green', 'sku': 'FG-0000619', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067597287514'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970136481882', 'title': 'Orange', 'sku': 'FG-0000620', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067597320282'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7481861013594', 'title': 'Horizon Bracelet', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in Rhodium with a shiny finish, custom-made Resin stones & crystals. Our signature hand-sculpted resin captures a luminous, translucent effect. While strong and durable for daily wear, it should be treated with care as it can break if dropped or subjected to impact.\n'}}, {'node': {'key': 'styling_tips', 'value': 'For a harmonious and elevated look, pair the Horizon bracelet with its matching Horizon necklace. This duo creates a cohesive statement, enhancing the aura of balance and sophisticated design across your ensemble'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41970136514650', 'title': 'Blue', 'sku': 'FG-0000621', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067597353050'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970136547418', 'title': 'Sage Green', 'sku': 'FG-0000622', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067597385818'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970136580186', 'title': 'Orange', 'sku': 'FG-0000623', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067597418586'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7481861046362', 'title': 'Serenity Bangle', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in Rhodium with a shiny finish & custom-made Resin stones. Our signature hand-sculpted resin captures a luminous, translucent effect. While strong and durable for daily wear, it should be treated with care as it can break if dropped or subjected to impact.\n'}}, {'node': {'key': 'styling_tips', 'value': 'Embrace your full Aura by stacking Essence bangles in different colors, creating a vibrant, personalized expression of your unique spirit.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41970136612954', 'title': 'Blue', 'sku': 'FG-0000624', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067597451354'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970136645722', 'title': 'Sage Green', 'sku': 'FG-0000625', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067597484122'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970136678490', 'title': 'Orange', 'sku': 'FG-0000627', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067597516890'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7481861079130', 'title': 'Serenity Bangle', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in 21k Gold with a matte finish & custom-made Resin stones. Our signature hand-sculpted resin captures a luminous, translucent effect. While strong and durable for daily wear, it should be treated with care as it can break if dropped or subjected to impact.\n'}}, {'node': {'key': 'styling_tips', 'value': 'Embrace your full Aura by stacking Essence bangles in different colors, creating a vibrant, personalized expression of your unique spirit.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41970136711258', 'title': 'Lime Green', 'sku': 'FG-0000626', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067597549658'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970136744026', 'title': 'White', 'sku': 'FG-0000629', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067597582426'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970136776794', 'title': 'Pink', 'sku': 'FG-0000628', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067597615194'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7481861111898', 'title': 'Multi-way Bliss Hoops', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in Rhodium with a shiny finish & custom-made Resin stones. Our signature hand-sculpted resin captures a luminous, translucent effect. While strong and durable for daily wear, it should be treated with care as it can break if dropped or subjected to impact.\n'}}, {'node': {'key': 'styling_tips', 'value': 'Ways to Style Your Bliss Hoops:\nThe Perfect Pair: Insert one of the resin pieces into each metal hoop for a balanced, harmonious look.\nAsymmetrical Aura: Mix and match different colored resin pieces in each hoop for a dynamic and unique expression.\nCreative Stacks: Explore stacking the resin hoops on one ear for a bolder effect. '}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41970136809562', 'title': 'Default Title', 'sku': 'FG-0000631', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067597647962'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7481861144666', 'title': 'Multi-way Bliss Hoops', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in 21k Gold with a matte finish & custom-made Resin stones. Our signature hand-sculpted resin captures a luminous, translucent effect. While strong and durable for daily wear, it should be treated with care as it can break if dropped or subjected to impact.\n '}}, {'node': {'key': 'styling_tips', 'value': 'Ways to Style Your Bliss Hoops:\nThe Perfect Pair: Insert one of the resin pieces into each metal hoop for a balanced, harmonious look.\nAsymmetrical Aura: Mix and match different colored resin pieces in each hoop for a dynamic and unique expression.\nCreative Stacks: Explore stacking the resin hoops on one ear for a bolder effect. '}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41970136842330', 'title': 'Default Title', 'sku': 'FG-0000630', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067597680730'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7481861275738', 'title': 'Ember Earrings', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in Rhodium with a shiny finish & custom-made Resin stones. Our signature hand-sculpted resin captures a luminous, translucent effect. While strong and durable for daily wear, it should be treated with care as it can break if dropped or subjected to impact.\n'}}, {'node': {'key': 'styling_tips', 'value': 'Let the Ember earrings shine by pairing them with an updo or swept-back hair. They beautifully elevate both sophisticated daytime looks and elegant evening attire, symbolizing your inner radiance.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41970137727066', 'title': 'Blue', 'sku': 'FG-0000632', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067598696538'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970137792602', 'title': 'Sage Green', 'sku': 'FG-0000633', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067598729306'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970137858138', 'title': 'Orange', 'sku': 'FG-0000635', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067598762074'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7481861406810', 'title': 'Ember Earrings', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in 21k Gold with a matte finish & custom-made Resin stones. Our signature hand-sculpted resin captures a luminous, translucent effect. While strong and durable for daily wear, it should be treated with care as it can break if dropped or subjected to impact.\n '}}, {'node': {'key': 'styling_tips', 'value': 'Let the Ember earrings shine by pairing them with an updo or swept-back hair. They beautifully elevate both sophisticated daytime looks and elegant evening attire, symbolizing your inner radiance.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41970138284122', 'title': 'Lime Green', 'sku': 'FG-0000634', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067599122522'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970138316890', 'title': 'White', 'sku': 'FG-0000637', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067599155290'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970138349658', 'title': 'Pink', 'sku': 'FG-0000636', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067599188058'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7481861472346', 'title': 'Essence Earrings', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in Rhodium with a shiny finish, custom-made Resin stones & crystals. Our signature hand-sculpted resin captures a luminous, translucent effect. While strong and durable for daily wear, it should be treated with care as it can break if dropped or subjected to impact.\n'}}, {'node': {'key': 'styling_tips', 'value': 'Wear them with a sleek, pulled-back hairstyle and a high-collar to emphasize their elegant drop and the way the zirconia catches every flicker of light.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41970139365466', 'title': 'Blue', 'sku': 'FG-0000638', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067600203866'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970139398234', 'title': 'Sage Green', 'sku': 'FG-0000639', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067600236634'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970139431002', 'title': 'Orange', 'sku': 'FG-0000641', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067600269402'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7481861603418', 'title': 'Essence Earrings', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in 21k Gold with a matte finish, custom-made Resin stones & crystals. Our signature hand-sculpted resin captures a luminous, translucent effect. While strong and durable for daily wear, it should be treated with care as it can break if dropped or subjected to impact.\n'}}, {'node': {'key': 'styling_tips', 'value': 'Wear them with a sleek, pulled-back hairstyle and a high-collar to emphasize their elegant drop and the way the zirconia catches every flicker of light.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41970140446810', 'title': 'Lime Green', 'sku': 'FG-0000640', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067601285210'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970140479578', 'title': 'White', 'sku': 'FG-0000643', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067601317978'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970140512346', 'title': 'Pink', 'sku': 'FG-0000642', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067601350746'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7481861734490', 'title': 'Nova Earrings', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in Rhodium with a shiny finish, custom-made Resin stones & crystals. Our signature hand-sculpted resin captures a luminous, translucent effect. While strong and durable for daily wear, it should be treated with care as it can break if dropped or subjected to impact.\n'}}, {'node': {'key': 'styling_tips', 'value': 'Let the Nova earrings be a bold declaration of your unwavering confidence. Showcase their radiant glow and substantial design by pairing them with tailored silhouettes or a sleek updo, allowing them to powerfully express your self-assurance.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41970141528154', 'title': 'Blue', 'sku': 'FG-0000653', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067602366554'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970141560922', 'title': 'Sage Green', 'sku': 'FG-0000654', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067602399322'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970141593690', 'title': 'Orange', 'sku': 'FG-0000655', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067602432090'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7481861865562', 'title': 'Serenity Earrings', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in Rhodium with a shiny finish & custom-made Resin stones. Our signature hand-sculpted resin captures a luminous, translucent effect. While strong and durable for daily wear, it should be treated with care as it can break if dropped or subjected to impact.\n'}}, {'node': {'key': 'styling_tips', 'value': 'Pair these serene earrings with flowing fabrics like silk or cashmere for an effortlessly elegant look, allowing their gentle luminosity to radiate calm and grace'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41970142609498', 'title': 'Blue', 'sku': 'FG-0000656', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067603447898'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970142642266', 'title': 'Sage Green', 'sku': 'FG-0000657', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067603480666'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970142675034', 'title': 'Orange', 'sku': 'FG-0000659', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067603513434'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7481862062170', 'title': 'Serenity Earrings', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in 21k Gold with a matte finish & custom-made Resin stones. Our signature hand-sculpted resin captures a luminous, translucent effect. While strong and durable for daily wear, it should be treated with care as it can break if dropped or subjected to impact.\n '}}, {'node': {'key': 'styling_tips', 'value': 'Pair these serene earrings with flowing fabrics like silk or cashmere for an effortlessly elegant look, allowing their gentle luminosity to radiate calm and grace'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41970144018522', 'title': 'Lime Green', 'sku': 'FG-0000658', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067604856922'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970144051290', 'title': 'White', 'sku': 'FG-0000661', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067604889690'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970144084058', 'title': 'Pink', 'sku': 'FG-0000660', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067604922458'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7481862258778', 'title': 'Solara Earrings', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in 21k Gold with a matte finish & custom-made Resin stones. Our signature hand-sculpted resin captures a luminous, translucent effect. While strong and durable for daily wear, it should be treated with care as it can break if dropped or subjected to impact.\n'}}, {'node': {'key': 'styling_tips', 'value': 'Showcase the Solara earrings against a closed neckline to highlight their radiant glow and sculptural form. For a powerful statement, pair them with the matching Solara necklace.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41970145755226', 'title': 'Lime Green', 'sku': 'FG-0000662', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067606593626'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970145787994', 'title': 'White', 'sku': 'FG-0000664', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067606626394'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970145820762', 'title': 'Pink', 'sku': 'FG-0000663', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067606659162'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7481862455386', 'title': 'Vault Earcuff', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in 21k Gold with a matte finish & crystals'}}, {'node': {'key': 'styling_tips', 'value': "The Vault Ear Cuff offers a modern, confident edge to any look. Showcase its intricate metalwork and sparkling crystals by wearing it with swept-back hair or a sleek updo. For a harmonious and complete statement, pair it with the Essence Earrings, allowing the two pieces to beautifully complement each other's narrative"}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41970147491930', 'title': 'Default Title', 'sku': 'FG-0000665', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067608330330'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7481862651994', 'title': 'Vault Earcuff', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in Rhodium with a shiny finish &crystals'}}, {'node': {'key': 'styling_tips', 'value': "The Vault Ear Cuff offers a modern, confident edge to any look. Showcase its intricate metalwork and sparkling crystals by wearing it with swept-back hair or a sleek updo. For a harmonious and complete statement, pair it with the Essence Earrings, allowing the two pieces to beautifully complement each other's narrative"}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41970148966490', 'title': 'Default Title', 'sku': 'FG-0000666', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067609837658'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7481862815834', 'title': 'Eclipse Necklace', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in Rhodium with a shiny finish & custom-made Resin stones. Our signature hand-sculpted resin captures a luminous, translucent effect. While strong and durable for daily wear, it should be treated with care as it can break if dropped or subjected to impact.\n'}}, {'node': {'key': 'styling_tips', 'value': "Showcase the Ember Necklace's radiant glow by pairing it with a low or boat neckline, allowing its sculpted metal band and luminous resin pendant to beautifully stand out. Its unique design and inner spark make it perfect for elevating both sophisticated daytime looks and elegant evening wear."}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41970150342746', 'title': 'Blue', 'sku': 'FG-0000667', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067611181146'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970150408282', 'title': 'Sage Green', 'sku': 'FG-0000668', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067611213914'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970150441050', 'title': 'Orange', 'sku': 'FG-0000669', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067611246682'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7481863012442', 'title': 'Ember Necklace', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in 21k Gold with a matte finish & custom-made Resin stones. Our signature hand-sculpted resin captures a luminous, translucent effect. While strong and durable for daily wear, it should be treated with care as it can break if dropped or subjected to impact.\n '}}, {'node': {'key': 'styling_tips', 'value': "Showcase the Ember Necklace's radiant glow by pairing it with a low or boat neckline, allowing its sculpted metal band and luminous resin pendant to beautifully stand out. Its unique design and inner spark make it perfect for elevating both sophisticated daytime looks and elegant evening wear."}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41970152079450', 'title': 'Blue', 'sku': 'FG-0000670', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067612917850'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970152112218', 'title': 'Sage Green', 'sku': 'FG-0000671', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067612950618'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970152144986', 'title': 'Orange', 'sku': 'FG-0000673', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067612983386'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7481863176282', 'title': 'Ember Necklace', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in 21k Gold with a matte finish & custom-made Resin stones. Our signature hand-sculpted resin captures a luminous, translucent effect. While strong and durable for daily wear, it should be treated with care as it can break if dropped or subjected to impact.\n'}}, {'node': {'key': 'styling_tips', 'value': 'Adjust the Solara Necklace to your desired length. Wear it tighter to highlight its radiant glow and sculptural pendant, or longer for an elegant drape, allowing its unique chain to reflect your undimmed aura'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41970153816154', 'title': 'Lime Green', 'sku': 'FG-0000672', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067614654554'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970153848922', 'title': 'White', 'sku': 'FG-0000675', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067614687322'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970153881690', 'title': 'Pink', 'sku': 'FG-0000674', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067614720090'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7481863405658', 'title': 'Horizon Necklace', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in Rhodium with a shiny finish, custom-made Resin stones & crystals. Our signature hand-sculpted resin captures a luminous, translucent effect. While strong and durable for daily wear, it should be treated with care as it can break if dropped or subjected to impact.\n'}}, {'node': {'key': 'styling_tips', 'value': 'Style the Horizon Necklace with a sleek, open neckline, like a silk blouse or an off-shoulder dress, to highlight its bold, sculptural form.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41970155552858', 'title': 'Blue', 'sku': 'FG-0000679', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067616391258'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970155585626', 'title': 'Sage Green', 'sku': 'FG-0000680', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067616424026'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970155618394', 'title': 'Orange', 'sku': 'FG-0000681', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067616456794'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7481863602266', 'title': 'Multi-way Halo Ring', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in 21k Gold with a matte finish & custom-made Resin stones. Our signature hand-sculpted resin captures a luminous, translucent effect. While strong and durable for daily wear, it should be treated with care as it can break if dropped or subjected to impact.\n'}}, {'node': {'key': 'styling_tips', 'value': 'Embrace the versatility of the Multi-way Halo Ring Set by letting your mood guide your choice: layer a vibrant resin band for a pop of color, wear the metal Halo solo for minimalist elegance, or stack multiple resin bands for a personalized statement that truly reflects your aura'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/42002812403802', 'title': 'S/M', 'sku': 'FG-0000699', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44100086595674'}}}, {'node': {'id': 'gid://shopify/ProductVariant/42002812436570', 'title': 'M/L', 'sku': 'FG-0000687', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44100086628442'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7481863798874', 'title': 'Multi-way Halo Ring', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in Rhodium with a shiny finish & custom-made Resin stones. Our signature hand-sculpted resin captures a luminous, translucent effect. While strong and durable for daily wear, it should be treated with care as it can break if dropped or subjected to impact.\n'}}, {'node': {'key': 'styling_tips', 'value': 'Embrace the versatility of the Multi-way Halo Ring Set by letting your mood guide your choice: layer a vibrant resin band for a pop of color, wear the metal Halo solo for minimalist elegance, or stack multiple resin bands for a personalized statement that truly reflects your aura'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/42002809389146', 'title': 'S/M', 'sku': 'FG-0000700', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44100083581018'}}}, {'node': {'id': 'gid://shopify/ProductVariant/42002809421914', 'title': 'M/L', 'sku': 'FG-0000688', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44100083613786'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7481863995482', 'title': 'Ember Ring', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in Rhodium with a shiny finish & custom-made Resin stones.  Our signature hand-sculpted resin captures a luminous, translucent effect. While strong and durable for daily wear, it should be treated with care as it can break if dropped or subjected to impact.\n'}}, {'node': {'key': 'styling_tips', 'value': 'Embrace the radiant warmth of the Ember ring by layering it on multiple fingers or stacking it for a truly personalized and impactful statement.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41970160959578', 'title': 'Blue / S/M', 'sku': 'FG-0000689', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067621797978'}}}, {'node': {'id': 'gid://shopify/ProductVariant/42002804965466', 'title': 'Blue / M/L', 'sku': 'FG-0000697', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44100079157338'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970160992346', 'title': 'Sage Green / S/M', 'sku': 'FG-0000686', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067621830746'}}}, {'node': {'id': 'gid://shopify/ProductVariant/42002804998234', 'title': 'Sage Green / M/L', 'sku': 'FG-0000696', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44100079190106'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970161025114', 'title': 'Orange / S/M', 'sku': 'FG-0000698', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067621863514'}}}, {'node': {'id': 'gid://shopify/ProductVariant/42002805031002', 'title': 'Orange / M/L', 'sku': 'FG-0000695', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44100079222874'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7481864159322', 'title': 'Ember Ring', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in 21k Gold with a matte finish & custom-made Resin stones. Our signature hand-sculpted resin captures a luminous, translucent effect. While strong and durable for daily wear, it should be treated with care as it can break if dropped or subjected to impact.\n'}}, {'node': {'key': 'styling_tips', 'value': 'Embrace the radiant warmth of the Ember ring by layering it on multiple fingers or stacking it for a truly personalized and impactful statement.'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/41970161746010', 'title': 'Lime Green / S/M', 'sku': 'FG-0000689', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067622748250'}}}, {'node': {'id': 'gid://shopify/ProductVariant/42002802835546', 'title': 'Lime Green / M/L', 'sku': 'FG-0000692', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44100077027418'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970161778778', 'title': 'White / S/M', 'sku': 'FG-0000686', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067622781018'}}}, {'node': {'id': 'gid://shopify/ProductVariant/42002802868314', 'title': 'White / M/L', 'sku': 'FG-0000691', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44100077060186'}}}, {'node': {'id': 'gid://shopify/ProductVariant/41970161811546', 'title': 'Pink / S/M', 'sku': 'FG-0000694', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44067622813786'}}}, {'node': {'id': 'gid://shopify/ProductVariant/42002802901082', 'title': 'Pink / M/L', 'sku': 'FG-0000693', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44100077092954'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7496429371482', 'title': 'Solara Necklace', 'metafields': {'edges': [{'node': {'key': 'styling_tips', 'value': 'Adjust the Solara Necklace to your desired length. Wear it tighter to highlight its radiant glow and sculptural pendant, or longer for an elegant drape, allowing its unique chain to reflect your undimmed aura.\n'}}, {'node': {'key': 'materials', 'value': 'Brass plated in 21k Gold with a matte finish & custom-made Resin stones. Our signature hand-sculpted resin captures a luminous, translucent effect. While strong and durable for daily wear, it should be treated with care as it can break if dropped or subjected to impact.\n'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/42000242540634', 'title': 'Lime Green', 'sku': '', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44097502740570'}}}, {'node': {'id': 'gid://shopify/ProductVariant/42000242573402', 'title': 'White', 'sku': '', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44097502773338'}}}, {'node': {'id': 'gid://shopify/ProductVariant/42000242606170', 'title': 'Pink', 'sku': '', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44097502806106'}}}]}}}, {'node': {'id': 'gid://shopify/Product/7506688770138', 'title': 'Flare Earrings', 'metafields': {'edges': [{'node': {'key': 'materials', 'value': 'Brass plated in 21k Gold with a matte finish & custom-made Resin stones'}}, {'node': {'key': 'styling_tips', 'value': 'Let the Flare earring illuminate your look with its unique placement on the ear. Its luminous resin and dynamic spiral are best showcased with swept-back hair or an updo.\n'}}, {'node': {'key': 'sap_sync', 'value': 'synced_prd'}}]}, 'variants': {'edges': [{'node': {'id': 'gid://shopify/ProductVariant/42027748753498', 'title': 'Pink', 'sku': 'FG-0000645', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44125189406810'}}}, {'node': {'id': 'gid://shopify/ProductVariant/42027748786266', 'title': 'Lime Green', 'sku': 'FG-0000644', 'inventoryItem': {'id': 'gid://shopify/InventoryItem/44125189439578'}}}]}}}]}}, 'status': 'success'}
2025-09-28 16:58:56,591 - sync_service - INFO - Found 119 total products, 119 need syncing
2025-09-28 16:58:56,593 - sync_service - INFO - Found 119 active products in store international
2025-09-28 16:58:56,595 - sync_service - INFO - Product gid://shopify/Product/7465063546970 has 3 variants, is_single_variant: False
2025-09-28 16:58:56,597 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:58:56,599 - sync_service - INFO - Processing multi-variant product: Una Ring with 3 variants
2025-09-28 16:58:56,599 - sync_service - WARNING - Variant gid://shopify/ProductVariant/41920068321370 has no SKU, including in unsynced list
2025-09-28 16:58:56,600 - sync_service - WARNING - Variant gid://shopify/ProductVariant/41920068354138 has no SKU, including in unsynced list
2025-09-28 16:58:56,600 - sync_service - WARNING - Variant gid://shopify/ProductVariant/41920068386906 has no SKU, including in unsynced list
2025-09-28 16:58:56,601 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 16:58:57,329 - sync_service - INFO - SAP login successful
2025-09-28 16:58:58,024 - sync_service - INFO - Created product mapping record for product: 7465063546970 in store: international
2025-09-28 16:58:58,025 - sync_service - WARNING - Variant gid://shopify/ProductVariant/41920068321370 has no SKU, skipping
2025-09-28 16:58:58,027 - sync_service - WARNING - Variant gid://shopify/ProductVariant/41920068354138 has no SKU, skipping
2025-09-28 16:58:58,029 - sync_service - WARNING - Variant gid://shopify/ProductVariant/41920068386906 has no SKU, skipping
2025-09-28 16:58:58,030 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465063546970 in store international
2025-09-28 16:58:58,809 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465063546970
2025-09-28 16:58:58,813 - sync_service - INFO - Product gid://shopify/Product/7465063579738 has 1 variants, is_single_variant: True
2025-09-28 16:58:58,814 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:58:58,814 - sync_service - INFO - Processing single variant product: Elara Hoops
2025-09-28 16:58:59,497 - sync_service - INFO - Created variant mapping record for SKU: FG-0000616 in store: international
2025-09-28 16:59:00,174 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000616 in store: international
2025-09-28 16:59:00,866 - sync_service - INFO - Created product mapping record for product: 7465063579738 in store: international
2025-09-28 16:59:00,867 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 16:59:00,875 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465063579738 in store international
2025-09-28 16:59:05,913 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465063579738 (attempt 1/3): 
2025-09-28 16:59:05,914 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 16:59:12,714 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465063579738
2025-09-28 16:59:12,716 - sync_service - INFO - Product gid://shopify/Product/7465063612506 has 1 variants, is_single_variant: True
2025-09-28 16:59:12,718 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:59:12,722 - sync_service - INFO - Processing single variant product: Shareable Gemino Bracelet
2025-09-28 16:59:13,433 - sync_service - INFO - Created variant mapping record for SKU: FG-0000574 in store: international
2025-09-28 16:59:14,115 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000574 in store: international
2025-09-28 16:59:14,756 - sync_service - INFO - Created product mapping record for product: 7465063612506 in store: international
2025-09-28 16:59:14,757 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 16:59:14,759 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465063612506 in store international
2025-09-28 16:59:15,564 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465063612506
2025-09-28 16:59:15,566 - sync_service - INFO - Product gid://shopify/Product/7465063645274 has 1 variants, is_single_variant: True
2025-09-28 16:59:15,573 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:59:15,575 - sync_service - INFO - Processing single variant product: Gemino Earrings
2025-09-28 16:59:16,206 - sync_service - INFO - Created variant mapping record for SKU: FG-0000579 in store: international
2025-09-28 16:59:16,482 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000579 in store: international
2025-09-28 16:59:16,767 - sync_service - INFO - Created product mapping record for product: 7465063645274 in store: international
2025-09-28 16:59:16,769 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 16:59:16,772 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465063645274 in store international
2025-09-28 16:59:17,516 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465063645274
2025-09-28 16:59:17,525 - sync_service - INFO - Product gid://shopify/Product/7465063678042 has 1 variants, is_single_variant: True
2025-09-28 16:59:17,527 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:59:17,527 - sync_service - INFO - Processing single variant product: Liana Necklace
2025-09-28 16:59:17,819 - sync_service - INFO - Created variant mapping record for SKU: FG-0000613 in store: international
2025-09-28 16:59:18,114 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000613 in store: international
2025-09-28 16:59:18,416 - sync_service - INFO - Created product mapping record for product: 7465063678042 in store: international
2025-09-28 16:59:18,422 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 16:59:18,424 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465063678042 in store international
2025-09-28 16:59:19,250 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465063678042
2025-09-28 16:59:19,254 - sync_service - INFO - Product gid://shopify/Product/7465063710810 has 1 variants, is_single_variant: True
2025-09-28 16:59:19,256 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:59:19,258 - sync_service - INFO - Processing single variant product: Elara Earrings
2025-09-28 16:59:19,547 - sync_service - INFO - Created variant mapping record for SKU: FG-0000614 in store: international
2025-09-28 16:59:19,836 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000614 in store: international
2025-09-28 16:59:20,117 - sync_service - INFO - Created product mapping record for product: 7465063710810 in store: international
2025-09-28 16:59:20,118 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 16:59:20,120 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465063710810 in store international
2025-09-28 16:59:25,143 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465063710810 (attempt 1/3): 
2025-09-28 16:59:25,146 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 16:59:27,915 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465063710810
2025-09-28 16:59:27,917 - sync_service - INFO - Product gid://shopify/Product/7465063776346 has 1 variants, is_single_variant: True
2025-09-28 16:59:27,920 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:59:27,921 - sync_service - INFO - Processing single variant product: Gemino Ring
2025-09-28 16:59:28,206 - sync_service - INFO - Created variant mapping record for SKU: FG-0000588 in store: international
2025-09-28 16:59:28,499 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000588 in store: international
2025-09-28 16:59:28,788 - sync_service - INFO - Created product mapping record for product: 7465063776346 in store: international
2025-09-28 16:59:28,790 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 16:59:28,792 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465063776346 in store international
2025-09-28 16:59:29,574 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465063776346
2025-09-28 16:59:29,579 - sync_service - INFO - Product gid://shopify/Product/7465063809114 has 1 variants, is_single_variant: True
2025-09-28 16:59:29,581 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:59:29,582 - sync_service - INFO - Processing single variant product: Gemino Necklace
2025-09-28 16:59:29,897 - sync_service - INFO - Created variant mapping record for SKU: FG-0000586 in store: international
2025-09-28 16:59:30,176 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000586 in store: international
2025-09-28 16:59:30,457 - sync_service - INFO - Created product mapping record for product: 7465063809114 in store: international
2025-09-28 16:59:30,459 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 16:59:30,461 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465063809114 in store international
2025-09-28 16:59:31,200 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465063809114
2025-09-28 16:59:31,204 - sync_service - INFO - Product gid://shopify/Product/7465063841882 has 1 variants, is_single_variant: True
2025-09-28 16:59:31,206 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:59:31,210 - sync_service - INFO - Processing single variant product: Mini Gemino Earrings
2025-09-28 16:59:31,498 - sync_service - INFO - Created variant mapping record for SKU: FG-0000615 in store: international
2025-09-28 16:59:31,779 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000615 in store: international
2025-09-28 16:59:32,057 - sync_service - INFO - Created product mapping record for product: 7465063841882 in store: international
2025-09-28 16:59:32,059 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 16:59:32,059 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465063841882 in store international
2025-09-28 16:59:37,092 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465063841882 (attempt 1/3): 
2025-09-28 16:59:37,095 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 16:59:39,919 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465063841882
2025-09-28 16:59:39,924 - sync_service - INFO - Product gid://shopify/Product/7465063907418 has 1 variants, is_single_variant: True
2025-09-28 16:59:39,925 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:59:39,926 - sync_service - INFO - Processing single variant product: Una Mix
2025-09-28 16:59:40,220 - sync_service - INFO - Created variant mapping record for SKU: FG-0000584 in store: international
2025-09-28 16:59:40,526 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000584 in store: international
2025-09-28 16:59:40,822 - sync_service - INFO - Created product mapping record for product: 7465063907418 in store: international
2025-09-28 16:59:40,825 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 16:59:40,827 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465063907418 in store international
2025-09-28 16:59:41,909 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465063907418
2025-09-28 16:59:41,912 - sync_service - INFO - Product gid://shopify/Product/7465063972954 has 3 variants, is_single_variant: False
2025-09-28 16:59:41,914 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:59:41,914 - sync_service - INFO - Processing multi-variant product: Lupa Earrings with 3 variants
2025-09-28 16:59:42,893 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000599' and U_Shopify_Store eq 'international' - success
2025-09-28 16:59:43,874 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000600' and U_Shopify_Store eq 'international' - success
2025-09-28 16:59:44,498 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000601' and U_Shopify_Store eq 'international' - success
2025-09-28 16:59:44,499 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 16:59:44,841 - sync_service - INFO - Created product mapping record for product: 7465063972954 in store: international
2025-09-28 16:59:45,132 - sync_service - INFO - Created variant mapping record for SKU: FG-0000599 in store: international
2025-09-28 16:59:45,419 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000599 in store: international
2025-09-28 16:59:45,423 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 16:59:45,730 - sync_service - INFO - Created variant mapping record for SKU: FG-0000600 in store: international
2025-09-28 16:59:46,009 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000600 in store: international
2025-09-28 16:59:46,013 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 16:59:46,297 - sync_service - INFO - Created variant mapping record for SKU: FG-0000601 in store: international
2025-09-28 16:59:46,589 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000601 in store: international
2025-09-28 16:59:46,591 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 16:59:46,592 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465063972954 in store international
2025-09-28 16:59:50,976 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465063972954
2025-09-28 16:59:50,980 - sync_service - INFO - Product gid://shopify/Product/7465064038490 has 3 variants, is_single_variant: False
2025-09-28 16:59:50,982 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:59:50,983 - sync_service - INFO - Processing multi-variant product: Mini Lupa Earrings with 3 variants
2025-09-28 16:59:51,863 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000606' and U_Shopify_Store eq 'international' - success
2025-09-28 16:59:53,226 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000607' and U_Shopify_Store eq 'international' - success
2025-09-28 16:59:54,443 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000608' and U_Shopify_Store eq 'international' - success
2025-09-28 16:59:54,446 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 16:59:54,893 - sync_service - INFO - Created product mapping record for product: 7465064038490 in store: international
2025-09-28 16:59:55,347 - sync_service - INFO - Created variant mapping record for SKU: FG-0000606 in store: international
2025-09-28 16:59:55,794 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000606 in store: international
2025-09-28 16:59:55,796 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 16:59:56,261 - sync_service - INFO - Created variant mapping record for SKU: FG-0000607 in store: international
2025-09-28 16:59:56,705 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000607 in store: international
2025-09-28 16:59:56,709 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 16:59:57,149 - sync_service - INFO - Created variant mapping record for SKU: FG-0000608 in store: international
2025-09-28 16:59:57,613 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000608 in store: international
2025-09-28 16:59:57,614 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 16:59:57,615 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465064038490 in store international
2025-09-28 16:59:58,608 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465064038490
2025-09-28 16:59:58,610 - sync_service - INFO - Product gid://shopify/Product/7465064071258 has 3 variants, is_single_variant: False
2025-09-28 16:59:58,611 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 16:59:58,613 - sync_service - INFO - Processing multi-variant product: Amori Earrings with 3 variants
2025-09-28 16:59:59,511 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000596' and U_Shopify_Store eq 'international' - success
2025-09-28 17:00:01,099 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000597' and U_Shopify_Store eq 'international' - success
2025-09-28 17:00:02,227 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000598' and U_Shopify_Store eq 'international' - success
2025-09-28 17:00:02,230 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:00:02,510 - sync_service - INFO - Created product mapping record for product: 7465064071258 in store: international
2025-09-28 17:00:02,793 - sync_service - INFO - Created variant mapping record for SKU: FG-0000596 in store: international
2025-09-28 17:00:03,082 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000596 in store: international
2025-09-28 17:00:03,083 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:00:03,364 - sync_service - INFO - Created variant mapping record for SKU: FG-0000597 in store: international
2025-09-28 17:00:03,664 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000597 in store: international
2025-09-28 17:00:03,664 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:00:03,961 - sync_service - INFO - Created variant mapping record for SKU: FG-0000598 in store: international
2025-09-28 17:00:04,275 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000598 in store: international
2025-09-28 17:00:04,283 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:00:04,285 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465064071258 in store international
2025-09-28 17:00:09,446 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465064071258
2025-09-28 17:00:09,447 - sync_service - INFO - Product gid://shopify/Product/7465064136794 has 1 variants, is_single_variant: True
2025-09-28 17:00:09,448 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:00:09,448 - sync_service - INFO - Processing single variant product: Una Earrings
2025-09-28 17:00:09,739 - sync_service - INFO - Created variant mapping record for SKU: FG-0000594 in store: international
2025-09-28 17:00:10,026 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000594 in store: international
2025-09-28 17:00:10,310 - sync_service - INFO - Created product mapping record for product: 7465064136794 in store: international
2025-09-28 17:00:10,312 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:00:10,314 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465064136794 in store international
2025-09-28 17:00:11,235 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465064136794
2025-09-28 17:00:11,253 - sync_service - INFO - Product gid://shopify/Product/7465064169562 has 1 variants, is_single_variant: True
2025-09-28 17:00:11,256 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:00:11,258 - sync_service - INFO - Processing single variant product: Interchangeable Dos Amores Necklace
2025-09-28 17:00:11,563 - sync_service - INFO - Created variant mapping record for SKU: FG-000605 in store: international
2025-09-28 17:00:11,863 - sync_service - INFO - Created inventory mapping record for SKU: FG-000605 in store: international
2025-09-28 17:00:12,155 - sync_service - INFO - Created product mapping record for product: 7465064169562 in store: international
2025-09-28 17:00:12,158 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:00:12,159 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465064169562 in store international
2025-09-28 17:00:12,977 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465064169562
2025-09-28 17:00:12,981 - sync_service - INFO - Product gid://shopify/Product/7465064267866 has 1 variants, is_single_variant: True
2025-09-28 17:00:12,982 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:00:12,983 - sync_service - INFO - Processing single variant product: Interchangeable Dos Amores Necklace
2025-09-28 17:00:13,275 - sync_service - INFO - Created variant mapping record for SKU: FG-0000585 in store: international
2025-09-28 17:00:13,568 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000585 in store: international
2025-09-28 17:00:13,875 - sync_service - INFO - Created product mapping record for product: 7465064267866 in store: international
2025-09-28 17:00:13,876 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:00:13,878 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465064267866 in store international
2025-09-28 17:00:18,911 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465064267866 (attempt 1/3): 
2025-09-28 17:00:18,913 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:00:22,392 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465064267866
2025-09-28 17:00:22,396 - sync_service - INFO - Product gid://shopify/Product/7465064300634 has 1 variants, is_single_variant: True
2025-09-28 17:00:22,398 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:00:22,399 - sync_service - INFO - Processing single variant product: Elea Ear Cuff
2025-09-28 17:00:22,711 - sync_service - INFO - Created variant mapping record for SKU: FG-0000251 in store: international
2025-09-28 17:00:23,012 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000251 in store: international
2025-09-28 17:00:23,320 - sync_service - INFO - Created product mapping record for product: 7465064300634 in store: international
2025-09-28 17:00:23,322 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:00:23,324 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465064300634 in store international
2025-09-28 17:00:24,270 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465064300634
2025-09-28 17:00:24,274 - sync_service - INFO - Product gid://shopify/Product/7465064333402 has 1 variants, is_single_variant: True
2025-09-28 17:00:24,275 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:00:24,276 - sync_service - INFO - Processing single variant product: Elea Ear Cuff
2025-09-28 17:00:24,577 - sync_service - INFO - Created variant mapping record for SKU: FG-0000250 in store: international
2025-09-28 17:00:24,862 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000250 in store: international
2025-09-28 17:00:25,176 - sync_service - INFO - Created product mapping record for product: 7465064333402 in store: international
2025-09-28 17:00:25,177 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:00:25,179 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465064333402 in store international
2025-09-28 17:00:26,376 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465064333402
2025-09-28 17:00:26,379 - sync_service - INFO - Product gid://shopify/Product/7465064366170 has 1 variants, is_single_variant: True
2025-09-28 17:00:26,381 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:00:26,382 - sync_service - INFO - Processing single variant product: Pacaya Earrings
2025-09-28 17:00:26,669 - sync_service - INFO - Created variant mapping record for SKU: FG-0000096 in store: international
2025-09-28 17:00:26,959 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000096 in store: international
2025-09-28 17:00:27,260 - sync_service - INFO - Created product mapping record for product: 7465064366170 in store: international
2025-09-28 17:00:27,262 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:00:27,264 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465064366170 in store international
2025-09-28 17:00:32,290 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465064366170 (attempt 1/3): 
2025-09-28 17:00:32,293 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:00:35,194 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465064366170
2025-09-28 17:00:35,197 - sync_service - INFO - Product gid://shopify/Product/7465064464474 has 3 variants, is_single_variant: False
2025-09-28 17:00:35,198 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:00:35,200 - sync_service - INFO - Processing multi-variant product: Una Ring with 3 variants
2025-09-28 17:00:35,763 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000591' and U_Shopify_Store eq 'international' - success
2025-09-28 17:00:36,360 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000590' and U_Shopify_Store eq 'international' - success
2025-09-28 17:00:37,735 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000589' and U_Shopify_Store eq 'international' - success
2025-09-28 17:00:37,739 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:00:38,078 - sync_service - INFO - Created product mapping record for product: 7465064464474 in store: international
2025-09-28 17:00:38,366 - sync_service - INFO - Created variant mapping record for SKU: FG-0000591 in store: international
2025-09-28 17:00:38,649 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000591 in store: international
2025-09-28 17:00:38,650 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:00:38,931 - sync_service - INFO - Created variant mapping record for SKU: FG-0000590 in store: international
2025-09-28 17:00:39,210 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000590 in store: international
2025-09-28 17:00:39,212 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:00:39,498 - sync_service - INFO - Created variant mapping record for SKU: FG-0000589 in store: international
2025-09-28 17:00:39,779 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000589 in store: international
2025-09-28 17:00:39,780 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:00:39,781 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465064464474 in store international
2025-09-28 17:00:44,805 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465064464474 (attempt 1/3): 
2025-09-28 17:00:44,806 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:00:52,065 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465064464474
2025-09-28 17:00:52,068 - sync_service - INFO - Product gid://shopify/Product/7465064497242 has 3 variants, is_single_variant: False
2025-09-28 17:00:52,071 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:00:52,072 - sync_service - INFO - Processing multi-variant product: Amori Earrings with 3 variants
2025-09-28 17:00:52,648 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000576' and U_Shopify_Store eq 'international' - success
2025-09-28 17:00:53,267 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000578' and U_Shopify_Store eq 'international' - success
2025-09-28 17:00:53,844 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000577' and U_Shopify_Store eq 'international' - success
2025-09-28 17:00:53,847 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:00:54,132 - sync_service - INFO - Created product mapping record for product: 7465064497242 in store: international
2025-09-28 17:00:54,421 - sync_service - INFO - Created variant mapping record for SKU: FG-0000576 in store: international
2025-09-28 17:00:54,710 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000576 in store: international
2025-09-28 17:00:54,713 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:00:54,998 - sync_service - INFO - Created variant mapping record for SKU: FG-0000578 in store: international
2025-09-28 17:00:55,278 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000578 in store: international
2025-09-28 17:00:55,280 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:00:55,552 - sync_service - INFO - Created variant mapping record for SKU: FG-0000577 in store: international
2025-09-28 17:00:55,839 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000577 in store: international
2025-09-28 17:00:55,841 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:00:55,842 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465064497242 in store international
2025-09-28 17:00:56,630 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465064497242
2025-09-28 17:00:56,632 - sync_service - INFO - Product gid://shopify/Product/7465064530010 has 1 variants, is_single_variant: True
2025-09-28 17:00:56,634 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:00:56,636 - sync_service - INFO - Processing single variant product: Juno Necklace
2025-09-28 17:00:56,920 - sync_service - INFO - Created variant mapping record for SKU: FG-0000593 in store: international
2025-09-28 17:00:57,218 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000593 in store: international
2025-09-28 17:00:57,511 - sync_service - INFO - Created product mapping record for product: 7465064530010 in store: international
2025-09-28 17:00:57,512 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:00:57,514 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465064530010 in store international
2025-09-28 17:00:58,325 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465064530010
2025-09-28 17:00:58,329 - sync_service - INFO - Product gid://shopify/Product/7465064595546 has 1 variants, is_single_variant: True
2025-09-28 17:00:58,330 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:00:58,331 - sync_service - INFO - Processing single variant product: Janus Cuff
2025-09-28 17:00:58,627 - sync_service - INFO - Created variant mapping record for SKU: FG-0000595 in store: international
2025-09-28 17:00:58,914 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000595 in store: international
2025-09-28 17:00:59,275 - sync_service - INFO - Created product mapping record for product: 7465064595546 in store: international
2025-09-28 17:00:59,278 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:00:59,280 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465064595546 in store international
2025-09-28 17:01:00,148 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465064595546
2025-09-28 17:01:00,148 - sync_service - INFO - Product gid://shopify/Product/7465064628314 has 1 variants, is_single_variant: True
2025-09-28 17:01:00,149 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:01:00,150 - sync_service - INFO - Processing single variant product: Janus Cuff
2025-09-28 17:01:00,476 - sync_service - INFO - Created variant mapping record for SKU: FG-0000575 in store: international
2025-09-28 17:01:00,765 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000575 in store: international
2025-09-28 17:01:01,054 - sync_service - INFO - Created product mapping record for product: 7465064628314 in store: international
2025-09-28 17:01:01,058 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:01,059 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465064628314 in store international
2025-09-28 17:01:06,091 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465064628314 (attempt 1/3): 
2025-09-28 17:01:06,093 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:01:08,957 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465064628314
2025-09-28 17:01:08,961 - sync_service - INFO - Product gid://shopify/Product/7465064661082 has 1 variants, is_single_variant: True
2025-09-28 17:01:08,963 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:01:08,963 - sync_service - INFO - Processing single variant product: Juno Necklace
2025-09-28 17:01:09,279 - sync_service - INFO - Created variant mapping record for SKU: FG-0000587 in store: international
2025-09-28 17:01:09,576 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000587 in store: international
2025-09-28 17:01:09,861 - sync_service - INFO - Created product mapping record for product: 7465064661082 in store: international
2025-09-28 17:01:09,863 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:09,865 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465064661082 in store international
2025-09-28 17:01:10,794 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465064661082
2025-09-28 17:01:10,797 - sync_service - INFO - Product gid://shopify/Product/7465064726618 has 1 variants, is_single_variant: True
2025-09-28 17:01:10,798 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:01:10,799 - sync_service - INFO - Processing single variant product: Una Earrings
2025-09-28 17:01:11,083 - sync_service - INFO - Created variant mapping record for SKU: FG-0000583 in store: international
2025-09-28 17:01:11,376 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000583 in store: international
2025-09-28 17:01:11,666 - sync_service - INFO - Created product mapping record for product: 7465064726618 in store: international
2025-09-28 17:01:11,667 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:11,668 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465064726618 in store international
2025-09-28 17:01:12,430 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465064726618
2025-09-28 17:01:12,432 - sync_service - INFO - Product gid://shopify/Product/7465064759386 has 3 variants, is_single_variant: False
2025-09-28 17:01:12,433 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:01:12,434 - sync_service - INFO - Processing multi-variant product: Mini Lupa Earrings with 3 variants
2025-09-28 17:01:13,027 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000611' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:13,626 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000610' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:14,199 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000609' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:14,201 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:01:14,481 - sync_service - INFO - Created product mapping record for product: 7465064759386 in store: international
2025-09-28 17:01:14,759 - sync_service - INFO - Created variant mapping record for SKU: FG-0000611 in store: international
2025-09-28 17:01:15,041 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000611 in store: international
2025-09-28 17:01:15,043 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:15,335 - sync_service - INFO - Created variant mapping record for SKU: FG-0000610 in store: international
2025-09-28 17:01:15,706 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000610 in store: international
2025-09-28 17:01:15,708 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:15,994 - sync_service - INFO - Created variant mapping record for SKU: FG-0000609 in store: international
2025-09-28 17:01:16,283 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000609 in store: international
2025-09-28 17:01:16,284 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:16,287 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465064759386 in store international
2025-09-28 17:01:17,135 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465064759386
2025-09-28 17:01:17,139 - sync_service - INFO - Product gid://shopify/Product/7465064792154 has 3 variants, is_single_variant: False
2025-09-28 17:01:17,140 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:01:17,141 - sync_service - INFO - Processing multi-variant product: Lupa Earrings with 3 variants
2025-09-28 17:01:17,697 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000582' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:18,251 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000581' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:18,814 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000580' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:18,816 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:01:19,099 - sync_service - INFO - Created product mapping record for product: 7465064792154 in store: international
2025-09-28 17:01:19,388 - sync_service - INFO - Created variant mapping record for SKU: FG-0000582 in store: international
2025-09-28 17:01:19,695 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000582 in store: international
2025-09-28 17:01:19,697 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:19,985 - sync_service - INFO - Created variant mapping record for SKU: FG-0000581 in store: international
2025-09-28 17:01:20,278 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000581 in store: international
2025-09-28 17:01:20,279 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:20,569 - sync_service - INFO - Created variant mapping record for SKU: FG-0000580 in store: international
2025-09-28 17:01:20,859 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000580 in store: international
2025-09-28 17:01:20,862 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:20,864 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465064792154 in store international
2025-09-28 17:01:21,663 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465064792154
2025-09-28 17:01:21,665 - sync_service - INFO - Product gid://shopify/Product/7465064857690 has 5 variants, is_single_variant: False
2025-09-28 17:01:21,665 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:01:21,666 - sync_service - INFO - Processing multi-variant product: Flow Earrings with 5 variants
2025-09-28 17:01:22,231 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000522' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:22,782 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000523' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:23,316 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000524' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:23,911 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000525' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:24,498 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000526' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:24,499 - sync_service - INFO - Processing 5 unsynced variants out of 5 total variants
2025-09-28 17:01:24,782 - sync_service - INFO - Created product mapping record for product: 7465064857690 in store: international
2025-09-28 17:01:25,076 - sync_service - INFO - Created variant mapping record for SKU: FG-0000522 in store: international
2025-09-28 17:01:25,363 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000522 in store: international
2025-09-28 17:01:25,364 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:25,655 - sync_service - INFO - Created variant mapping record for SKU: FG-0000523 in store: international
2025-09-28 17:01:25,965 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000523 in store: international
2025-09-28 17:01:25,966 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:26,259 - sync_service - INFO - Created variant mapping record for SKU: FG-0000524 in store: international
2025-09-28 17:01:26,930 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000524 in store: international
2025-09-28 17:01:26,932 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:27,286 - sync_service - INFO - Created variant mapping record for SKU: FG-0000525 in store: international
2025-09-28 17:01:27,574 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000525 in store: international
2025-09-28 17:01:27,587 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:27,875 - sync_service - INFO - Created variant mapping record for SKU: FG-0000526 in store: international
2025-09-28 17:01:28,188 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000526 in store: international
2025-09-28 17:01:28,191 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:28,193 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465064857690 in store international
2025-09-28 17:01:32,695 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465064857690
2025-09-28 17:01:32,700 - sync_service - INFO - Product gid://shopify/Product/7465064923226 has 3 variants, is_single_variant: False
2025-09-28 17:01:32,705 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:01:32,707 - sync_service - INFO - Processing multi-variant product: Waterwall Earrings with 3 variants
2025-09-28 17:01:33,269 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000536' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:33,855 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000537' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:34,422 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000538' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:34,428 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:01:34,723 - sync_service - INFO - Created product mapping record for product: 7465064923226 in store: international
2025-09-28 17:01:35,024 - sync_service - INFO - Created variant mapping record for SKU: FG-0000536 in store: international
2025-09-28 17:01:35,322 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000536 in store: international
2025-09-28 17:01:35,324 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:35,627 - sync_service - INFO - Created variant mapping record for SKU: FG-0000537 in store: international
2025-09-28 17:01:35,924 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000537 in store: international
2025-09-28 17:01:35,927 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:36,216 - sync_service - INFO - Created variant mapping record for SKU: FG-0000538 in store: international
2025-09-28 17:01:36,651 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000538 in store: international
2025-09-28 17:01:36,654 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:36,655 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465064923226 in store international
2025-09-28 17:01:37,515 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465064923226
2025-09-28 17:01:37,517 - sync_service - INFO - Product gid://shopify/Product/7465064955994 has 4 variants, is_single_variant: False
2025-09-28 17:01:37,523 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:01:37,526 - sync_service - INFO - Processing multi-variant product: Gravel Ring with 4 variants
2025-09-28 17:01:38,109 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000545' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:38,701 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000546' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:39,259 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000547' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:39,836 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000548' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:39,853 - sync_service - INFO - Processing 4 unsynced variants out of 4 total variants
2025-09-28 17:01:40,150 - sync_service - INFO - Created product mapping record for product: 7465064955994 in store: international
2025-09-28 17:01:40,446 - sync_service - INFO - Created variant mapping record for SKU: FG-0000545 in store: international
2025-09-28 17:01:40,740 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000545 in store: international
2025-09-28 17:01:40,742 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:41,034 - sync_service - INFO - Created variant mapping record for SKU: FG-0000546 in store: international
2025-09-28 17:01:41,334 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000546 in store: international
2025-09-28 17:01:41,336 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:41,631 - sync_service - INFO - Created variant mapping record for SKU: FG-0000547 in store: international
2025-09-28 17:01:41,935 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000547 in store: international
2025-09-28 17:01:41,937 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:42,233 - sync_service - INFO - Created variant mapping record for SKU: FG-0000548 in store: international
2025-09-28 17:01:42,530 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000548 in store: international
2025-09-28 17:01:42,531 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:42,568 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465064955994 in store international
2025-09-28 17:01:47,608 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465064955994 (attempt 1/3): 
2025-09-28 17:01:47,612 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:01:50,499 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465064955994
2025-09-28 17:01:50,502 - sync_service - INFO - Product gid://shopify/Product/7465065021530 has 5 variants, is_single_variant: False
2025-09-28 17:01:50,506 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:01:50,507 - sync_service - INFO - Processing multi-variant product: Interchangeable Gravel Earrings with 5 variants
2025-09-28 17:01:51,073 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000529' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:51,638 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000530' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:52,204 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000531' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:52,770 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000527' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:53,362 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000528' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:53,366 - sync_service - INFO - Processing 5 unsynced variants out of 5 total variants
2025-09-28 17:01:53,681 - sync_service - INFO - Created product mapping record for product: 7465065021530 in store: international
2025-09-28 17:01:54,012 - sync_service - INFO - Created variant mapping record for SKU: FG-0000529 in store: international
2025-09-28 17:01:54,310 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000529 in store: international
2025-09-28 17:01:54,312 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:54,682 - sync_service - INFO - Created variant mapping record for SKU: FG-0000530 in store: international
2025-09-28 17:01:54,972 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000530 in store: international
2025-09-28 17:01:54,976 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:55,264 - sync_service - INFO - Created variant mapping record for SKU: FG-0000531 in store: international
2025-09-28 17:01:55,558 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000531 in store: international
2025-09-28 17:01:55,559 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:55,864 - sync_service - INFO - Created variant mapping record for SKU: FG-0000527 in store: international
2025-09-28 17:01:56,152 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000527 in store: international
2025-09-28 17:01:56,155 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:56,450 - sync_service - INFO - Created variant mapping record for SKU: FG-0000528 in store: international
2025-09-28 17:01:56,751 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000528 in store: international
2025-09-28 17:01:56,755 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:01:56,757 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465065021530 in store international
2025-09-28 17:01:57,670 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465065021530
2025-09-28 17:01:57,671 - sync_service - INFO - Product gid://shopify/Product/7465065087066 has 3 variants, is_single_variant: False
2025-09-28 17:01:57,675 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:01:57,676 - sync_service - INFO - Processing multi-variant product: Riverstone Bracelet with 3 variants
2025-09-28 17:01:58,240 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000510' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:58,833 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000511' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:59,411 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000512' and U_Shopify_Store eq 'international' - success
2025-09-28 17:01:59,415 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:01:59,695 - sync_service - INFO - Created product mapping record for product: 7465065087066 in store: international
2025-09-28 17:01:59,980 - sync_service - INFO - Created variant mapping record for SKU: FG-0000510 in store: international
2025-09-28 17:02:00,267 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000510 in store: international
2025-09-28 17:02:00,269 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:00,584 - sync_service - INFO - Created variant mapping record for SKU: FG-0000511 in store: international
2025-09-28 17:02:00,899 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000511 in store: international
2025-09-28 17:02:00,901 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:01,193 - sync_service - INFO - Created variant mapping record for SKU: FG-0000512 in store: international
2025-09-28 17:02:01,480 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000512 in store: international
2025-09-28 17:02:01,483 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:01,485 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465065087066 in store international
2025-09-28 17:02:02,366 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465065087066
2025-09-28 17:02:02,368 - sync_service - INFO - Product gid://shopify/Product/7465065119834 has 5 variants, is_single_variant: False
2025-09-28 17:02:02,371 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:02:02,371 - sync_service - INFO - Processing multi-variant product: Interchangeable Erosion Earrings with 5 variants
2025-09-28 17:02:02,934 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000517' and U_Shopify_Store eq 'international' - success
2025-09-28 17:02:03,507 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000518' and U_Shopify_Store eq 'international' - success
2025-09-28 17:02:04,074 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000519' and U_Shopify_Store eq 'international' - success
2025-09-28 17:02:04,624 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000520' and U_Shopify_Store eq 'international' - success
2025-09-28 17:02:05,191 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000521' and U_Shopify_Store eq 'international' - success
2025-09-28 17:02:05,196 - sync_service - INFO - Processing 5 unsynced variants out of 5 total variants
2025-09-28 17:02:05,492 - sync_service - INFO - Created product mapping record for product: 7465065119834 in store: international
2025-09-28 17:02:05,786 - sync_service - INFO - Created variant mapping record for SKU: FG-0000517 in store: international
2025-09-28 17:02:06,465 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000517 in store: international
2025-09-28 17:02:06,467 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:06,803 - sync_service - INFO - Created variant mapping record for SKU: FG-0000518 in store: international
2025-09-28 17:02:07,092 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000518 in store: international
2025-09-28 17:02:07,113 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:07,403 - sync_service - INFO - Created variant mapping record for SKU: FG-0000519 in store: international
2025-09-28 17:02:07,700 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000519 in store: international
2025-09-28 17:02:07,701 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:07,991 - sync_service - INFO - Created variant mapping record for SKU: FG-0000520 in store: international
2025-09-28 17:02:08,286 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000520 in store: international
2025-09-28 17:02:08,289 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:08,591 - sync_service - INFO - Created variant mapping record for SKU: FG-0000521 in store: international
2025-09-28 17:02:08,885 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000521 in store: international
2025-09-28 17:02:08,887 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:08,888 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465065119834 in store international
2025-09-28 17:02:13,445 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465065119834
2025-09-28 17:02:13,450 - sync_service - INFO - Product gid://shopify/Product/7465065185370 has 3 variants, is_single_variant: False
2025-09-28 17:02:13,451 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:02:13,452 - sync_service - INFO - Processing multi-variant product: Snowdrop Earrings with 3 variants
2025-09-28 17:02:14,011 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000487' and U_Shopify_Store eq 'international' - success
2025-09-28 17:02:14,581 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000486' and U_Shopify_Store eq 'international' - success
2025-09-28 17:02:15,140 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000485' and U_Shopify_Store eq 'international' - success
2025-09-28 17:02:15,146 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:02:15,465 - sync_service - INFO - Created product mapping record for product: 7465065185370 in store: international
2025-09-28 17:02:15,755 - sync_service - INFO - Created variant mapping record for SKU: FG-0000487 in store: international
2025-09-28 17:02:16,063 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000487 in store: international
2025-09-28 17:02:16,064 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:16,382 - sync_service - INFO - Created variant mapping record for SKU: FG-0000486 in store: international
2025-09-28 17:02:16,667 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000486 in store: international
2025-09-28 17:02:16,669 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:17,042 - sync_service - INFO - Created variant mapping record for SKU: FG-0000485 in store: international
2025-09-28 17:02:17,349 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000485 in store: international
2025-09-28 17:02:17,350 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:17,353 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465065185370 in store international
2025-09-28 17:02:18,125 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465065185370
2025-09-28 17:02:18,129 - sync_service - INFO - Product gid://shopify/Product/7465065316442 has 4 variants, is_single_variant: False
2025-09-28 17:02:18,130 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:02:18,131 - sync_service - INFO - Processing multi-variant product: Frost Necklace with 4 variants
2025-09-28 17:02:18,759 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000491' and U_Shopify_Store eq 'international' - success
2025-09-28 17:02:19,312 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000489' and U_Shopify_Store eq 'international' - success
2025-09-28 17:02:19,881 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000490' and U_Shopify_Store eq 'international' - success
2025-09-28 17:02:20,445 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000488' and U_Shopify_Store eq 'international' - success
2025-09-28 17:02:20,447 - sync_service - INFO - Processing 4 unsynced variants out of 4 total variants
2025-09-28 17:02:20,731 - sync_service - INFO - Created product mapping record for product: 7465065316442 in store: international
2025-09-28 17:02:21,031 - sync_service - INFO - Created variant mapping record for SKU: FG-0000491 in store: international
2025-09-28 17:02:21,327 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000491 in store: international
2025-09-28 17:02:21,329 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:21,612 - sync_service - INFO - Created variant mapping record for SKU: FG-0000489 in store: international
2025-09-28 17:02:21,931 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000489 in store: international
2025-09-28 17:02:21,932 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:22,221 - sync_service - INFO - Created variant mapping record for SKU: FG-0000490 in store: international
2025-09-28 17:02:22,515 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000490 in store: international
2025-09-28 17:02:22,517 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:22,807 - sync_service - INFO - Created variant mapping record for SKU: FG-0000488 in store: international
2025-09-28 17:02:23,094 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000488 in store: international
2025-09-28 17:02:23,096 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:23,097 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465065316442 in store international
2025-09-28 17:02:28,130 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465065316442 (attempt 1/3): 
2025-09-28 17:02:28,130 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:02:30,999 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465065316442
2025-09-28 17:02:31,001 - sync_service - INFO - Product gid://shopify/Product/7465065414746 has 4 variants, is_single_variant: False
2025-09-28 17:02:31,008 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:02:31,009 - sync_service - INFO - Processing multi-variant product: Frost Ring with 4 variants
2025-09-28 17:02:31,589 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000466' and U_Shopify_Store eq 'international' - success
2025-09-28 17:02:32,161 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000467' and U_Shopify_Store eq 'international' - success
2025-09-28 17:02:32,798 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000465' and U_Shopify_Store eq 'international' - success
2025-09-28 17:02:33,363 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000468' and U_Shopify_Store eq 'international' - success
2025-09-28 17:02:33,365 - sync_service - INFO - Processing 4 unsynced variants out of 4 total variants
2025-09-28 17:02:33,643 - sync_service - INFO - Created product mapping record for product: 7465065414746 in store: international
2025-09-28 17:02:33,927 - sync_service - INFO - Created variant mapping record for SKU: FG-0000466 in store: international
2025-09-28 17:02:34,208 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000466 in store: international
2025-09-28 17:02:34,210 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:34,496 - sync_service - INFO - Created variant mapping record for SKU: FG-0000467 in store: international
2025-09-28 17:02:34,791 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000467 in store: international
2025-09-28 17:02:34,792 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:35,080 - sync_service - INFO - Created variant mapping record for SKU: FG-0000465 in store: international
2025-09-28 17:02:35,381 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000465 in store: international
2025-09-28 17:02:35,382 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:35,712 - sync_service - INFO - Created variant mapping record for SKU: FG-0000468 in store: international
2025-09-28 17:02:36,050 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000468 in store: international
2025-09-28 17:02:36,052 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:36,057 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465065414746 in store international
2025-09-28 17:02:36,853 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465065414746
2025-09-28 17:02:36,858 - sync_service - INFO - Product gid://shopify/Product/7465065480282 has 4 variants, is_single_variant: False
2025-09-28 17:02:36,860 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:02:36,862 - sync_service - INFO - Processing multi-variant product: Plunge Earrings with 4 variants
2025-09-28 17:02:37,429 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000464' and U_Shopify_Store eq 'international' - success
2025-09-28 17:02:37,966 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000462' and U_Shopify_Store eq 'international' - success
2025-09-28 17:02:38,529 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000461' and U_Shopify_Store eq 'international' - success
2025-09-28 17:02:39,092 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000463' and U_Shopify_Store eq 'international' - success
2025-09-28 17:02:39,093 - sync_service - INFO - Processing 4 unsynced variants out of 4 total variants
2025-09-28 17:02:39,373 - sync_service - INFO - Created product mapping record for product: 7465065480282 in store: international
2025-09-28 17:02:39,661 - sync_service - INFO - Created variant mapping record for SKU: FG-0000464 in store: international
2025-09-28 17:02:39,948 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000464 in store: international
2025-09-28 17:02:39,949 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:40,233 - sync_service - INFO - Created variant mapping record for SKU: FG-0000462 in store: international
2025-09-28 17:02:40,531 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000462 in store: international
2025-09-28 17:02:40,532 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:40,825 - sync_service - INFO - Created variant mapping record for SKU: FG-0000461 in store: international
2025-09-28 17:02:41,110 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000461 in store: international
2025-09-28 17:02:41,112 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:41,399 - sync_service - INFO - Created variant mapping record for SKU: FG-0000463 in store: international
2025-09-28 17:02:41,683 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000463 in store: international
2025-09-28 17:02:41,685 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:41,689 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465065480282 in store international
2025-09-28 17:02:46,722 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465065480282 (attempt 1/3): 
2025-09-28 17:02:46,725 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:02:49,465 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465065480282
2025-09-28 17:02:49,467 - sync_service - INFO - Product gid://shopify/Product/7465065545818 has 4 variants, is_single_variant: False
2025-09-28 17:02:49,467 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:02:49,468 - sync_service - INFO - Processing multi-variant product: Droplet Earrings with 4 variants
2025-09-28 17:02:50,046 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000458' and U_Shopify_Store eq 'international' - success
2025-09-28 17:02:50,609 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000457' and U_Shopify_Store eq 'international' - success
2025-09-28 17:02:51,479 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000460' and U_Shopify_Store eq 'international' - success
2025-09-28 17:02:52,163 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000459' and U_Shopify_Store eq 'international' - success
2025-09-28 17:02:52,167 - sync_service - INFO - Processing 4 unsynced variants out of 4 total variants
2025-09-28 17:02:52,449 - sync_service - INFO - Created product mapping record for product: 7465065545818 in store: international
2025-09-28 17:02:52,733 - sync_service - INFO - Created variant mapping record for SKU: FG-0000458 in store: international
2025-09-28 17:02:53,027 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000458 in store: international
2025-09-28 17:02:53,029 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:53,324 - sync_service - INFO - Created variant mapping record for SKU: FG-0000457 in store: international
2025-09-28 17:02:53,609 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000457 in store: international
2025-09-28 17:02:53,613 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:53,897 - sync_service - INFO - Created variant mapping record for SKU: FG-0000460 in store: international
2025-09-28 17:02:54,181 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000460 in store: international
2025-09-28 17:02:54,182 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:54,467 - sync_service - INFO - Created variant mapping record for SKU: FG-0000459 in store: international
2025-09-28 17:02:54,757 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000459 in store: international
2025-09-28 17:02:54,758 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:54,760 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465065545818 in store international
2025-09-28 17:02:55,682 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465065545818
2025-09-28 17:02:55,684 - sync_service - INFO - Product gid://shopify/Product/7465065578586 has 1 variants, is_single_variant: True
2025-09-28 17:02:55,685 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:02:55,686 - sync_service - INFO - Processing single variant product: Mini Pebble Hoops Mix
2025-09-28 17:02:55,973 - sync_service - INFO - Created variant mapping record for SKU: FG-0000570 in store: international
2025-09-28 17:02:56,270 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000570 in store: international
2025-09-28 17:02:56,558 - sync_service - INFO - Created product mapping record for product: 7465065578586 in store: international
2025-09-28 17:02:56,560 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:56,562 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465065578586 in store international
2025-09-28 17:02:57,421 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465065578586
2025-09-28 17:02:57,425 - sync_service - INFO - Product gid://shopify/Product/7465065611354 has 1 variants, is_single_variant: True
2025-09-28 17:02:57,426 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:02:57,428 - sync_service - INFO - Processing single variant product: Mini Arroyo Mix Bracelet
2025-09-28 17:02:57,716 - sync_service - INFO - Created variant mapping record for SKU: FG-0000572 in store: international
2025-09-28 17:02:57,999 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000572 in store: international
2025-09-28 17:02:58,287 - sync_service - INFO - Created product mapping record for product: 7465065611354 in store: international
2025-09-28 17:02:58,289 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:58,292 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465065611354 in store international
2025-09-28 17:02:59,032 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465065611354
2025-09-28 17:02:59,033 - sync_service - INFO - Product gid://shopify/Product/7465065644122 has 1 variants, is_single_variant: True
2025-09-28 17:02:59,034 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:02:59,034 - sync_service - INFO - Processing single variant product: Riverstone Ring Mix
2025-09-28 17:02:59,330 - sync_service - INFO - Created variant mapping record for SKU: FG-0000571 in store: international
2025-09-28 17:02:59,630 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000571 in store: international
2025-09-28 17:02:59,930 - sync_service - INFO - Created product mapping record for product: 7465065644122 in store: international
2025-09-28 17:02:59,931 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:02:59,931 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465065644122 in store international
2025-09-28 17:03:00,669 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465065644122
2025-09-28 17:03:00,673 - sync_service - INFO - Product gid://shopify/Product/7465065676890 has 1 variants, is_single_variant: True
2025-09-28 17:03:00,675 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:03:00,676 - sync_service - INFO - Processing single variant product: Riverstone Necklace Mix
2025-09-28 17:03:00,968 - sync_service - INFO - Created variant mapping record for SKU: FG-0000568 in store: international
2025-09-28 17:03:01,261 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000568 in store: international
2025-09-28 17:03:01,563 - sync_service - INFO - Created product mapping record for product: 7465065676890 in store: international
2025-09-28 17:03:01,565 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:03:01,566 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465065676890 in store international
2025-09-28 17:03:02,349 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465065676890
2025-09-28 17:03:02,351 - sync_service - INFO - Product gid://shopify/Product/7465065775194 has 1 variants, is_single_variant: True
2025-09-28 17:03:02,354 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:03:02,355 - sync_service - INFO - Processing single variant product: Mini Riverstone Earrings Mix
2025-09-28 17:03:02,660 - sync_service - INFO - Created variant mapping record for SKU: FG-0000569 in store: international
2025-09-28 17:03:02,952 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000569 in store: international
2025-09-28 17:03:03,253 - sync_service - INFO - Created product mapping record for product: 7465065775194 in store: international
2025-09-28 17:03:03,256 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:03:03,258 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465065775194 in store international
2025-09-28 17:03:04,176 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465065775194
2025-09-28 17:03:04,178 - sync_service - INFO - Product gid://shopify/Product/7465065807962 has 1 variants, is_single_variant: True
2025-09-28 17:03:04,180 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:03:04,181 - sync_service - INFO - Processing single variant product: Cliff Earcap
2025-09-28 17:03:04,465 - sync_service - INFO - Created variant mapping record for SKU: FG-0000515 in store: international
2025-09-28 17:03:04,751 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000515 in store: international
2025-09-28 17:03:05,052 - sync_service - INFO - Created product mapping record for product: 7465065807962 in store: international
2025-09-28 17:03:05,056 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:03:05,058 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465065807962 in store international
2025-09-28 17:03:10,086 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465065807962 (attempt 1/3): 
2025-09-28 17:03:10,090 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:03:12,901 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465065807962
2025-09-28 17:03:12,903 - sync_service - INFO - Product gid://shopify/Product/7465065840730 has 1 variants, is_single_variant: True
2025-09-28 17:03:12,906 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:03:12,907 - sync_service - INFO - Processing single variant product: Shoreline Necklace
2025-09-28 17:03:13,205 - sync_service - INFO - Created variant mapping record for SKU: FG-0000543 in store: international
2025-09-28 17:03:13,493 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000543 in store: international
2025-09-28 17:03:13,782 - sync_service - INFO - Created product mapping record for product: 7465065840730 in store: international
2025-09-28 17:03:13,783 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:03:13,784 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465065840730 in store international
2025-09-28 17:03:14,536 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465065840730
2025-09-28 17:03:14,540 - sync_service - INFO - Product gid://shopify/Product/7465065906266 has 1 variants, is_single_variant: True
2025-09-28 17:03:14,542 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:03:14,543 - sync_service - INFO - Processing single variant product: Shoreline Cuff
2025-09-28 17:03:14,827 - sync_service - INFO - Created variant mapping record for SKU: FG-0000513 in store: international
2025-09-28 17:03:15,113 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000513 in store: international
2025-09-28 17:03:15,399 - sync_service - INFO - Created product mapping record for product: 7465065906266 in store: international
2025-09-28 17:03:15,400 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:03:15,400 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465065906266 in store international
2025-09-28 17:03:16,147 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465065906266
2025-09-28 17:03:16,149 - sync_service - INFO - Product gid://shopify/Product/7465065971802 has 1 variants, is_single_variant: True
2025-09-28 17:03:16,149 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:03:16,150 - sync_service - INFO - Processing single variant product: Floway ring set
2025-09-28 17:03:16,459 - sync_service - INFO - Created variant mapping record for SKU: FG-0000544 in store: international
2025-09-28 17:03:16,750 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000544 in store: international
2025-09-28 17:03:17,043 - sync_service - INFO - Created product mapping record for product: 7465065971802 in store: international
2025-09-28 17:03:17,045 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:03:17,046 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465065971802 in store international
2025-09-28 17:03:22,059 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465065971802 (attempt 1/3): 
2025-09-28 17:03:22,059 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:03:25,175 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465065971802
2025-09-28 17:03:25,177 - sync_service - INFO - Product gid://shopify/Product/7465066070106 has 1 variants, is_single_variant: True
2025-09-28 17:03:25,181 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:03:25,182 - sync_service - INFO - Processing single variant product: Arroyo Bracelet
2025-09-28 17:03:25,770 - sync_service - INFO - Created variant mapping record for SKU: FG-0000508 in store: international
2025-09-28 17:03:26,102 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000508 in store: international
2025-09-28 17:03:26,426 - sync_service - INFO - Created product mapping record for product: 7465066070106 in store: international
2025-09-28 17:03:26,427 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:03:26,428 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465066070106 in store international
2025-09-28 17:03:27,300 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465066070106
2025-09-28 17:03:27,305 - sync_service - INFO - Product gid://shopify/Product/7465066233946 has 1 variants, is_single_variant: True
2025-09-28 17:03:27,306 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:03:27,308 - sync_service - INFO - Processing single variant product: Arroyo Necklace
2025-09-28 17:03:27,597 - sync_service - INFO - Created variant mapping record for SKU: FG-0000540 in store: international
2025-09-28 17:03:27,964 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000540 in store: international
2025-09-28 17:03:28,680 - sync_service - INFO - Created product mapping record for product: 7465066233946 in store: international
2025-09-28 17:03:28,682 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:03:28,684 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465066233946 in store international
2025-09-28 17:03:29,665 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465066233946
2025-09-28 17:03:29,667 - sync_service - INFO - Product gid://shopify/Product/7465066397786 has 1 variants, is_single_variant: True
2025-09-28 17:03:29,668 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:03:29,669 - sync_service - INFO - Processing single variant product: Arroyo Earrings
2025-09-28 17:03:29,980 - sync_service - INFO - Created variant mapping record for SKU: FG-0000514 in store: international
2025-09-28 17:03:31,047 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000514 in store: international
2025-09-28 17:03:32,014 - sync_service - INFO - Created product mapping record for product: 7465066397786 in store: international
2025-09-28 17:03:32,015 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:03:32,015 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465066397786 in store international
2025-09-28 17:03:32,932 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465066397786
2025-09-28 17:03:32,934 - sync_service - INFO - Product gid://shopify/Product/7465066463322 has 1 variants, is_single_variant: True
2025-09-28 17:03:32,936 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:03:32,938 - sync_service - INFO - Processing single variant product: Mini Pebble Hoops
2025-09-28 17:03:33,258 - sync_service - INFO - Created variant mapping record for SKU: FG-0000532 in store: international
2025-09-28 17:03:33,542 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000532 in store: international
2025-09-28 17:03:33,834 - sync_service - INFO - Created product mapping record for product: 7465066463322 in store: international
2025-09-28 17:03:33,835 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:03:33,837 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465066463322 in store international
2025-09-28 17:03:36,211 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465066463322
2025-09-28 17:03:36,214 - sync_service - INFO - Product gid://shopify/Product/7465066528858 has 1 variants, is_single_variant: True
2025-09-28 17:03:36,215 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:03:36,215 - sync_service - INFO - Processing single variant product: Whirlpool Earrings
2025-09-28 17:03:36,498 - sync_service - INFO - Created variant mapping record for SKU: FG-0000539 in store: international
2025-09-28 17:03:36,785 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000539 in store: international
2025-09-28 17:03:37,067 - sync_service - INFO - Created product mapping record for product: 7465066528858 in store: international
2025-09-28 17:03:37,086 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:03:37,090 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465066528858 in store international
2025-09-28 17:03:38,159 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465066528858
2025-09-28 17:03:38,163 - sync_service - INFO - Product gid://shopify/Product/7465066692698 has 1 variants, is_single_variant: True
2025-09-28 17:03:38,165 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:03:38,165 - sync_service - INFO - Processing single variant product: Pebble Hoops
2025-09-28 17:03:38,451 - sync_service - INFO - Created variant mapping record for SKU: FG-0000534 in store: international
2025-09-28 17:03:38,767 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000534 in store: international
2025-09-28 17:03:39,077 - sync_service - INFO - Created product mapping record for product: 7465066692698 in store: international
2025-09-28 17:03:39,079 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:03:39,081 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465066692698 in store international
2025-09-28 17:03:39,894 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465066692698
2025-09-28 17:03:39,898 - sync_service - INFO - Product gid://shopify/Product/7465066791002 has 1 variants, is_single_variant: True
2025-09-28 17:03:39,899 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:03:39,900 - sync_service - INFO - Processing single variant product: Creek Hoops
2025-09-28 17:03:40,183 - sync_service - INFO - Created variant mapping record for SKU: FG-0000516 in store: international
2025-09-28 17:03:40,492 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000516 in store: international
2025-09-28 17:03:40,789 - sync_service - INFO - Created product mapping record for product: 7465066791002 in store: international
2025-09-28 17:03:40,791 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:03:40,792 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465066791002 in store international
2025-09-28 17:03:45,822 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465066791002 (attempt 1/3): 
2025-09-28 17:03:45,824 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:03:48,936 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465066791002
2025-09-28 17:03:48,939 - sync_service - INFO - Product gid://shopify/Product/7465066922074 has 1 variants, is_single_variant: True
2025-09-28 17:03:48,941 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:03:48,941 - sync_service - INFO - Processing single variant product: Gravel Bracelet
2025-09-28 17:03:49,240 - sync_service - INFO - Created variant mapping record for SKU: FG-0000509 in store: international
2025-09-28 17:03:49,891 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000509 in store: international
2025-09-28 17:03:50,216 - sync_service - INFO - Created product mapping record for product: 7465066922074 in store: international
2025-09-28 17:03:50,217 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:03:50,218 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465066922074 in store international
2025-09-28 17:03:51,061 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465066922074
2025-09-28 17:03:51,065 - sync_service - INFO - Product gid://shopify/Product/7465067020378 has 1 variants, is_single_variant: True
2025-09-28 17:03:51,066 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:03:51,066 - sync_service - INFO - Processing single variant product: Gravel Chocker
2025-09-28 17:03:51,350 - sync_service - INFO - Created variant mapping record for SKU: FG-0000541 in store: international
2025-09-28 17:03:51,634 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000541 in store: international
2025-09-28 17:03:51,920 - sync_service - INFO - Created product mapping record for product: 7465067020378 in store: international
2025-09-28 17:03:51,922 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:03:51,924 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465067020378 in store international
2025-09-28 17:03:52,707 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465067020378
2025-09-28 17:03:52,710 - sync_service - INFO - Product gid://shopify/Product/7465067085914 has 1 variants, is_single_variant: True
2025-09-28 17:03:52,713 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:03:52,714 - sync_service - INFO - Processing single variant product: Riverstone ring
2025-09-28 17:03:52,998 - sync_service - INFO - Created variant mapping record for SKU: FG-0000549 in store: international
2025-09-28 17:03:53,281 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000549 in store: international
2025-09-28 17:03:53,561 - sync_service - INFO - Created product mapping record for product: 7465067085914 in store: international
2025-09-28 17:03:53,564 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:03:53,565 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465067085914 in store international
2025-09-28 17:03:58,605 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465067085914 (attempt 1/3): 
2025-09-28 17:03:58,610 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:04:05,471 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465067085914
2025-09-28 17:04:05,475 - sync_service - INFO - Product gid://shopify/Product/7465067184218 has 1 variants, is_single_variant: True
2025-09-28 17:04:05,478 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:04:05,479 - sync_service - INFO - Processing single variant product: Riverstone Necklace
2025-09-28 17:04:05,783 - sync_service - INFO - Created variant mapping record for SKU: FG-0000542 in store: international
2025-09-28 17:04:06,064 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000542 in store: international
2025-09-28 17:04:06,347 - sync_service - INFO - Created product mapping record for product: 7465067184218 in store: international
2025-09-28 17:04:06,349 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:04:06,351 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465067184218 in store international
2025-09-28 17:04:07,116 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465067184218
2025-09-28 17:04:07,118 - sync_service - INFO - Product gid://shopify/Product/7465067249754 has 1 variants, is_single_variant: True
2025-09-28 17:04:07,120 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:04:07,121 - sync_service - INFO - Processing single variant product: Mini Riverstone Earrings
2025-09-28 17:04:07,410 - sync_service - INFO - Created variant mapping record for SKU: FG-0000533 in store: international
2025-09-28 17:04:07,698 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000533 in store: international
2025-09-28 17:04:07,977 - sync_service - INFO - Created product mapping record for product: 7465067249754 in store: international
2025-09-28 17:04:07,979 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:04:07,980 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465067249754 in store international
2025-09-28 17:04:08,950 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465067249754
2025-09-28 17:04:08,952 - sync_service - INFO - Product gid://shopify/Product/7465067282522 has 1 variants, is_single_variant: True
2025-09-28 17:04:08,952 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:04:08,953 - sync_service - INFO - Processing single variant product: Riverstone Earrings
2025-09-28 17:04:09,243 - sync_service - INFO - Created variant mapping record for SKU: FG-0000535 in store: international
2025-09-28 17:04:09,530 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000535 in store: international
2025-09-28 17:04:09,843 - sync_service - INFO - Created product mapping record for product: 7465067282522 in store: international
2025-09-28 17:04:09,845 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:04:09,847 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465067282522 in store international
2025-09-28 17:04:14,880 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465067282522 (attempt 1/3): 
2025-09-28 17:04:14,882 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:04:17,853 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465067282522
2025-09-28 17:04:17,855 - sync_service - INFO - Product gid://shopify/Product/7465067675738 has 1 variants, is_single_variant: True
2025-09-28 17:04:17,857 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:04:17,858 - sync_service - INFO - Processing single variant product: Cassandra Bracelet
2025-09-28 17:04:18,153 - sync_service - INFO - Created variant mapping record for SKU: FG-0000289 in store: international
2025-09-28 17:04:18,447 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000289 in store: international
2025-09-28 17:04:18,735 - sync_service - INFO - Created product mapping record for product: 7465067675738 in store: international
2025-09-28 17:04:18,735 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:04:18,737 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465067675738 in store international
2025-09-28 17:04:19,765 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465067675738
2025-09-28 17:04:19,766 - sync_service - INFO - Product gid://shopify/Product/7465067741274 has 1 variants, is_single_variant: True
2025-09-28 17:04:19,767 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:04:19,768 - sync_service - INFO - Processing single variant product: Cassandra Choker
2025-09-28 17:04:20,080 - sync_service - INFO - Created variant mapping record for SKU: FG-0000253 in store: international
2025-09-28 17:04:20,366 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000253 in store: international
2025-09-28 17:04:20,957 - sync_service - INFO - Created product mapping record for product: 7465067741274 in store: international
2025-09-28 17:04:20,959 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:04:20,960 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465067741274 in store international
2025-09-28 17:04:22,528 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465067741274
2025-09-28 17:04:22,531 - sync_service - INFO - Product gid://shopify/Product/7465067774042 has 1 variants, is_single_variant: True
2025-09-28 17:04:22,533 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:04:22,533 - sync_service - INFO - Processing single variant product: Cassandra Pinky Ring
2025-09-28 17:04:22,818 - sync_service - INFO - Created variant mapping record for SKU: FG-0000498 in store: international
2025-09-28 17:04:23,153 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000498 in store: international
2025-09-28 17:04:23,435 - sync_service - INFO - Created product mapping record for product: 7465067774042 in store: international
2025-09-28 17:04:23,436 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:04:23,437 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465067774042 in store international
2025-09-28 17:04:28,479 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465067774042 (attempt 1/3): 
2025-09-28 17:04:28,481 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:04:31,390 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465067774042
2025-09-28 17:04:31,392 - sync_service - INFO - Product gid://shopify/Product/7465067839578 has 1 variants, is_single_variant: True
2025-09-28 17:04:31,393 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:04:31,394 - sync_service - INFO - Processing single variant product: Cassandra Ring
2025-09-28 17:04:31,690 - sync_service - INFO - Created variant mapping record for SKU: FG-0000496 in store: international
2025-09-28 17:04:31,996 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000496 in store: international
2025-09-28 17:04:32,296 - sync_service - INFO - Created product mapping record for product: 7465067839578 in store: international
2025-09-28 17:04:32,297 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:04:32,298 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465067839578 in store international
2025-09-28 17:04:33,085 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465067839578
2025-09-28 17:04:33,087 - sync_service - INFO - Product gid://shopify/Product/7465067905114 has 1 variants, is_single_variant: True
2025-09-28 17:04:33,088 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:04:33,089 - sync_service - INFO - Processing single variant product: Cassandra Mix Pinky Ring
2025-09-28 17:04:33,442 - sync_service - INFO - Created variant mapping record for SKU: FG-0000499 in store: international
2025-09-28 17:04:33,752 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000499 in store: international
2025-09-28 17:04:34,048 - sync_service - INFO - Created product mapping record for product: 7465067905114 in store: international
2025-09-28 17:04:34,049 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:04:34,051 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465067905114 in store international
2025-09-28 17:04:35,355 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465067905114
2025-09-28 17:04:35,360 - sync_service - INFO - Product gid://shopify/Product/7465068036186 has 1 variants, is_single_variant: True
2025-09-28 17:04:35,362 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:04:35,363 - sync_service - INFO - Processing single variant product: Cassandra Mix Ring
2025-09-28 17:04:35,674 - sync_service - INFO - Created variant mapping record for SKU: FG-0000497 in store: international
2025-09-28 17:04:35,956 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000497 in store: international
2025-09-28 17:04:36,251 - sync_service - INFO - Created product mapping record for product: 7465068036186 in store: international
2025-09-28 17:04:36,252 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:04:36,253 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465068036186 in store international
2025-09-28 17:04:41,297 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465068036186 (attempt 1/3): 
2025-09-28 17:04:41,298 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:04:44,050 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465068036186
2025-09-28 17:04:44,052 - sync_service - INFO - Product gid://shopify/Product/7465068134490 has 1 variants, is_single_variant: True
2025-09-28 17:04:44,053 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:04:44,053 - sync_service - INFO - Processing single variant product: Frost Mix Ring
2025-09-28 17:04:44,339 - sync_service - INFO - Created variant mapping record for SKU: FG-0000500 in store: international
2025-09-28 17:04:44,628 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000500 in store: international
2025-09-28 17:04:44,913 - sync_service - INFO - Created product mapping record for product: 7465068134490 in store: international
2025-09-28 17:04:44,915 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:04:44,916 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465068134490 in store international
2025-09-28 17:04:45,824 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465068134490
2025-09-28 17:04:45,829 - sync_service - INFO - Product gid://shopify/Product/7465068167258 has 1 variants, is_single_variant: True
2025-09-28 17:04:45,831 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:04:45,833 - sync_service - INFO - Processing single variant product: Icefall Mix Earrings
2025-09-28 17:04:46,126 - sync_service - INFO - Created variant mapping record for SKU: FG-0000482 in store: international
2025-09-28 17:04:46,433 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000482 in store: international
2025-09-28 17:04:46,734 - sync_service - INFO - Created product mapping record for product: 7465068167258 in store: international
2025-09-28 17:04:46,735 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:04:46,736 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465068167258 in store international
2025-09-28 17:04:51,781 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465068167258 (attempt 1/3): 
2025-09-28 17:04:51,782 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:04:55,168 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465068167258
2025-09-28 17:04:55,170 - sync_service - INFO - Product gid://shopify/Product/7465068331098 has 1 variants, is_single_variant: True
2025-09-28 17:04:55,172 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:04:55,173 - sync_service - INFO - Processing single variant product: Cassandra Earrings
2025-09-28 17:04:55,468 - sync_service - INFO - Created variant mapping record for SKU: FG-0000477 in store: international
2025-09-28 17:04:55,773 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000477 in store: international
2025-09-28 17:04:56,063 - sync_service - INFO - Created product mapping record for product: 7465068331098 in store: international
2025-09-28 17:04:56,064 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:04:56,065 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465068331098 in store international
2025-09-28 17:04:56,811 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465068331098
2025-09-28 17:04:56,815 - sync_service - INFO - Product gid://shopify/Product/7465068396634 has 3 variants, is_single_variant: False
2025-09-28 17:04:56,817 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:04:56,817 - sync_service - INFO - Processing multi-variant product: Nebula Necklace with 3 variants
2025-09-28 17:04:57,396 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000429' and U_Shopify_Store eq 'international' - success
2025-09-28 17:04:57,965 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000428' and U_Shopify_Store eq 'international' - success
2025-09-28 17:04:58,536 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000430' and U_Shopify_Store eq 'international' - success
2025-09-28 17:04:58,538 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:04:58,834 - sync_service - INFO - Created product mapping record for product: 7465068396634 in store: international
2025-09-28 17:04:59,129 - sync_service - INFO - Created variant mapping record for SKU: FG-0000429 in store: international
2025-09-28 17:04:59,414 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000429 in store: international
2025-09-28 17:04:59,415 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:04:59,702 - sync_service - INFO - Created variant mapping record for SKU: FG-0000428 in store: international
2025-09-28 17:04:59,992 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000428 in store: international
2025-09-28 17:04:59,995 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:05:00,287 - sync_service - INFO - Created variant mapping record for SKU: FG-0000430 in store: international
2025-09-28 17:05:00,574 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000430 in store: international
2025-09-28 17:05:00,576 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:05:00,578 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465068396634 in store international
2025-09-28 17:05:05,652 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465068396634 (attempt 1/3): 
2025-09-28 17:05:05,654 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:05:08,486 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465068396634
2025-09-28 17:05:08,488 - sync_service - INFO - Product gid://shopify/Product/7465068462170 has 3 variants, is_single_variant: False
2025-09-28 17:05:08,491 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:05:08,491 - sync_service - INFO - Processing multi-variant product: Nebula Earrings with 3 variants
2025-09-28 17:05:09,516 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000425' and U_Shopify_Store eq 'international' - success
2025-09-28 17:05:10,132 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000424' and U_Shopify_Store eq 'international' - success
2025-09-28 17:05:10,749 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000426' and U_Shopify_Store eq 'international' - success
2025-09-28 17:05:10,751 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:05:11,063 - sync_service - INFO - Created product mapping record for product: 7465068462170 in store: international
2025-09-28 17:05:11,343 - sync_service - INFO - Created variant mapping record for SKU: FG-0000425 in store: international
2025-09-28 17:05:11,621 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000425 in store: international
2025-09-28 17:05:11,623 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:05:11,911 - sync_service - INFO - Created variant mapping record for SKU: FG-0000424 in store: international
2025-09-28 17:05:12,197 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000424 in store: international
2025-09-28 17:05:12,199 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:05:12,821 - sync_service - INFO - Created variant mapping record for SKU: FG-0000426 in store: international
2025-09-28 17:05:13,138 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000426 in store: international
2025-09-28 17:05:13,140 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:05:13,141 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465068462170 in store international
2025-09-28 17:05:18,177 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465068462170 (attempt 1/3): 
2025-09-28 17:05:18,181 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:05:21,227 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465068462170
2025-09-28 17:05:21,232 - sync_service - INFO - Product gid://shopify/Product/7465068560474 has 4 variants, is_single_variant: False
2025-09-28 17:05:21,234 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:05:21,235 - sync_service - INFO - Processing multi-variant product: The Cruiser with 4 variants
2025-09-28 17:05:21,817 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000560' and U_Shopify_Store eq 'international' - success
2025-09-28 17:05:22,416 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000554' and U_Shopify_Store eq 'international' - success
2025-09-28 17:05:22,996 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000553' and U_Shopify_Store eq 'international' - success
2025-09-28 17:05:23,859 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000566' and U_Shopify_Store eq 'international' - success
2025-09-28 17:05:23,864 - sync_service - INFO - Processing 4 unsynced variants out of 4 total variants
2025-09-28 17:05:24,197 - sync_service - INFO - Created product mapping record for product: 7465068560474 in store: international
2025-09-28 17:05:24,482 - sync_service - INFO - Created variant mapping record for SKU: FG-0000560 in store: international
2025-09-28 17:05:24,777 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000560 in store: international
2025-09-28 17:05:24,780 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:05:25,067 - sync_service - INFO - Created variant mapping record for SKU: FG-0000554 in store: international
2025-09-28 17:05:25,360 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000554 in store: international
2025-09-28 17:05:25,362 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:05:25,655 - sync_service - INFO - Created variant mapping record for SKU: FG-0000553 in store: international
2025-09-28 17:05:25,943 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000553 in store: international
2025-09-28 17:05:25,944 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:05:26,233 - sync_service - INFO - Created variant mapping record for SKU: FG-0000566 in store: international
2025-09-28 17:05:26,519 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000566 in store: international
2025-09-28 17:05:26,521 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:05:26,523 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465068560474 in store international
2025-09-28 17:05:32,148 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465068560474
2025-09-28 17:05:32,149 - sync_service - INFO - Product gid://shopify/Product/7465068691546 has 4 variants, is_single_variant: False
2025-09-28 17:05:32,149 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:05:32,150 - sync_service - INFO - Processing multi-variant product: The Jetsetter with 4 variants
2025-09-28 17:05:32,699 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000555' and U_Shopify_Store eq 'international' - success
2025-09-28 17:05:33,263 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000557' and U_Shopify_Store eq 'international' - success
2025-09-28 17:05:33,814 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000556' and U_Shopify_Store eq 'international' - success
2025-09-28 17:05:34,367 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000565' and U_Shopify_Store eq 'international' - success
2025-09-28 17:05:34,370 - sync_service - INFO - Processing 4 unsynced variants out of 4 total variants
2025-09-28 17:05:34,682 - sync_service - INFO - Created product mapping record for product: 7465068691546 in store: international
2025-09-28 17:05:34,965 - sync_service - INFO - Created variant mapping record for SKU: FG-0000555 in store: international
2025-09-28 17:05:35,249 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000555 in store: international
2025-09-28 17:05:35,249 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:05:35,546 - sync_service - INFO - Created variant mapping record for SKU: FG-0000557 in store: international
2025-09-28 17:05:35,857 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000557 in store: international
2025-09-28 17:05:35,858 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:05:36,149 - sync_service - INFO - Created variant mapping record for SKU: FG-0000556 in store: international
2025-09-28 17:05:36,427 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000556 in store: international
2025-09-28 17:05:36,429 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:05:36,712 - sync_service - INFO - Created variant mapping record for SKU: FG-0000565 in store: international
2025-09-28 17:05:36,999 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000565 in store: international
2025-09-28 17:05:36,999 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:05:36,999 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465068691546 in store international
2025-09-28 17:05:42,030 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465068691546 (attempt 1/3): 
2025-09-28 17:05:42,031 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:05:48,863 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465068691546
2025-09-28 17:05:48,867 - sync_service - INFO - Product gid://shopify/Product/7465068789850 has 4 variants, is_single_variant: False
2025-09-28 17:05:48,869 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:05:48,870 - sync_service - INFO - Processing multi-variant product: The Weekender with 4 variants
2025-09-28 17:05:49,439 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000559' and U_Shopify_Store eq 'international' - success
2025-09-28 17:05:49,988 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000567' and U_Shopify_Store eq 'international' - success
2025-09-28 17:05:49,992 - sync_service - WARNING - Variant gid://shopify/ProductVariant/42003222954074 has no SKU, including in unsynced list
2025-09-28 17:05:49,993 - sync_service - WARNING - Variant gid://shopify/ProductVariant/42003222986842 has no SKU, including in unsynced list
2025-09-28 17:05:49,995 - sync_service - INFO - Processing 4 unsynced variants out of 4 total variants
2025-09-28 17:05:50,308 - sync_service - INFO - Created product mapping record for product: 7465068789850 in store: international
2025-09-28 17:05:50,594 - sync_service - INFO - Created variant mapping record for SKU: FG-0000559 in store: international
2025-09-28 17:05:50,878 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000559 in store: international
2025-09-28 17:05:50,880 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:05:51,168 - sync_service - INFO - Created variant mapping record for SKU: FG-0000567 in store: international
2025-09-28 17:05:51,449 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000567 in store: international
2025-09-28 17:05:51,450 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:05:51,451 - sync_service - WARNING - Variant gid://shopify/ProductVariant/42003222954074 has no SKU, skipping
2025-09-28 17:05:51,451 - sync_service - WARNING - Variant gid://shopify/ProductVariant/42003222986842 has no SKU, skipping
2025-09-28 17:05:51,452 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465068789850 in store international
2025-09-28 17:05:52,411 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465068789850
2025-09-28 17:05:52,415 - sync_service - INFO - Product gid://shopify/Product/7465069117530 has 3 variants, is_single_variant: False
2025-09-28 17:05:52,415 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:05:52,416 - sync_service - INFO - Processing multi-variant product: Cyclone Bracelet with 3 variants
2025-09-28 17:05:52,965 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000417' and U_Shopify_Store eq 'international' - success
2025-09-28 17:05:53,947 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000415' and U_Shopify_Store eq 'international' - success
2025-09-28 17:05:54,508 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000416' and U_Shopify_Store eq 'international' - success
2025-09-28 17:05:54,511 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:05:54,793 - sync_service - INFO - Created product mapping record for product: 7465069117530 in store: international
2025-09-28 17:05:55,074 - sync_service - INFO - Created variant mapping record for SKU: FG-0000417 in store: international
2025-09-28 17:05:55,359 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000417 in store: international
2025-09-28 17:05:55,361 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:05:55,647 - sync_service - INFO - Created variant mapping record for SKU: FG-0000415 in store: international
2025-09-28 17:05:55,931 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000415 in store: international
2025-09-28 17:05:55,932 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:05:56,209 - sync_service - INFO - Created variant mapping record for SKU: FG-0000416 in store: international
2025-09-28 17:05:56,493 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000416 in store: international
2025-09-28 17:05:56,495 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:05:56,496 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465069117530 in store international
2025-09-28 17:05:57,324 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465069117530
2025-09-28 17:05:57,327 - sync_service - INFO - Product gid://shopify/Product/7465069215834 has 3 variants, is_single_variant: False
2025-09-28 17:05:57,330 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:05:57,331 - sync_service - INFO - Processing multi-variant product: Sandstone Necklace with 3 variants
2025-09-28 17:05:57,866 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000432' and U_Shopify_Store eq 'international' - success
2025-09-28 17:05:58,415 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000433' and U_Shopify_Store eq 'international' - success
2025-09-28 17:05:58,982 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000431' and U_Shopify_Store eq 'international' - success
2025-09-28 17:05:58,982 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:05:59,273 - sync_service - INFO - Created product mapping record for product: 7465069215834 in store: international
2025-09-28 17:05:59,555 - sync_service - INFO - Created variant mapping record for SKU: FG-0000432 in store: international
2025-09-28 17:05:59,846 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000432 in store: international
2025-09-28 17:05:59,848 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:06:00,130 - sync_service - INFO - Created variant mapping record for SKU: FG-0000433 in store: international
2025-09-28 17:06:00,426 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000433 in store: international
2025-09-28 17:06:00,428 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:06:00,714 - sync_service - INFO - Created variant mapping record for SKU: FG-0000431 in store: international
2025-09-28 17:06:00,991 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000431 in store: international
2025-09-28 17:06:00,993 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:06:00,994 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465069215834 in store international
2025-09-28 17:06:03,364 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465069215834
2025-09-28 17:06:03,365 - sync_service - INFO - Product gid://shopify/Product/7465069477978 has 4 variants, is_single_variant: False
2025-09-28 17:06:03,366 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:06:03,366 - sync_service - INFO - Processing multi-variant product: Meteorite Necklace with 4 variants
2025-09-28 17:06:03,916 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000381' and U_Shopify_Store eq 'international' - success
2025-09-28 17:06:04,517 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000378' and U_Shopify_Store eq 'international' - success
2025-09-28 17:06:05,108 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000379' and U_Shopify_Store eq 'international' - success
2025-09-28 17:06:05,669 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000380' and U_Shopify_Store eq 'international' - success
2025-09-28 17:06:05,673 - sync_service - INFO - Processing 4 unsynced variants out of 4 total variants
2025-09-28 17:06:05,967 - sync_service - INFO - Created product mapping record for product: 7465069477978 in store: international
2025-09-28 17:06:06,261 - sync_service - INFO - Created variant mapping record for SKU: FG-0000381 in store: international
2025-09-28 17:06:06,547 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000381 in store: international
2025-09-28 17:06:06,548 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:06:06,832 - sync_service - INFO - Created variant mapping record for SKU: FG-0000378 in store: international
2025-09-28 17:06:07,116 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000378 in store: international
2025-09-28 17:06:07,117 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:06:07,399 - sync_service - INFO - Created variant mapping record for SKU: FG-0000379 in store: international
2025-09-28 17:06:07,679 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000379 in store: international
2025-09-28 17:06:07,681 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:06:07,961 - sync_service - INFO - Created variant mapping record for SKU: FG-0000380 in store: international
2025-09-28 17:06:08,249 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000380 in store: international
2025-09-28 17:06:08,250 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:06:08,251 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465069477978 in store international
2025-09-28 17:06:09,010 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465069477978
2025-09-28 17:06:09,015 - sync_service - INFO - Product gid://shopify/Product/7465069674586 has 4 variants, is_single_variant: False
2025-09-28 17:06:09,016 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:06:09,017 - sync_service - INFO - Processing multi-variant product: Interchangeable Meteorite Earrings with 4 variants
2025-09-28 17:06:09,633 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000372' and U_Shopify_Store eq 'international' - success
2025-09-28 17:06:10,210 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000373' and U_Shopify_Store eq 'international' - success
2025-09-28 17:06:10,784 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000370' and U_Shopify_Store eq 'international' - success
2025-09-28 17:06:11,376 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000371' and U_Shopify_Store eq 'international' - success
2025-09-28 17:06:11,379 - sync_service - INFO - Processing 4 unsynced variants out of 4 total variants
2025-09-28 17:06:11,665 - sync_service - INFO - Created product mapping record for product: 7465069674586 in store: international
2025-09-28 17:06:11,944 - sync_service - INFO - Created variant mapping record for SKU: FG-0000372 in store: international
2025-09-28 17:06:12,233 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000372 in store: international
2025-09-28 17:06:12,233 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:06:12,517 - sync_service - INFO - Created variant mapping record for SKU: FG-0000373 in store: international
2025-09-28 17:06:12,810 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000373 in store: international
2025-09-28 17:06:12,811 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:06:13,092 - sync_service - INFO - Created variant mapping record for SKU: FG-0000370 in store: international
2025-09-28 17:06:13,379 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000370 in store: international
2025-09-28 17:06:13,381 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:06:13,666 - sync_service - INFO - Created variant mapping record for SKU: FG-0000371 in store: international
2025-09-28 17:06:13,947 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000371 in store: international
2025-09-28 17:06:13,948 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:06:13,948 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465069674586 in store international
2025-09-28 17:06:18,981 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465069674586 (attempt 1/3): 
2025-09-28 17:06:18,982 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:06:25,879 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465069674586
2025-09-28 17:06:25,882 - sync_service - INFO - Product gid://shopify/Product/7465070198874 has 4 variants, is_single_variant: False
2025-09-28 17:06:25,883 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:06:25,886 - sync_service - INFO - Processing multi-variant product: Selene Pendant with 4 variants
2025-09-28 17:06:26,466 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000255' and U_Shopify_Store eq 'international' - success
2025-09-28 17:06:27,045 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000254' and U_Shopify_Store eq 'international' - success
2025-09-28 17:06:27,600 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000256' and U_Shopify_Store eq 'international' - success
2025-09-28 17:06:28,150 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000257' and U_Shopify_Store eq 'international' - success
2025-09-28 17:06:28,153 - sync_service - INFO - Processing 4 unsynced variants out of 4 total variants
2025-09-28 17:06:28,446 - sync_service - INFO - Created product mapping record for product: 7465070198874 in store: international
2025-09-28 17:06:28,728 - sync_service - INFO - Created variant mapping record for SKU: FG-0000255 in store: international
2025-09-28 17:06:29,011 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000255 in store: international
2025-09-28 17:06:29,014 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:06:29,310 - sync_service - INFO - Created variant mapping record for SKU: FG-0000254 in store: international
2025-09-28 17:06:29,595 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000254 in store: international
2025-09-28 17:06:29,597 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:06:29,878 - sync_service - INFO - Created variant mapping record for SKU: FG-0000256 in store: international
2025-09-28 17:06:30,167 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000256 in store: international
2025-09-28 17:06:30,167 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:06:30,469 - sync_service - INFO - Created variant mapping record for SKU: FG-0000257 in store: international
2025-09-28 17:06:30,750 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000257 in store: international
2025-09-28 17:06:30,750 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:06:30,751 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465070198874 in store international
2025-09-28 17:06:35,776 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465070198874 (attempt 1/3): 
2025-09-28 17:06:35,777 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:06:43,064 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465070198874
2025-09-28 17:06:43,067 - sync_service - INFO - Product gid://shopify/Product/7465070329946 has 1 variants, is_single_variant: True
2025-09-28 17:06:43,068 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:06:43,069 - sync_service - INFO - Processing single variant product: Aurora Choker
2025-09-28 17:06:43,376 - sync_service - INFO - Created variant mapping record for SKU: FG-0000427 in store: international
2025-09-28 17:06:43,653 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000427 in store: international
2025-09-28 17:06:43,959 - sync_service - INFO - Created product mapping record for product: 7465070329946 in store: international
2025-09-28 17:06:43,960 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:06:43,961 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465070329946 in store international
2025-09-28 17:06:45,112 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465070329946
2025-09-28 17:06:45,117 - sync_service - INFO - Product gid://shopify/Product/7465070493786 has 1 variants, is_single_variant: True
2025-09-28 17:06:45,119 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:06:45,124 - sync_service - INFO - Processing single variant product: Ripple Mix Bracelet
2025-09-28 17:06:45,433 - sync_service - INFO - Created variant mapping record for SKU: FG-0000384 in store: international
2025-09-28 17:06:45,726 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000384 in store: international
2025-09-28 17:06:46,008 - sync_service - INFO - Created product mapping record for product: 7465070493786 in store: international
2025-09-28 17:06:46,009 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:06:46,010 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465070493786 in store international
2025-09-28 17:06:47,158 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465070493786
2025-09-28 17:06:47,160 - sync_service - INFO - Product gid://shopify/Product/7465070559322 has 1 variants, is_single_variant: True
2025-09-28 17:06:47,161 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:06:47,161 - sync_service - INFO - Processing single variant product: Ripple Gold Bracelet
2025-09-28 17:06:47,459 - sync_service - INFO - Created variant mapping record for SKU: FG-0000383 in store: international
2025-09-28 17:06:47,758 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000383 in store: international
2025-09-28 17:06:48,075 - sync_service - INFO - Created product mapping record for product: 7465070559322 in store: international
2025-09-28 17:06:48,076 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:06:48,077 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465070559322 in store international
2025-09-28 17:06:53,105 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465070559322 (attempt 1/3): 
2025-09-28 17:06:53,108 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:06:55,944 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465070559322
2025-09-28 17:06:55,947 - sync_service - INFO - Product gid://shopify/Product/7465070624858 has 1 variants, is_single_variant: True
2025-09-28 17:06:55,948 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:06:55,949 - sync_service - INFO - Processing single variant product: Mini Sahara Mix Hoop
2025-09-28 17:06:56,234 - sync_service - INFO - Created variant mapping record for SKU: FG-0000369 in store: international
2025-09-28 17:06:56,516 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000369 in store: international
2025-09-28 17:06:56,801 - sync_service - INFO - Created product mapping record for product: 7465070624858 in store: international
2025-09-28 17:06:56,802 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:06:56,805 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465070624858 in store international
2025-09-28 17:06:57,595 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465070624858
2025-09-28 17:06:57,596 - sync_service - INFO - Product gid://shopify/Product/7465070821466 has 1 variants, is_single_variant: True
2025-09-28 17:06:57,597 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:06:57,597 - sync_service - INFO - Processing single variant product: Sahara Mix Hoop
2025-09-28 17:06:57,876 - sync_service - INFO - Created variant mapping record for SKU: FG-0000367 in store: international
2025-09-28 17:06:58,174 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000367 in store: international
2025-09-28 17:06:58,456 - sync_service - INFO - Created product mapping record for product: 7465070821466 in store: international
2025-09-28 17:06:58,457 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:06:58,458 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465070821466 in store international
2025-09-28 17:06:59,232 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465070821466
2025-09-28 17:06:59,233 - sync_service - INFO - Product gid://shopify/Product/7465070952538 has 1 variants, is_single_variant: True
2025-09-28 17:06:59,234 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:06:59,235 - sync_service - INFO - Processing single variant product: Mini Harmonia Earrings
2025-09-28 17:06:59,533 - sync_service - INFO - Created variant mapping record for SKU: FG-0000345 in store: international
2025-09-28 17:06:59,860 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000345 in store: international
2025-09-28 17:07:00,154 - sync_service - INFO - Created product mapping record for product: 7465070952538 in store: international
2025-09-28 17:07:00,157 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:07:00,158 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465070952538 in store international
2025-09-28 17:07:00,893 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465070952538
2025-09-28 17:07:00,894 - sync_service - INFO - Product gid://shopify/Product/7465071083610 has 1 variants, is_single_variant: True
2025-09-28 17:07:00,895 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:07:00,895 - sync_service - INFO - Processing single variant product: Elea Hoop
2025-09-28 17:07:01,183 - sync_service - INFO - Created variant mapping record for SKU: FG-0000347 in store: international
2025-09-28 17:07:01,491 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000347 in store: international
2025-09-28 17:07:01,768 - sync_service - INFO - Created product mapping record for product: 7465071083610 in store: international
2025-09-28 17:07:01,772 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:07:01,773 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465071083610 in store international
2025-09-28 17:07:03,140 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465071083610
2025-09-28 17:07:03,142 - sync_service - INFO - Product gid://shopify/Product/7465071181914 has 1 variants, is_single_variant: True
2025-09-28 17:07:03,143 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:07:03,144 - sync_service - INFO - Processing single variant product: Medusa Earrings
2025-09-28 17:07:03,475 - sync_service - INFO - Created variant mapping record for SKU: FG-0000344 in store: international
2025-09-28 17:07:03,944 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000344 in store: international
2025-09-28 17:07:04,226 - sync_service - INFO - Created product mapping record for product: 7465071181914 in store: international
2025-09-28 17:07:04,227 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:07:04,228 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465071181914 in store international
2025-09-28 17:07:09,254 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7465071181914 (attempt 1/3): 
2025-09-28 17:07:09,257 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:07:12,101 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465071181914
2025-09-28 17:07:12,102 - sync_service - INFO - Product gid://shopify/Product/7465071247450 has 1 variants, is_single_variant: True
2025-09-28 17:07:12,103 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:07:12,103 - sync_service - INFO - Processing single variant product: Thalia Necklace
2025-09-28 17:07:12,579 - sync_service - INFO - Created variant mapping record for SKU: FG-0000223 in store: international
2025-09-28 17:07:13,112 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000223 in store: international
2025-09-28 17:07:13,599 - sync_service - INFO - Created product mapping record for product: 7465071247450 in store: international
2025-09-28 17:07:13,600 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:07:13,603 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465071247450 in store international
2025-09-28 17:07:14,520 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465071247450
2025-09-28 17:07:14,522 - sync_service - INFO - Product gid://shopify/Product/7465071411290 has 1 variants, is_single_variant: True
2025-09-28 17:07:14,525 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:07:14,526 - sync_service - INFO - Processing single variant product: Hera Earrings
2025-09-28 17:07:14,951 - sync_service - INFO - Created variant mapping record for SKU: FG-0000267 in store: international
2025-09-28 17:07:15,435 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000267 in store: international
2025-09-28 17:07:15,905 - sync_service - INFO - Created product mapping record for product: 7465071411290 in store: international
2025-09-28 17:07:15,907 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:07:15,909 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465071411290 in store international
2025-09-28 17:07:16,783 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465071411290
2025-09-28 17:07:16,785 - sync_service - INFO - Product gid://shopify/Product/7465071640666 has 1 variants, is_single_variant: True
2025-09-28 17:07:16,787 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:07:16,788 - sync_service - INFO - Processing single variant product: Harmonia Hoop
2025-09-28 17:07:17,090 - sync_service - INFO - Created variant mapping record for SKU: FG-0000225 in store: international
2025-09-28 17:07:17,455 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000225 in store: international
2025-09-28 17:07:17,751 - sync_service - INFO - Created product mapping record for product: 7465071640666 in store: international
2025-09-28 17:07:17,752 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:07:17,753 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465071640666 in store international
2025-09-28 17:07:18,763 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465071640666
2025-09-28 17:07:18,766 - sync_service - INFO - Product gid://shopify/Product/7465071771738 has 1 variants, is_single_variant: True
2025-09-28 17:07:18,767 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:07:18,767 - sync_service - INFO - Processing single variant product: Sulla Luna Mix Earrings
2025-09-28 17:07:19,283 - sync_service - INFO - Created variant mapping record for SKU: FG-0000077 in store: international
2025-09-28 17:07:19,569 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000077 in store: international
2025-09-28 17:07:19,934 - sync_service - INFO - Created product mapping record for product: 7465071771738 in store: international
2025-09-28 17:07:19,936 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:07:19,937 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465071771738 in store international
2025-09-28 17:07:20,846 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465071771738
2025-09-28 17:07:20,849 - sync_service - INFO - Product gid://shopify/Product/7465071902810 has 1 variants, is_single_variant: True
2025-09-28 17:07:20,850 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:07:20,851 - sync_service - INFO - Processing single variant product: Sulla Luna Earrings
2025-09-28 17:07:21,193 - sync_service - INFO - Created variant mapping record for SKU: FG-0000075 in store: international
2025-09-28 17:07:21,673 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000075 in store: international
2025-09-28 17:07:22,202 - sync_service - INFO - Created product mapping record for product: 7465071902810 in store: international
2025-09-28 17:07:22,204 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:07:22,205 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7465071902810 in store international
2025-09-28 17:07:23,694 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7465071902810
2025-09-28 17:07:23,697 - sync_service - INFO - Product gid://shopify/Product/7481860980826 has 3 variants, is_single_variant: False
2025-09-28 17:07:23,699 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:07:23,701 - sync_service - INFO - Processing multi-variant product: Essence Bangle with 3 variants
2025-09-28 17:07:24,531 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000618' and U_Shopify_Store eq 'international' - success
2025-09-28 17:07:25,319 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000619' and U_Shopify_Store eq 'international' - success
2025-09-28 17:07:26,065 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000620' and U_Shopify_Store eq 'international' - success
2025-09-28 17:07:26,067 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:07:26,360 - sync_service - INFO - Created product mapping record for product: 7481860980826 in store: international
2025-09-28 17:07:26,684 - sync_service - INFO - Created variant mapping record for SKU: FG-0000618 in store: international
2025-09-28 17:07:27,251 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000618 in store: international
2025-09-28 17:07:27,252 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:07:27,864 - sync_service - INFO - Created variant mapping record for SKU: FG-0000619 in store: international
2025-09-28 17:07:28,366 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000619 in store: international
2025-09-28 17:07:28,367 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:07:28,813 - sync_service - INFO - Created variant mapping record for SKU: FG-0000620 in store: international
2025-09-28 17:07:29,166 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000620 in store: international
2025-09-28 17:07:29,167 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:07:29,167 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7481860980826 in store international
2025-09-28 17:07:34,201 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7481860980826 (attempt 1/3): 
2025-09-28 17:07:34,202 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:07:41,086 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7481860980826
2025-09-28 17:07:41,087 - sync_service - INFO - Product gid://shopify/Product/7481861013594 has 3 variants, is_single_variant: False
2025-09-28 17:07:41,088 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:07:41,089 - sync_service - INFO - Processing multi-variant product: Horizon Bracelet with 3 variants
2025-09-28 17:07:41,653 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000621' and U_Shopify_Store eq 'international' - success
2025-09-28 17:07:42,248 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000622' and U_Shopify_Store eq 'international' - success
2025-09-28 17:07:42,831 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000623' and U_Shopify_Store eq 'international' - success
2025-09-28 17:07:42,833 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:07:43,111 - sync_service - INFO - Created product mapping record for product: 7481861013594 in store: international
2025-09-28 17:07:43,410 - sync_service - INFO - Created variant mapping record for SKU: FG-0000621 in store: international
2025-09-28 17:07:43,692 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000621 in store: international
2025-09-28 17:07:43,694 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:07:44,003 - sync_service - INFO - Created variant mapping record for SKU: FG-0000622 in store: international
2025-09-28 17:07:44,297 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000622 in store: international
2025-09-28 17:07:44,299 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:07:44,645 - sync_service - INFO - Created variant mapping record for SKU: FG-0000623 in store: international
2025-09-28 17:07:44,927 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000623 in store: international
2025-09-28 17:07:44,930 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:07:44,932 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7481861013594 in store international
2025-09-28 17:07:45,797 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7481861013594
2025-09-28 17:07:45,801 - sync_service - INFO - Product gid://shopify/Product/7481861046362 has 3 variants, is_single_variant: False
2025-09-28 17:07:45,804 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:07:45,805 - sync_service - INFO - Processing multi-variant product: Serenity Bangle with 3 variants
2025-09-28 17:07:46,387 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000624' and U_Shopify_Store eq 'international' - success
2025-09-28 17:07:46,969 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000625' and U_Shopify_Store eq 'international' - success
2025-09-28 17:07:47,556 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000627' and U_Shopify_Store eq 'international' - success
2025-09-28 17:07:47,559 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:07:47,866 - sync_service - INFO - Created product mapping record for product: 7481861046362 in store: international
2025-09-28 17:07:48,162 - sync_service - INFO - Created variant mapping record for SKU: FG-0000624 in store: international
2025-09-28 17:07:48,461 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000624 in store: international
2025-09-28 17:07:48,465 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:07:48,762 - sync_service - INFO - Created variant mapping record for SKU: FG-0000625 in store: international
2025-09-28 17:07:49,048 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000625 in store: international
2025-09-28 17:07:49,048 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:07:49,684 - sync_service - INFO - Created variant mapping record for SKU: FG-0000627 in store: international
2025-09-28 17:07:50,022 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000627 in store: international
2025-09-28 17:07:50,029 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:07:50,032 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7481861046362 in store international
2025-09-28 17:07:55,092 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7481861046362 (attempt 1/3): 
2025-09-28 17:07:55,094 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:07:57,975 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7481861046362
2025-09-28 17:07:57,977 - sync_service - INFO - Product gid://shopify/Product/7481861079130 has 3 variants, is_single_variant: False
2025-09-28 17:07:57,979 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:07:57,980 - sync_service - INFO - Processing multi-variant product: Serenity Bangle with 3 variants
2025-09-28 17:07:58,526 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000626' and U_Shopify_Store eq 'international' - success
2025-09-28 17:07:59,131 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000629' and U_Shopify_Store eq 'international' - success
2025-09-28 17:07:59,708 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000628' and U_Shopify_Store eq 'international' - success
2025-09-28 17:07:59,710 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:08:00,014 - sync_service - INFO - Created product mapping record for product: 7481861079130 in store: international
2025-09-28 17:08:00,314 - sync_service - INFO - Created variant mapping record for SKU: FG-0000626 in store: international
2025-09-28 17:08:00,616 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000626 in store: international
2025-09-28 17:08:00,618 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:08:00,900 - sync_service - INFO - Created variant mapping record for SKU: FG-0000629 in store: international
2025-09-28 17:08:01,188 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000629 in store: international
2025-09-28 17:08:01,189 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:08:01,472 - sync_service - INFO - Created variant mapping record for SKU: FG-0000628 in store: international
2025-09-28 17:08:01,750 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000628 in store: international
2025-09-28 17:08:01,751 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:08:01,751 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7481861079130 in store international
2025-09-28 17:08:02,595 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7481861079130
2025-09-28 17:08:02,598 - sync_service - INFO - Product gid://shopify/Product/7481861111898 has 1 variants, is_single_variant: True
2025-09-28 17:08:02,599 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:08:02,599 - sync_service - INFO - Processing single variant product: Multi-way Bliss Hoops
2025-09-28 17:08:02,883 - sync_service - INFO - Created variant mapping record for SKU: FG-0000631 in store: international
2025-09-28 17:08:03,183 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000631 in store: international
2025-09-28 17:08:03,530 - sync_service - INFO - Created product mapping record for product: 7481861111898 in store: international
2025-09-28 17:08:03,531 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:08:03,532 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7481861111898 in store international
2025-09-28 17:08:04,316 - sync_service - INFO - Created metafield custom.sap_sync = synced for product gid://shopify/Product/7481861111898
2025-09-28 17:08:04,317 - sync_service - INFO - Product gid://shopify/Product/7481861144666 has 1 variants, is_single_variant: True
2025-09-28 17:08:04,317 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:08:04,318 - sync_service - INFO - Processing single variant product: Multi-way Bliss Hoops
2025-09-28 17:08:04,618 - sync_service - INFO - Created variant mapping record for SKU: FG-0000630 in store: international
2025-09-28 17:08:04,909 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000630 in store: international
2025-09-28 17:08:05,194 - sync_service - INFO - Created product mapping record for product: 7481861144666 in store: international
2025-09-28 17:08:05,197 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:08:05,198 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7481861144666 in store international
2025-09-28 17:08:06,033 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7481861144666
2025-09-28 17:08:06,034 - sync_service - INFO - Product gid://shopify/Product/7481861275738 has 3 variants, is_single_variant: False
2025-09-28 17:08:06,036 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:08:06,037 - sync_service - INFO - Processing multi-variant product: Ember Earrings with 3 variants
2025-09-28 17:08:06,608 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000632' and U_Shopify_Store eq 'international' - success
2025-09-28 17:08:07,200 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000633' and U_Shopify_Store eq 'international' - success
2025-09-28 17:08:07,864 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000635' and U_Shopify_Store eq 'international' - success
2025-09-28 17:08:07,867 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:08:08,188 - sync_service - INFO - Created product mapping record for product: 7481861275738 in store: international
2025-09-28 17:08:08,515 - sync_service - INFO - Created variant mapping record for SKU: FG-0000632 in store: international
2025-09-28 17:08:08,800 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000632 in store: international
2025-09-28 17:08:08,800 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:08:09,097 - sync_service - INFO - Created variant mapping record for SKU: FG-0000633 in store: international
2025-09-28 17:08:09,374 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000633 in store: international
2025-09-28 17:08:09,376 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:08:09,683 - sync_service - INFO - Created variant mapping record for SKU: FG-0000635 in store: international
2025-09-28 17:08:09,970 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000635 in store: international
2025-09-28 17:08:09,973 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:08:09,976 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7481861275738 in store international
2025-09-28 17:08:13,842 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7481861275738
2025-09-28 17:08:13,844 - sync_service - INFO - Product gid://shopify/Product/7481861406810 has 3 variants, is_single_variant: False
2025-09-28 17:08:13,846 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:08:13,847 - sync_service - INFO - Processing multi-variant product: Ember Earrings with 3 variants
2025-09-28 17:08:14,935 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000634' and U_Shopify_Store eq 'international' - success
2025-09-28 17:08:15,593 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000637' and U_Shopify_Store eq 'international' - success
2025-09-28 17:08:16,643 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000636' and U_Shopify_Store eq 'international' - success
2025-09-28 17:08:16,646 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:08:16,988 - sync_service - INFO - Created product mapping record for product: 7481861406810 in store: international
2025-09-28 17:08:17,505 - sync_service - INFO - Created variant mapping record for SKU: FG-0000634 in store: international
2025-09-28 17:08:17,882 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000634 in store: international
2025-09-28 17:08:17,883 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:08:18,242 - sync_service - INFO - Created variant mapping record for SKU: FG-0000637 in store: international
2025-09-28 17:08:18,665 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000637 in store: international
2025-09-28 17:08:18,666 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:08:19,050 - sync_service - INFO - Created variant mapping record for SKU: FG-0000636 in store: international
2025-09-28 17:08:19,436 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000636 in store: international
2025-09-28 17:08:19,438 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:08:19,439 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7481861406810 in store international
2025-09-28 17:08:24,473 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7481861406810 (attempt 1/3): 
2025-09-28 17:08:24,475 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:08:31,700 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7481861406810
2025-09-28 17:08:31,704 - sync_service - INFO - Product gid://shopify/Product/7481861472346 has 3 variants, is_single_variant: False
2025-09-28 17:08:31,706 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:08:31,706 - sync_service - INFO - Processing multi-variant product: Essence Earrings with 3 variants
2025-09-28 17:08:32,778 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000638' and U_Shopify_Store eq 'international' - success
2025-09-28 17:08:34,151 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000639' and U_Shopify_Store eq 'international' - success
2025-09-28 17:08:35,048 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000641' and U_Shopify_Store eq 'international' - success
2025-09-28 17:08:35,049 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:08:35,365 - sync_service - INFO - Created product mapping record for product: 7481861472346 in store: international
2025-09-28 17:08:35,745 - sync_service - INFO - Created variant mapping record for SKU: FG-0000638 in store: international
2025-09-28 17:08:36,182 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000638 in store: international
2025-09-28 17:08:36,183 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:08:36,594 - sync_service - INFO - Created variant mapping record for SKU: FG-0000639 in store: international
2025-09-28 17:08:37,010 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000639 in store: international
2025-09-28 17:08:37,012 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:08:37,417 - sync_service - INFO - Created variant mapping record for SKU: FG-0000641 in store: international
2025-09-28 17:08:37,767 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000641 in store: international
2025-09-28 17:08:37,767 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:08:37,768 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7481861472346 in store international
2025-09-28 17:08:42,787 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7481861472346 (attempt 1/3): 
2025-09-28 17:08:42,791 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:08:49,617 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7481861472346
2025-09-28 17:08:49,620 - sync_service - INFO - Product gid://shopify/Product/7481861603418 has 3 variants, is_single_variant: False
2025-09-28 17:08:49,621 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:08:49,622 - sync_service - INFO - Processing multi-variant product: Essence Earrings with 3 variants
2025-09-28 17:08:50,581 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000640' and U_Shopify_Store eq 'international' - success
2025-09-28 17:08:51,417 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000643' and U_Shopify_Store eq 'international' - success
2025-09-28 17:08:52,231 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000642' and U_Shopify_Store eq 'international' - success
2025-09-28 17:08:52,234 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:08:52,761 - sync_service - INFO - Created product mapping record for product: 7481861603418 in store: international
2025-09-28 17:08:53,263 - sync_service - INFO - Created variant mapping record for SKU: FG-0000640 in store: international
2025-09-28 17:08:53,558 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000640 in store: international
2025-09-28 17:08:53,560 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:08:53,909 - sync_service - INFO - Created variant mapping record for SKU: FG-0000643 in store: international
2025-09-28 17:08:54,266 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000643 in store: international
2025-09-28 17:08:54,267 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:08:54,603 - sync_service - INFO - Created variant mapping record for SKU: FG-0000642 in store: international
2025-09-28 17:08:54,910 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000642 in store: international
2025-09-28 17:08:54,910 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:08:54,912 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7481861603418 in store international
2025-09-28 17:08:59,941 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7481861603418 (attempt 1/3): 
2025-09-28 17:08:59,943 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:09:06,980 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7481861603418
2025-09-28 17:09:06,983 - sync_service - INFO - Product gid://shopify/Product/7481861734490 has 3 variants, is_single_variant: False
2025-09-28 17:09:06,984 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:09:06,984 - sync_service - INFO - Processing multi-variant product: Nova Earrings with 3 variants
2025-09-28 17:09:07,567 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000653' and U_Shopify_Store eq 'international' - success
2025-09-28 17:09:08,246 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000654' and U_Shopify_Store eq 'international' - success
2025-09-28 17:09:08,843 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000655' and U_Shopify_Store eq 'international' - success
2025-09-28 17:09:08,847 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:09:09,147 - sync_service - INFO - Created product mapping record for product: 7481861734490 in store: international
2025-09-28 17:09:09,432 - sync_service - INFO - Created variant mapping record for SKU: FG-0000653 in store: international
2025-09-28 17:09:09,762 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000653 in store: international
2025-09-28 17:09:09,764 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:09:10,047 - sync_service - INFO - Created variant mapping record for SKU: FG-0000654 in store: international
2025-09-28 17:09:10,329 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000654 in store: international
2025-09-28 17:09:10,330 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:09:10,614 - sync_service - INFO - Created variant mapping record for SKU: FG-0000655 in store: international
2025-09-28 17:09:10,897 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000655 in store: international
2025-09-28 17:09:10,898 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:09:10,899 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7481861734490 in store international
2025-09-28 17:09:11,751 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7481861734490
2025-09-28 17:09:11,754 - sync_service - INFO - Product gid://shopify/Product/7481861865562 has 3 variants, is_single_variant: False
2025-09-28 17:09:11,756 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:09:11,757 - sync_service - INFO - Processing multi-variant product: Serenity Earrings with 3 variants
2025-09-28 17:09:12,382 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000656' and U_Shopify_Store eq 'international' - success
2025-09-28 17:09:12,977 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000657' and U_Shopify_Store eq 'international' - success
2025-09-28 17:09:13,518 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000659' and U_Shopify_Store eq 'international' - success
2025-09-28 17:09:13,521 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:09:13,800 - sync_service - INFO - Created product mapping record for product: 7481861865562 in store: international
2025-09-28 17:09:14,088 - sync_service - INFO - Created variant mapping record for SKU: FG-0000656 in store: international
2025-09-28 17:09:14,379 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000656 in store: international
2025-09-28 17:09:14,382 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:09:14,672 - sync_service - INFO - Created variant mapping record for SKU: FG-0000657 in store: international
2025-09-28 17:09:14,961 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000657 in store: international
2025-09-28 17:09:14,963 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:09:15,241 - sync_service - INFO - Created variant mapping record for SKU: FG-0000659 in store: international
2025-09-28 17:09:15,543 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000659 in store: international
2025-09-28 17:09:15,545 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:09:15,547 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7481861865562 in store international
2025-09-28 17:09:20,579 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7481861865562 (attempt 1/3): 
2025-09-28 17:09:20,580 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:09:27,517 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7481861865562
2025-09-28 17:09:27,518 - sync_service - INFO - Product gid://shopify/Product/7481862062170 has 3 variants, is_single_variant: False
2025-09-28 17:09:27,520 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:09:27,521 - sync_service - INFO - Processing multi-variant product: Serenity Earrings with 3 variants
2025-09-28 17:09:28,114 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000658' and U_Shopify_Store eq 'international' - success
2025-09-28 17:09:28,731 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000661' and U_Shopify_Store eq 'international' - success
2025-09-28 17:09:29,395 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000660' and U_Shopify_Store eq 'international' - success
2025-09-28 17:09:29,399 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:09:29,694 - sync_service - INFO - Created product mapping record for product: 7481862062170 in store: international
2025-09-28 17:09:30,143 - sync_service - INFO - Created variant mapping record for SKU: FG-0000658 in store: international
2025-09-28 17:09:30,428 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000658 in store: international
2025-09-28 17:09:30,430 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:09:30,716 - sync_service - INFO - Created variant mapping record for SKU: FG-0000661 in store: international
2025-09-28 17:09:31,000 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000661 in store: international
2025-09-28 17:09:31,001 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:09:31,333 - sync_service - INFO - Created variant mapping record for SKU: FG-0000660 in store: international
2025-09-28 17:09:31,629 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000660 in store: international
2025-09-28 17:09:31,631 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:09:31,632 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7481862062170 in store international
2025-09-28 17:09:32,428 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7481862062170
2025-09-28 17:09:32,431 - sync_service - INFO - Product gid://shopify/Product/7481862258778 has 3 variants, is_single_variant: False
2025-09-28 17:09:32,432 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:09:32,432 - sync_service - INFO - Processing multi-variant product: Solara Earrings with 3 variants
2025-09-28 17:09:32,983 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000662' and U_Shopify_Store eq 'international' - success
2025-09-28 17:09:33,567 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000664' and U_Shopify_Store eq 'international' - success
2025-09-28 17:09:34,233 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000663' and U_Shopify_Store eq 'international' - success
2025-09-28 17:09:34,234 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:09:34,532 - sync_service - INFO - Created product mapping record for product: 7481862258778 in store: international
2025-09-28 17:09:34,832 - sync_service - INFO - Created variant mapping record for SKU: FG-0000662 in store: international
2025-09-28 17:09:35,117 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000662 in store: international
2025-09-28 17:09:35,117 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:09:35,398 - sync_service - INFO - Created variant mapping record for SKU: FG-0000664 in store: international
2025-09-28 17:09:35,817 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000664 in store: international
2025-09-28 17:09:35,818 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:09:36,143 - sync_service - INFO - Created variant mapping record for SKU: FG-0000663 in store: international
2025-09-28 17:09:36,437 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000663 in store: international
2025-09-28 17:09:36,440 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:09:36,442 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7481862258778 in store international
2025-09-28 17:09:41,473 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7481862258778 (attempt 1/3): 
2025-09-28 17:09:41,475 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:09:44,314 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7481862258778
2025-09-28 17:09:44,315 - sync_service - INFO - Product gid://shopify/Product/7481862455386 has 1 variants, is_single_variant: True
2025-09-28 17:09:44,316 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:09:44,316 - sync_service - INFO - Processing single variant product: Vault Earcuff
2025-09-28 17:09:44,601 - sync_service - INFO - Created variant mapping record for SKU: FG-0000665 in store: international
2025-09-28 17:09:44,883 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000665 in store: international
2025-09-28 17:09:45,166 - sync_service - INFO - Created product mapping record for product: 7481862455386 in store: international
2025-09-28 17:09:45,167 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:09:45,168 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7481862455386 in store international
2025-09-28 17:09:45,975 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7481862455386
2025-09-28 17:09:45,978 - sync_service - INFO - Product gid://shopify/Product/7481862651994 has 1 variants, is_single_variant: True
2025-09-28 17:09:45,980 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:09:45,981 - sync_service - INFO - Processing single variant product: Vault Earcuff
2025-09-28 17:09:46,266 - sync_service - INFO - Created variant mapping record for SKU: FG-0000666 in store: international
2025-09-28 17:09:46,548 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000666 in store: international
2025-09-28 17:09:46,833 - sync_service - INFO - Created product mapping record for product: 7481862651994 in store: international
2025-09-28 17:09:46,833 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:09:46,834 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7481862651994 in store international
2025-09-28 17:09:47,631 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7481862651994
2025-09-28 17:09:47,632 - sync_service - INFO - Product gid://shopify/Product/7481862815834 has 3 variants, is_single_variant: False
2025-09-28 17:09:47,633 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:09:47,633 - sync_service - INFO - Processing multi-variant product: Eclipse Necklace with 3 variants
2025-09-28 17:09:48,193 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000667' and U_Shopify_Store eq 'international' - success
2025-09-28 17:09:48,760 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000668' and U_Shopify_Store eq 'international' - success
2025-09-28 17:09:49,313 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000669' and U_Shopify_Store eq 'international' - success
2025-09-28 17:09:49,328 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:09:49,635 - sync_service - INFO - Created product mapping record for product: 7481862815834 in store: international
2025-09-28 17:09:49,931 - sync_service - INFO - Created variant mapping record for SKU: FG-0000667 in store: international
2025-09-28 17:09:50,231 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000667 in store: international
2025-09-28 17:09:50,232 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:09:50,511 - sync_service - INFO - Created variant mapping record for SKU: FG-0000668 in store: international
2025-09-28 17:09:50,816 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000668 in store: international
2025-09-28 17:09:50,817 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:09:51,106 - sync_service - INFO - Created variant mapping record for SKU: FG-0000669 in store: international
2025-09-28 17:09:51,386 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000669 in store: international
2025-09-28 17:09:51,387 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:09:51,388 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7481862815834 in store international
2025-09-28 17:09:55,549 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7481862815834
2025-09-28 17:09:55,550 - sync_service - INFO - Product gid://shopify/Product/7481863012442 has 3 variants, is_single_variant: False
2025-09-28 17:09:55,550 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:09:55,552 - sync_service - INFO - Processing multi-variant product: Ember Necklace with 3 variants
2025-09-28 17:09:56,110 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000670' and U_Shopify_Store eq 'international' - success
2025-09-28 17:09:56,667 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000671' and U_Shopify_Store eq 'international' - success
2025-09-28 17:09:57,229 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000673' and U_Shopify_Store eq 'international' - success
2025-09-28 17:09:57,231 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:09:57,512 - sync_service - INFO - Created product mapping record for product: 7481863012442 in store: international
2025-09-28 17:09:57,823 - sync_service - INFO - Created variant mapping record for SKU: FG-0000670 in store: international
2025-09-28 17:09:58,312 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000670 in store: international
2025-09-28 17:09:58,314 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:09:58,643 - sync_service - INFO - Created variant mapping record for SKU: FG-0000671 in store: international
2025-09-28 17:09:58,948 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000671 in store: international
2025-09-28 17:09:58,948 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:09:59,308 - sync_service - INFO - Created variant mapping record for SKU: FG-0000673 in store: international
2025-09-28 17:09:59,593 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000673 in store: international
2025-09-28 17:09:59,594 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:09:59,598 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7481863012442 in store international
2025-09-28 17:10:04,617 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7481863012442 (attempt 1/3): 
2025-09-28 17:10:04,618 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:10:11,424 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7481863012442
2025-09-28 17:10:11,427 - sync_service - INFO - Product gid://shopify/Product/7481863176282 has 3 variants, is_single_variant: False
2025-09-28 17:10:11,429 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:10:11,431 - sync_service - INFO - Processing multi-variant product: Ember Necklace with 3 variants
2025-09-28 17:10:11,994 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000672' and U_Shopify_Store eq 'international' - success
2025-09-28 17:10:12,578 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000675' and U_Shopify_Store eq 'international' - success
2025-09-28 17:10:13,151 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000674' and U_Shopify_Store eq 'international' - success
2025-09-28 17:10:13,152 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:10:13,439 - sync_service - INFO - Created product mapping record for product: 7481863176282 in store: international
2025-09-28 17:10:13,758 - sync_service - INFO - Created variant mapping record for SKU: FG-0000672 in store: international
2025-09-28 17:10:14,061 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000672 in store: international
2025-09-28 17:10:14,063 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:10:14,354 - sync_service - INFO - Created variant mapping record for SKU: FG-0000675 in store: international
2025-09-28 17:10:14,676 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000675 in store: international
2025-09-28 17:10:14,677 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:10:15,013 - sync_service - INFO - Created variant mapping record for SKU: FG-0000674 in store: international
2025-09-28 17:10:15,366 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000674 in store: international
2025-09-28 17:10:15,366 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:10:15,367 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7481863176282 in store international
2025-09-28 17:10:16,131 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7481863176282
2025-09-28 17:10:16,132 - sync_service - INFO - Product gid://shopify/Product/7481863405658 has 3 variants, is_single_variant: False
2025-09-28 17:10:16,133 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:10:16,134 - sync_service - INFO - Processing multi-variant product: Horizon Necklace with 3 variants
2025-09-28 17:10:16,775 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000679' and U_Shopify_Store eq 'international' - success
2025-09-28 17:10:17,533 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000680' and U_Shopify_Store eq 'international' - success
2025-09-28 17:10:18,175 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000681' and U_Shopify_Store eq 'international' - success
2025-09-28 17:10:18,178 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:10:18,532 - sync_service - INFO - Created product mapping record for product: 7481863405658 in store: international
2025-09-28 17:10:18,858 - sync_service - INFO - Created variant mapping record for SKU: FG-0000679 in store: international
2025-09-28 17:10:19,143 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000679 in store: international
2025-09-28 17:10:19,146 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:10:19,500 - sync_service - INFO - Created variant mapping record for SKU: FG-0000680 in store: international
2025-09-28 17:10:19,784 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000680 in store: international
2025-09-28 17:10:19,784 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:10:20,074 - sync_service - INFO - Created variant mapping record for SKU: FG-0000681 in store: international
2025-09-28 17:10:20,368 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000681 in store: international
2025-09-28 17:10:20,369 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:10:20,370 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7481863405658 in store international
2025-09-28 17:10:21,392 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7481863405658
2025-09-28 17:10:21,394 - sync_service - INFO - Product gid://shopify/Product/7481863602266 has 2 variants, is_single_variant: False
2025-09-28 17:10:21,395 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:10:21,395 - sync_service - INFO - Processing multi-variant product: Multi-way Halo Ring with 2 variants
2025-09-28 17:10:21,944 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000699' and U_Shopify_Store eq 'international' - success
2025-09-28 17:10:22,501 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000687' and U_Shopify_Store eq 'international' - success
2025-09-28 17:10:22,504 - sync_service - INFO - Processing 2 unsynced variants out of 2 total variants
2025-09-28 17:10:22,784 - sync_service - INFO - Created product mapping record for product: 7481863602266 in store: international
2025-09-28 17:10:23,067 - sync_service - INFO - Created variant mapping record for SKU: FG-0000699 in store: international
2025-09-28 17:10:23,351 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000699 in store: international
2025-09-28 17:10:23,352 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:10:23,639 - sync_service - INFO - Created variant mapping record for SKU: FG-0000687 in store: international
2025-09-28 17:10:23,935 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000687 in store: international
2025-09-28 17:10:23,936 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:10:23,938 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7481863602266 in store international
2025-09-28 17:10:28,964 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7481863602266 (attempt 1/3): 
2025-09-28 17:10:28,965 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:10:32,224 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7481863602266
2025-09-28 17:10:32,227 - sync_service - INFO - Product gid://shopify/Product/7481863798874 has 2 variants, is_single_variant: False
2025-09-28 17:10:32,229 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:10:32,230 - sync_service - INFO - Processing multi-variant product: Multi-way Halo Ring with 2 variants
2025-09-28 17:10:32,784 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000700' and U_Shopify_Store eq 'international' - success
2025-09-28 17:10:33,372 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000688' and U_Shopify_Store eq 'international' - success
2025-09-28 17:10:33,376 - sync_service - INFO - Processing 2 unsynced variants out of 2 total variants
2025-09-28 17:10:33,666 - sync_service - INFO - Created product mapping record for product: 7481863798874 in store: international
2025-09-28 17:10:33,953 - sync_service - INFO - Created variant mapping record for SKU: FG-0000700 in store: international
2025-09-28 17:10:34,233 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000700 in store: international
2025-09-28 17:10:34,233 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:10:34,517 - sync_service - INFO - Created variant mapping record for SKU: FG-0000688 in store: international
2025-09-28 17:10:34,809 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000688 in store: international
2025-09-28 17:10:34,810 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:10:34,812 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7481863798874 in store international
2025-09-28 17:10:35,766 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7481863798874
2025-09-28 17:10:35,767 - sync_service - INFO - Product gid://shopify/Product/7481863995482 has 6 variants, is_single_variant: False
2025-09-28 17:10:35,768 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:10:35,768 - sync_service - INFO - Processing multi-variant product: Ember Ring with 6 variants
2025-09-28 17:10:36,343 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000689' and U_Shopify_Store eq 'international' - success
2025-09-28 17:10:36,895 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000697' and U_Shopify_Store eq 'international' - success
2025-09-28 17:10:37,451 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000686' and U_Shopify_Store eq 'international' - success
2025-09-28 17:10:38,030 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000696' and U_Shopify_Store eq 'international' - success
2025-09-28 17:10:38,582 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000698' and U_Shopify_Store eq 'international' - success
2025-09-28 17:10:39,132 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000695' and U_Shopify_Store eq 'international' - success
2025-09-28 17:10:39,133 - sync_service - INFO - Processing 6 unsynced variants out of 6 total variants
2025-09-28 17:10:39,410 - sync_service - INFO - Created product mapping record for product: 7481863995482 in store: international
2025-09-28 17:10:39,694 - sync_service - INFO - Created variant mapping record for SKU: FG-0000689 in store: international
2025-09-28 17:10:39,978 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000689 in store: international
2025-09-28 17:10:39,981 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:10:40,266 - sync_service - INFO - Created variant mapping record for SKU: FG-0000697 in store: international
2025-09-28 17:10:40,567 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000697 in store: international
2025-09-28 17:10:40,568 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:10:40,908 - sync_service - INFO - Created variant mapping record for SKU: FG-0000686 in store: international
2025-09-28 17:10:41,193 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000686 in store: international
2025-09-28 17:10:41,196 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:10:41,481 - sync_service - INFO - Created variant mapping record for SKU: FG-0000696 in store: international
2025-09-28 17:10:41,759 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000696 in store: international
2025-09-28 17:10:41,761 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:10:42,227 - sync_service - INFO - Created variant mapping record for SKU: FG-0000698 in store: international
2025-09-28 17:10:42,627 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000698 in store: international
2025-09-28 17:10:42,630 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:10:42,913 - sync_service - INFO - Created variant mapping record for SKU: FG-0000695 in store: international
2025-09-28 17:10:43,318 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000695 in store: international
2025-09-28 17:10:43,320 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:10:43,321 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7481863995482 in store international
2025-09-28 17:10:46,694 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7481863995482
2025-09-28 17:10:46,698 - sync_service - INFO - Product gid://shopify/Product/7481864159322 has 6 variants, is_single_variant: False
2025-09-28 17:10:46,699 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:10:46,700 - sync_service - INFO - Processing multi-variant product: Ember Ring with 6 variants
2025-09-28 17:10:47,599 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000689' and U_Shopify_Store eq 'international' - success
2025-09-28 17:10:47,600 - sync_service - INFO - Variant with SKU FG-0000689 is already synced, skipping
2025-09-28 17:10:48,253 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000692' and U_Shopify_Store eq 'international' - success
2025-09-28 17:10:48,911 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000686' and U_Shopify_Store eq 'international' - success
2025-09-28 17:10:48,914 - sync_service - INFO - Variant with SKU FG-0000686 is already synced, skipping
2025-09-28 17:10:49,513 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000691' and U_Shopify_Store eq 'international' - success
2025-09-28 17:10:50,074 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000694' and U_Shopify_Store eq 'international' - success
2025-09-28 17:10:50,630 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000693' and U_Shopify_Store eq 'international' - success
2025-09-28 17:10:50,631 - sync_service - INFO - Processing 4 unsynced variants out of 6 total variants
2025-09-28 17:10:51,032 - sync_service - INFO - Created product mapping record for product: 7481864159322 in store: international
2025-09-28 17:10:51,480 - sync_service - INFO - Created variant mapping record for SKU: FG-0000692 in store: international
2025-09-28 17:10:51,794 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000692 in store: international
2025-09-28 17:10:51,798 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:10:52,293 - sync_service - INFO - Created variant mapping record for SKU: FG-0000691 in store: international
2025-09-28 17:10:52,610 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000691 in store: international
2025-09-28 17:10:52,611 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:10:52,951 - sync_service - INFO - Created variant mapping record for SKU: FG-0000694 in store: international
2025-09-28 17:10:53,374 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000694 in store: international
2025-09-28 17:10:53,424 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:10:53,762 - sync_service - INFO - Created variant mapping record for SKU: FG-0000693 in store: international
2025-09-28 17:10:54,066 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000693 in store: international
2025-09-28 17:10:54,066 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:10:54,067 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7481864159322 in store international
2025-09-28 17:10:59,095 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7481864159322 (attempt 1/3): 
2025-09-28 17:10:59,098 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:11:06,165 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7481864159322
2025-09-28 17:11:06,166 - sync_service - INFO - Product gid://shopify/Product/7496429371482 has 3 variants, is_single_variant: False
2025-09-28 17:11:06,167 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:11:06,167 - sync_service - INFO - Processing multi-variant product: Solara Necklace with 3 variants
2025-09-28 17:11:06,167 - sync_service - WARNING - Variant gid://shopify/ProductVariant/42000242540634 has no SKU, including in unsynced list
2025-09-28 17:11:06,168 - sync_service - WARNING - Variant gid://shopify/ProductVariant/42000242573402 has no SKU, including in unsynced list
2025-09-28 17:11:06,169 - sync_service - WARNING - Variant gid://shopify/ProductVariant/42000242606170 has no SKU, including in unsynced list
2025-09-28 17:11:06,170 - sync_service - INFO - Processing 3 unsynced variants out of 3 total variants
2025-09-28 17:11:06,467 - sync_service - INFO - Created product mapping record for product: 7496429371482 in store: international
2025-09-28 17:11:06,468 - sync_service - WARNING - Variant gid://shopify/ProductVariant/42000242540634 has no SKU, skipping
2025-09-28 17:11:06,468 - sync_service - WARNING - Variant gid://shopify/ProductVariant/42000242573402 has no SKU, skipping
2025-09-28 17:11:06,470 - sync_service - WARNING - Variant gid://shopify/ProductVariant/42000242606170 has no SKU, skipping
2025-09-28 17:11:06,470 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7496429371482 in store international
2025-09-28 17:11:07,597 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7496429371482
2025-09-28 17:11:07,599 - sync_service - INFO - Product gid://shopify/Product/7506688770138 has 2 variants, is_single_variant: False
2025-09-28 17:11:07,600 - sync_service - INFO - Processing product in store: international - SAP field updates: disabled
2025-09-28 17:11:07,600 - sync_service - INFO - Processing multi-variant product: Flare Earrings with 2 variants
2025-09-28 17:11:08,167 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000645' and U_Shopify_Store eq 'international' - success
2025-09-28 17:11:08,784 - sync_service - INFO - API log added to SAP: sap - U_SHOPIFY_MAPPING_2?$filter=U_SAP_Code eq 'FG-0000644' and U_Shopify_Store eq 'international' - success
2025-09-28 17:11:08,787 - sync_service - INFO - Processing 2 unsynced variants out of 2 total variants
2025-09-28 17:11:09,098 - sync_service - INFO - Created product mapping record for product: 7506688770138 in store: international
2025-09-28 17:11:09,384 - sync_service - INFO - Created variant mapping record for SKU: FG-0000645 in store: international
2025-09-28 17:11:09,698 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000645 in store: international
2025-09-28 17:11:09,699 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:11:09,985 - sync_service - INFO - Created variant mapping record for SKU: FG-0000644 in store: international
2025-09-28 17:11:10,281 - sync_service - INFO - Created inventory mapping record for SKU: FG-0000644 in store: international
2025-09-28 17:11:10,281 - sync_service - INFO - Skipping SAP item field updates for international store: international
2025-09-28 17:11:10,282 - sync_service - INFO - Setting metafield custom.sap_sync = synced for product gid://shopify/Product/7506688770138 in store international
2025-09-28 17:11:15,302 - sync_service - WARNING - Error setting metafield custom.sap_sync for product gid://shopify/Product/7506688770138 (attempt 1/3): 
2025-09-28 17:11:15,306 - sync_service - INFO - Retrying in 2 seconds...
2025-09-28 17:11:18,147 - sync_service - INFO - Updated metafield custom.sap_sync = synced for product gid://shopify/Product/7506688770138
2025-09-28 17:11:18,148 - sync_service - INFO - Completed initialization for store international
2025-09-28 17:11:18,149 - sync_service - INFO - Shopify items initialization completed successfully
2025-09-29 10:24:23,737 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-29 10:24:23,826 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-29 10:24:23,830 - sync_service - INFO - Starting stock change sync...
2025-09-29 10:24:23,834 - sync_service - INFO - Starting stock change sync using MASHURA_StockChangeB1SLQuery view
2025-09-29 10:24:23,835 - sync_service - INFO - Processing inventory changes for store: local
2025-09-29 10:24:24,876 - sync_service - INFO - SAP login successful
2025-09-29 10:24:27,983 - sync_service - INFO - SAP logging client login successful
2025-09-29 10:24:29,614 - sync_service - INFO - API log added to SAP: sap - view.svc/MASHURA_StockChangeB1SLQuery?$filter=Shopify_Store eq 'local' - success
2025-09-29 10:24:29,615 - sync_service - INFO - Processing 10 inventory changes for store local
2025-09-29 10:24:29,616 - sync_service - INFO - Updating inventory for item FG-0000714 (variant 44545425965122) at location 70074957890
2025-09-29 10:24:29,617 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': {'location_id': '70074957890', 'inventory_item_id': '44545425965122', 'available': 5}, 'response': None, 'status': None}
2025-09-29 10:24:30,373 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': None, 'response': {'inventory_level': {'inventory_item_id': 44545425965122, 'location_id': 70074957890, 'available': 5, 'updated_at': '2025-09-29T10:24:30+03:00', 'admin_graphql_api_id': 'gid://shopify/InventoryLevel/104603189314?inventory_item_id=44545425965122'}}, 'status': 'success'}
2025-09-29 10:24:32,033 - sync_service - INFO - API log added to SAP: shopify - inventory_levels - success
2025-09-29 10:24:32,144 - sync_service - INFO - Updating inventory for item FG-0000714 (variant 44545425965122) at location 70074990658
2025-09-29 10:24:32,147 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': {'location_id': '70074990658', 'inventory_item_id': '44545425965122', 'available': 5}, 'response': None, 'status': None}
2025-09-29 10:24:32,714 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': None, 'response': {'inventory_level': {'inventory_item_id': 44545425965122, 'location_id': 70074990658, 'available': 5, 'updated_at': '2025-09-29T10:24:32+03:00', 'admin_graphql_api_id': 'gid://shopify/InventoryLevel/104603222082?inventory_item_id=44545425965122'}}, 'status': 'success'}
2025-09-29 10:24:34,368 - sync_service - INFO - API log added to SAP: shopify - inventory_levels - success
2025-09-29 10:24:34,475 - sync_service - INFO - Updating inventory for item FG-0000714 (variant 44545425965122) at location 72406990914
2025-09-29 10:24:34,478 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': {'location_id': '72406990914', 'inventory_item_id': '44545425965122', 'available': 5}, 'response': None, 'status': None}
2025-09-29 10:24:41,441 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': None, 'response': {'inventory_level': {'inventory_item_id': 44545425965122, 'location_id': 72406990914, 'available': 5, 'updated_at': '2025-09-29T10:24:41+03:00', 'admin_graphql_api_id': 'gid://shopify/InventoryLevel/107004756034?inventory_item_id=44545425965122'}}, 'status': 'success'}
2025-09-29 10:24:43,246 - sync_service - INFO - API log added to SAP: shopify - inventory_levels - success
2025-09-29 10:24:43,363 - sync_service - INFO - Updating inventory for item FG-0000714 (variant 44545425965122) at location 72407023682
2025-09-29 10:24:43,365 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': {'location_id': '72407023682', 'inventory_item_id': '44545425965122', 'available': 5}, 'response': None, 'status': None}
2025-09-29 10:24:43,915 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': None, 'response': {'inventory_level': {'inventory_item_id': 44545425965122, 'location_id': 72407023682, 'available': 5, 'updated_at': '2025-09-29T10:24:43+03:00', 'admin_graphql_api_id': 'gid://shopify/InventoryLevel/107004788802?inventory_item_id=44545425965122'}}, 'status': 'success'}
2025-09-29 10:24:45,463 - sync_service - INFO - API log added to SAP: shopify - inventory_levels - success
2025-09-29 10:24:45,574 - sync_service - INFO - Updating inventory for item FG-0000714 (variant 44545425965122) at location 70074892354
2025-09-29 10:24:45,577 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': {'location_id': '70074892354', 'inventory_item_id': '44545425965122', 'available': 93}, 'response': None, 'status': None}
2025-09-29 10:24:46,061 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': None, 'response': {'inventory_level': {'inventory_item_id': 44545425965122, 'location_id': 70074892354, 'available': 93, 'updated_at': '2025-09-29T10:24:46+03:00', 'admin_graphql_api_id': 'gid://shopify/InventoryLevel/104603123778?inventory_item_id=44545425965122'}}, 'status': 'success'}
2025-09-29 10:24:47,500 - sync_service - INFO - API log added to SAP: shopify - inventory_levels - success
2025-09-29 10:24:47,615 - sync_service - INFO - Updating inventory for item FG-0000715 (variant 44487837089858) at location 70074892354
2025-09-29 10:24:47,618 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': {'location_id': '70074892354', 'inventory_item_id': '44487837089858', 'available': 5}, 'response': None, 'status': None}
2025-09-29 10:24:55,000 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': None, 'response': {'inventory_level': {'inventory_item_id': 44487837089858, 'location_id': 70074892354, 'available': 5, 'updated_at': '2025-09-29T10:24:55+03:00', 'admin_graphql_api_id': 'gid://shopify/InventoryLevel/104603123778?inventory_item_id=44487837089858'}}, 'status': 'success'}
2025-09-29 10:24:56,507 - sync_service - INFO - API log added to SAP: shopify - inventory_levels - success
2025-09-29 10:24:56,626 - sync_service - INFO - Updating inventory for item FG-0000715 (variant 44487837089858) at location 70074957890
2025-09-29 10:24:56,628 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': {'location_id': '70074957890', 'inventory_item_id': '44487837089858', 'available': 5}, 'response': None, 'status': None}
2025-09-29 10:24:57,185 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': None, 'response': {'inventory_level': {'inventory_item_id': 44487837089858, 'location_id': 70074957890, 'available': 5, 'updated_at': '2025-09-29T10:24:57+03:00', 'admin_graphql_api_id': 'gid://shopify/InventoryLevel/104603189314?inventory_item_id=44487837089858'}}, 'status': 'success'}
2025-09-29 10:24:58,289 - sync_service - INFO - API log added to SAP: shopify - inventory_levels - success
2025-09-29 10:24:58,407 - sync_service - INFO - Updating inventory for item FG-0000715 (variant 44487837089858) at location 70074990658
2025-09-29 10:24:58,410 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': {'location_id': '70074990658', 'inventory_item_id': '44487837089858', 'available': 5}, 'response': None, 'status': None}
2025-09-29 10:24:58,917 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': None, 'response': {'inventory_level': {'inventory_item_id': 44487837089858, 'location_id': 70074990658, 'available': 5, 'updated_at': '2025-09-29T10:24:58+03:00', 'admin_graphql_api_id': 'gid://shopify/InventoryLevel/104603222082?inventory_item_id=44487837089858'}}, 'status': 'success'}
2025-09-29 10:24:59,206 - sync_service - INFO - API log added to SAP: shopify - inventory_levels - success
2025-09-29 10:24:59,317 - sync_service - INFO - Updating inventory for item FG-0000715 (variant 44487837089858) at location 72406990914
2025-09-29 10:24:59,318 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': {'location_id': '72406990914', 'inventory_item_id': '44487837089858', 'available': 5}, 'response': None, 'status': None}
2025-09-29 10:24:59,858 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': None, 'response': {'inventory_level': {'inventory_item_id': 44487837089858, 'location_id': 72406990914, 'available': 5, 'updated_at': '2025-09-29T10:24:59+03:00', 'admin_graphql_api_id': 'gid://shopify/InventoryLevel/107004756034?inventory_item_id=44487837089858'}}, 'status': 'success'}
2025-09-29 10:25:00,159 - sync_service - INFO - API log added to SAP: shopify - inventory_levels - success
2025-09-29 10:25:00,269 - sync_service - INFO - Updating inventory for item FG-0000715 (variant 44487837089858) at location 72407023682
2025-09-29 10:25:00,275 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': {'location_id': '72407023682', 'inventory_item_id': '44487837089858', 'available': 5}, 'response': None, 'status': None}
2025-09-29 10:25:11,942 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': None, 'response': {'inventory_level': {'inventory_item_id': 44487837089858, 'location_id': 72407023682, 'available': 5, 'updated_at': '2025-09-29T10:25:11+03:00', 'admin_graphql_api_id': 'gid://shopify/InventoryLevel/107004788802?inventory_item_id=44487837089858'}}, 'status': 'success'}
2025-09-29 10:25:12,239 - sync_service - INFO - API log added to SAP: shopify - inventory_levels - success
2025-09-29 10:25:12,356 - sync_service - INFO - Stock change sync completed: 10 processed, 10 successful, 0 errors
2025-09-29 12:18:52,318 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-29 12:18:52,390 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-29 12:19:48,649 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-29 12:19:48,669 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-29 12:19:48,671 - sync_service - INFO - Starting all syncs...
2025-09-29 12:19:48,672 - sync_service - INFO - Starting stock change sync...
2025-09-29 12:19:48,673 - sync_service - INFO - Starting stock change sync using MASHURA_StockChangeB1SLQuery view
2025-09-29 12:19:48,674 - sync_service - INFO - Processing inventory changes for store: local
2025-09-29 12:20:09,728 - sync_service - ERROR - SAP login error: All connection attempts failed
2025-09-29 12:20:09,730 - sync_service - ERROR - Failed to fetch stock changes for store local: Failed to login to SAP
2025-09-29 12:20:09,731 - sync_service - INFO - Stock change sync completed: 0 processed, 0 successful, 0 errors
2025-09-29 12:20:09,732 - sync_service - INFO - Starting sales orders sync...
2025-09-29 12:20:09,732 - sync_service - INFO - Starting orders sync...
2025-09-29 12:20:09,733 - sync_service - INFO - Fetching orders with filter: tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10
2025-09-29 12:20:09,733 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-29 12:20:09,734 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: false, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        subtotalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        totalShippingPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Discounts applied ---\n                        discountApplications(first: 10) {\n                        edges {\n                            node {\n                            targetType        # ORDER or LINE_ITEM\n                            allocationMethod  # ACROSS / EACH / ONE\n                            value {\n                                __typename\n                                ... on PricingPercentageValue {\n                                percentage\n                                }\n                                ... on MoneyV2 {\n                                amount\n                                currencyCode\n                                }\n                            }\n                            ... on DiscountCodeApplication {\n                                code\n                            }\n                            ... on AutomaticDiscountApplication {\n                                title\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n                        \n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n                        shippingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n                        billingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n\n                        # --- Line Items with Discount Allocations ---\n                        lineItems(first: 50) {\n                        edges {\n                            node {\n                            id\n                            name\n                            quantity\n                            sku\n                            originalUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountedUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountAllocations {\n                                allocatedAmount {\n                                    amount\n                                    currencyCode\n                                }\n                                discountApplication {\n                                    __typename\n                                    ... on AutomaticDiscountApplication {\n                                        title\n                                    }\n                                    ... on DiscountCodeApplication {\n                                        code\n                                    }\n                                }\n                            }\n                            variant {\n                                id\n                                sku\n                                price\n                                compareAtPrice\n                                product {\n                                id\n                                title\n                                }\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Transactions (Gift cards show up here as gateway = "gift_card") ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson   # contains gift_card_id, last_characters etc if gift card used\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n\n            ', 'variables': {'first': 10, 'after': None, 'query': 'tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-09-29 12:20:10,520 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [{'node': {'id': 'gid://shopify/Order/6420422131778', 'name': '#1710', 'createdAt': '2025-09-29T07:56:31Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '70074892354-1-1010', 'totalPriceSet': {'shopMoney': {'amount': '5008.5', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '5008.5', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'firstName': 'Nora', 'lastName': 'Maged', 'email': 'testawy@test.net', 'phone': '+201005528282', 'addresses': []}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072626208834', 'name': 'MM Watch - Blue', 'quantity': 1, 'sku': 'FG-0000715', 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42387257458754', 'sku': 'FG-0000715', 'price': '5000.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7527948386370', 'title': 'MM Watch'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072626241602', 'name': 'Iron Man Necklace - Blue', 'quantity': 1, 'sku': 'FG-0000714', 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8216980783170', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '5008.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T07:56:30Z', 'receiptJson': '{}'}]}}, {'node': {'id': 'gid://shopify/Order/6420425900098', 'name': '#1711', 'createdAt': '2025-09-29T08:01:14Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '70074892354-1-1012', 'totalPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'firstName': 'Nora', 'lastName': 'Maged', 'email': 'testawy@test.net', 'phone': '+201005528282', 'addresses': []}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072630272066', 'name': 'Iron Man Necklace - Blue', 'quantity': 1, 'sku': 'FG-0000714', 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8216984485954', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'Geidea POS', 'amountSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:01:14Z', 'receiptJson': '{}'}]}}, {'node': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'createdAt': '2025-09-29T08:07:17Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '70074990658-1-1013', 'totalPriceSet': {'shopMoney': {'amount': '10000.0', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '10000.0', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'firstName': 'Nora', 'lastName': 'Maged', 'email': 'testawy@test.net', 'phone': '+201005528282', 'addresses': []}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072642134082', 'name': 'MM Watch - Blue', 'quantity': 1, 'sku': 'FG-0000715', 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42387257458754', 'sku': 'FG-0000715', 'price': '5000.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7527948386370', 'title': 'MM Watch'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072644427842', 'name': 'Gift Card', 'quantity': 1, 'sku': None, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': None}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8216992448578', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'Valu POS', 'amountSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:07:17Z', 'receiptJson': '{}'}]}}, {'node': {'id': 'gid://shopify/Order/6420443136066', 'name': '#1713', 'createdAt': '2025-09-29T08:27:49Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '72406990914-1-1014', 'totalPriceSet': {'shopMoney': {'amount': '30.0', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '30.0', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'firstName': 'Karim', 'lastName': 'Wafik', 'email': 'karimwafik.kw@gmail.com', 'phone': None, 'addresses': [{'address1': '97 Marghany st., Heliopolis, Cairo, Egypt', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': '21113', 'country': 'Egypt', 'phone': '+201005527292'}, {'address1': 'Stone Residence Compound 306, Third Settlement', 'address2': '9', 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'New Cairo', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'afasfag', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'asfasfas', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'asdfasfasf', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'nasr city', 'address2': None, 'city': 'nasr city', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '+201001234561'}, {'address1': 'new cairo', 'address2': None, 'city': 'new cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}]}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072665727042', 'name': 'Gift Card - 10 EGP', 'quantity': 3, 'sku': 'SR-0000072', 'originalUnitPriceSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42480052371522', 'sku': 'SR-0000072', 'price': '10.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7491930062914', 'title': 'Gift Card'}}}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217009913922', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '30.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:27:48Z', 'receiptJson': '{}'}]}}, {'node': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'createdAt': '2025-09-29T08:32:12Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '70074957890-1-1015', 'totalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'firstName': 'Eman', 'lastName': 'Mohamed', 'email': 'test215@test.com', 'phone': '+201005552224', 'addresses': []}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072670904386', 'name': 'MM Watch - Blue', 'quantity': 1, 'sku': 'FG-0000715', 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42387257458754', 'sku': 'FG-0000715', 'price': '5000.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7527948386370', 'title': 'MM Watch'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072670937154', 'name': 'Iron Man Necklace - Blue', 'quantity': 1, 'sku': 'FG-0000714', 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072683290690', 'name': 'Gift Card', 'quantity': 1, 'sku': None, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': None}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217014566978', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'gift_card', 'amountSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:11Z', 'receiptJson': '{"gift_card_id":550425428034,"gift_card_last_characters":"bcah"}'}, {'id': 'gid://shopify/OrderTransaction/8217014730818', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '4998.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:24Z', 'receiptJson': '{}'}]}}, {'node': {'id': 'gid://shopify/Order/6420449591362', 'name': '#1715', 'createdAt': '2025-09-29T08:36:18Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '72407023682-1-1016', 'totalPriceSet': {'shopMoney': {'amount': '17.0', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '17.0', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'firstName': 'Eman', 'lastName': 'Mohamed', 'email': 'test215@test.com', 'phone': '+201005552224', 'addresses': []}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072676704322', 'name': 'Iron Man Necklace - Blue', 'quantity': 2, 'sku': 'FG-0000714', 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217019547714', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'gift_card', 'amountSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:36:18Z', 'receiptJson': '{"gift_card_id":550425460802,"gift_card_last_characters":"995b"}'}, {'id': 'gid://shopify/OrderTransaction/8217020137538', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'gift_card', 'amountSet': {'shopMoney': {'amount': '7.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:36:45Z', 'receiptJson': '{"gift_card_id":550425395266,"gift_card_last_characters":"46g4"}'}]}}, {'node': {'id': 'gid://shopify/Order/6420456996930', 'name': '#1716', 'createdAt': '2025-09-29T08:50:59Z', 'displayFinancialStatus': 'PARTIALLY_REFUNDED', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'web', 'sourceIdentifier': None, 'totalPriceSet': {'shopMoney': {'amount': '208.5', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '200.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'firstName': 'Soha', 'lastName': 'Mohamed', 'email': 'testawyyyy@test.com', 'phone': None, 'addresses': [{'address1': 'zayed', 'address2': None, 'city': 'Zayed', 'province': 'Giza', 'zip': None, 'country': 'Egypt', 'phone': '+201005526262'}]}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest'], 'shippingAddress': {'address1': 'zayed', 'address2': None, 'city': 'Zayed', 'province': 'Giza', 'zip': None, 'country': 'Egypt', 'phone': '+201005526262', 'firstName': 'Soha', 'lastName': 'Mohamed', 'company': None}, 'billingAddress': {'address1': 'zayed', 'address2': None, 'city': 'Zayed', 'province': 'Giza', 'zip': None, 'country': 'Egypt', 'phone': '+201005526262', 'firstName': 'Soha', 'lastName': 'Mohamed', 'company': None}, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072692105282', 'name': 'Iron Man Necklace - Blue', 'quantity': 1, 'sku': 'FG-0000714', 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217039896642', 'kind': 'SALE', 'status': 'PENDING', 'gateway': 'Cash on Delivery (COD)', 'amountSet': {'shopMoney': {'amount': '208.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:50:59Z', 'receiptJson': '{}'}, {'id': 'gid://shopify/OrderTransaction/8217041010754', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'Cash on Delivery (COD)', 'amountSet': {'shopMoney': {'amount': '208.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:51:24Z', 'receiptJson': '{}'}, {'id': 'gid://shopify/OrderTransaction/8217044189250', 'kind': 'REFUND', 'status': 'SUCCESS', 'gateway': 'shopify_store_credit', 'amountSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:54:00Z', 'receiptJson': '{"account_id":143491138,"credit_operation_id":413204546}'}]}}], 'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo2NDIwNDU2OTk2OTMwLCJsYXN0X3ZhbHVlIjoxNzU5MTM1ODU5MDAwfQ=='}}}, 'status': 'success'}
2025-09-29 12:20:10,523 - sync_service - INFO - Retrieved 5 unsynced orders (limited to 5 most recent) from Shopify store local
2025-09-29 12:20:10,523 - sync_service - INFO - Processing 5 orders from store local
2025-09-29 12:20:10,523 - sync_service - INFO - Processing order #1710 (ID: gid://shopify/Order/6420422131778)
2025-09-29 12:20:10,525 - sync_service - INFO - Processing order: #1710 | Payment: PAID | Fulfillment: FULFILLED
2025-09-29 12:20:10,526 - sync_service - INFO - Payment Gateway: cash | Card Type: Unknown | Amount: 5008.5
2025-09-29 12:20:10,526 - sync_service - INFO -  PAYMENT GATEWAYS USED: 1 gateways, Total Amount: 5008.5 EGP
2025-09-29 12:20:10,527 - sync_service - INFO -     Gateway 1: cash - 5008.5 EGP - Transaction ID: gid://shopify/OrderTransaction/8216980783170
2025-09-29 12:20:10,527 - sync_service - INFO -  SEARCHING CUSTOMER: Original phone: '+201005528282' -> Cleaned: '+201005528282'
2025-09-29 12:20:10,528 - sync_service - INFO -  SAP QUERY: Phone1 eq '+201005528282' or Phone2 eq '+201005528282' or Cellular eq '+201005528282'
2025-09-29 12:20:31,570 - sync_service - ERROR - SAP login error: All connection attempts failed
2025-09-29 12:20:31,572 - sync_service - ERROR - Failed to search customer by phone: Failed to login to SAP
2025-09-29 12:20:31,573 - sync_service - INFO - Creating new customer in SAP
2025-09-29 12:20:32,318 - sync_service - INFO - SAP login successful
2025-09-29 12:20:33,371 - sync_service - INFO - Created customer in SAP: C0021120
2025-09-29 12:20:33,372 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000715', VariantSKU='fg-0000715', Name='mm watch - blue'
2025-09-29 12:20:33,373 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000714', VariantSKU='fg-0000714', Name='iron man necklace - blue'
2025-09-29 12:20:33,374 - sync_service - INFO - Using location-based costing codes for order #1710: {'COGSCostingCode': 'WAT', 'COGSCostingCode2': 'SAL', 'COGSCostingCode3': 'General', 'CostingCode': 'WAT', 'CostingCode2': 'SAL', 'CostingCode3': 'General', 'Warehouse': '5A'}
2025-09-29 12:20:33,376 - sync_service - INFO -  Pricing for FG-0000714: Original=10.00, Sale=8.50, Discount=15.0%
2025-09-29 12:20:33,376 - sync_service - INFO -  No gift card redemptions found in this order
2025-09-29 12:20:33,377 - sync_service - INFO - Added POS receipt number to invoice: 1010
2025-09-29 12:20:34,899 - sync_service - INFO - SAP logging client login successful
2025-09-29 12:20:35,596 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 12:20:39,455 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 12:20:39,456 - sync_service - INFO - Created invoice in SAP: 23204
2025-09-29 12:20:39,457 - sync_service - INFO - Created invoice data: {'DocEntry': 23204, 'DocNum': 100018912, 'DocTotal': 5008.5, 'TransNum': 97066}
2025-09-29 12:20:53,387 - sync_service - INFO - Added tag 'sap_invoice_23204' to order gid://shopify/Order/6420422131778
2025-09-29 12:21:07,212 - sync_service - INFO - Added tag 'sap_invoice_synced' to order gid://shopify/Order/6420422131778
2025-09-29 12:21:07,212 - sync_service - INFO -  Invoice created and tagged for order #1710
2025-09-29 12:21:07,212 - sync_service - INFO - Order #1710 is paid - creating incoming payment in SAP
2025-09-29 12:21:07,213 - sync_service - INFO -  POS ORDER DETECTED - Processing multiple payment types
2025-09-29 12:21:07,213 - sync_service - INFO -  CASH TRANSACTION: 5008.5 EGP - Account: 10801228
2025-09-29 12:21:07,213 - sync_service - INFO -  POS PAYMENT SUMMARY: Total Calculated Amount: 5008.5 EGP
2025-09-29 12:21:09,549 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-29 12:21:09,549 - sync_service - INFO - Created incoming payment in SAP: 22381
2025-09-29 12:21:09,550 - sync_service - INFO - Successfully created incoming payment: 22381
2025-09-29 12:21:11,157 - sync_service - INFO - Added tag 'sap_payment_22381' to order gid://shopify/Order/6420422131778
2025-09-29 12:21:12,819 - sync_service - INFO - Added tag 'sap_payment_synced' to order gid://shopify/Order/6420422131778
2025-09-29 12:21:12,820 - sync_service - INFO - Successfully processed order #1710
2025-09-29 12:21:12,820 - sync_service - INFO -  Processed order #1710 -> SAP Invoice: 23204
2025-09-29 12:21:12,820 - sync_service - INFO -     Gateway: cash | Amount: 5008.5
2025-09-29 12:21:12,821 - sync_service - INFO - Processing order #1711 (ID: gid://shopify/Order/6420425900098)
2025-09-29 12:21:12,821 - sync_service - INFO - Processing order: #1711 | Payment: PAID | Fulfillment: FULFILLED
2025-09-29 12:21:12,821 - sync_service - INFO - Payment Gateway: Geidea POS | Card Type: Unknown | Amount: 8.5
2025-09-29 12:21:12,821 - sync_service - INFO -  PAYMENT GATEWAYS USED: 1 gateways, Total Amount: 8.5 EGP
2025-09-29 12:21:12,822 - sync_service - INFO -     Gateway 1: Geidea POS - 8.5 EGP - Transaction ID: gid://shopify/OrderTransaction/8216984485954
2025-09-29 12:21:12,822 - sync_service - INFO -  SEARCHING CUSTOMER: Original phone: '+201005528282' -> Cleaned: '+201005528282'
2025-09-29 12:21:12,822 - sync_service - INFO -  SAP QUERY: Phone1 eq '+201005528282' or Phone2 eq '+201005528282' or Cellular eq '+201005528282'
2025-09-29 12:21:13,219 - sync_service - INFO -  CUSTOMER SEARCH RESULT: Found 1 customers
2025-09-29 12:21:13,219 - sync_service - INFO -  FOUND EXISTING CUSTOMER: C0021120 - Nora Maged
2025-09-29 12:21:13,220 - sync_service - INFO - Found existing customer: C0021120
2025-09-29 12:21:13,220 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000714', VariantSKU='fg-0000714', Name='iron man necklace - blue'
2025-09-29 12:21:13,220 - sync_service - INFO - Using location-based costing codes for order #1711: {'COGSCostingCode': 'WAT', 'COGSCostingCode2': 'SAL', 'COGSCostingCode3': 'General', 'CostingCode': 'WAT', 'CostingCode2': 'SAL', 'CostingCode3': 'General', 'Warehouse': '5A'}
2025-09-29 12:21:13,221 - sync_service - INFO -  Pricing for FG-0000714: Original=10.00, Sale=8.50, Discount=15.0%
2025-09-29 12:21:13,221 - sync_service - INFO -  No gift card redemptions found in this order
2025-09-29 12:21:13,222 - sync_service - INFO - Added POS receipt number to invoice: 1012
2025-09-29 12:21:14,589 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 12:21:16,329 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 12:21:16,329 - sync_service - INFO - Created invoice in SAP: 23205
2025-09-29 12:21:16,330 - sync_service - INFO - Created invoice data: {'DocEntry': 23205, 'DocNum': 100018913, 'DocTotal': 8.5, 'TransNum': 97068}
2025-09-29 12:21:30,534 - sync_service - INFO - Added tag 'sap_invoice_23205' to order gid://shopify/Order/6420425900098
2025-09-29 12:21:32,068 - sync_service - INFO - Added tag 'sap_invoice_synced' to order gid://shopify/Order/6420425900098
2025-09-29 12:21:32,069 - sync_service - INFO -  Invoice created and tagged for order #1711
2025-09-29 12:21:32,069 - sync_service - INFO - Order #1711 is paid - creating incoming payment in SAP
2025-09-29 12:21:32,069 - sync_service - INFO -  POS ORDER DETECTED - Processing multiple payment types
2025-09-29 12:21:32,070 - sync_service - INFO -  CREDIT CARD TRANSACTION: Geidea POS - 8.5 EGP - Account: 10801235
2025-09-29 12:21:32,070 - sync_service - INFO -  POS PAYMENT SUMMARY: Total Calculated Amount: 8.5 EGP
2025-09-29 12:21:32,903 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-29 12:21:32,903 - sync_service - INFO - Created incoming payment in SAP: 22382
2025-09-29 12:21:32,904 - sync_service - INFO - Successfully created incoming payment: 22382
2025-09-29 12:21:34,728 - sync_service - INFO - Added tag 'sap_payment_22382' to order gid://shopify/Order/6420425900098
2025-09-29 12:21:36,403 - sync_service - INFO - Added tag 'sap_payment_synced' to order gid://shopify/Order/6420425900098
2025-09-29 12:21:36,404 - sync_service - INFO - Successfully processed order #1711
2025-09-29 12:21:36,404 - sync_service - INFO -  Processed order #1711 -> SAP Invoice: 23205
2025-09-29 12:21:36,404 - sync_service - INFO -     Gateway: Geidea POS | Amount: 8.5
2025-09-29 12:21:36,405 - sync_service - INFO - Processing order #1712 (ID: gid://shopify/Order/6420431896642)
2025-09-29 12:21:36,405 - sync_service - INFO - Processing order: #1712 | Payment: PAID | Fulfillment: FULFILLED
2025-09-29 12:21:36,405 - sync_service - INFO - Payment Gateway: Valu POS | Card Type: Unknown | Amount: 5000.0
2025-09-29 12:21:36,405 - sync_service - INFO -  PAYMENT GATEWAYS USED: 1 gateways, Total Amount: 5000.0 EGP
2025-09-29 12:21:36,405 - sync_service - INFO -     Gateway 1: Valu POS - 5000.0 EGP - Transaction ID: gid://shopify/OrderTransaction/8216992448578
2025-09-29 12:21:36,406 - sync_service - INFO -  SEARCHING CUSTOMER: Original phone: '+201005528282' -> Cleaned: '+201005528282'
2025-09-29 12:21:36,406 - sync_service - INFO -  SAP QUERY: Phone1 eq '+201005528282' or Phone2 eq '+201005528282' or Cellular eq '+201005528282'
2025-09-29 12:21:36,744 - sync_service - INFO -  CUSTOMER SEARCH RESULT: Found 1 customers
2025-09-29 12:21:36,744 - sync_service - INFO -  FOUND EXISTING CUSTOMER: C0021120 - Nora Maged
2025-09-29 12:21:36,745 - sync_service - INFO - Found existing customer: C0021120
2025-09-29 12:21:36,745 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000715', VariantSKU='fg-0000715', Name='mm watch - blue'
2025-09-29 12:21:36,745 - sync_service - INFO - Checking line item for gift card: SKU='', VariantSKU='', Name='gift card'
2025-09-29 12:21:36,746 - sync_service - INFO - Found 1 gift card purchase(s) in order #1712
2025-09-29 12:21:36,746 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-29 12:21:36,746 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-09-29 12:21:37,216 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}]}}, 'status': 'success'}
2025-09-29 12:21:37,216 - sync_service - ERROR - Error querying gift cards: 'NoneType' object has no attribute 'get'
2025-09-29 12:21:37,217 - sync_service - WARNING - No gift cards found in Shopify for order 6420431896642 - will create with generated IDs
2025-09-29 12:21:37,217 - sync_service - WARNING - No matching gift card found in Shopify for amount 5000.0 - creating with generated ID
2025-09-29 12:21:38,174 - sync_service - INFO - API log added to SAP: sap - GiftCards('GC6420431896642_5000.0_0') - failure
2025-09-29 12:21:38,174 - sync_service - INFO - Gift card GC6420431896642_5000.0_0 does not exist in SAP
2025-09-29 12:21:38,819 - sync_service - INFO - API log added to SAP: sap - GiftCards - success
2025-09-29 12:21:38,820 - sync_service - INFO - Created gift card in SAP: GC6420431896642_5000.0_0 - Amount: 5000.0 - SKU: 
2025-09-29 12:21:38,820 - sync_service - INFO - Successfully created 1 gift card(s) in SAP
2025-09-29 12:21:38,821 - sync_service - INFO - Using location-based costing codes for order #1712: {'COGSCostingCode': 'ZAM', 'COGSCostingCode2': 'SAL', 'COGSCostingCode3': 'General', 'CostingCode': 'ZAM', 'CostingCode2': 'SAL', 'CostingCode3': 'General', 'Warehouse': 'ZW'}
2025-09-29 12:21:38,821 - sync_service - INFO - Added U_GiftCard field to line item: GC6420431896642_5000.0_0 for amount: 5000.0
2025-09-29 12:21:38,821 - sync_service - INFO - Skipping gift card line item for POS refund: Gift Card - Amount: 5000.0
2025-09-29 12:21:38,822 - sync_service - INFO -  No gift card redemptions found in this order
2025-09-29 12:21:38,822 - sync_service - INFO - Added POS receipt number to invoice: 1013
2025-09-29 12:21:39,483 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 12:21:40,495 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 12:21:40,496 - sync_service - INFO - Created invoice in SAP: 23206
2025-09-29 12:21:40,496 - sync_service - INFO - Created invoice data: {'DocEntry': 23206, 'DocNum': 100018914, 'DocTotal': 5000.0, 'TransNum': 97070}
2025-09-29 12:21:54,275 - sync_service - INFO - Added tag 'sap_invoice_23206' to order gid://shopify/Order/6420431896642
2025-09-29 12:22:08,107 - sync_service - INFO - Added tag 'sap_invoice_synced' to order gid://shopify/Order/6420431896642
2025-09-29 12:22:08,107 - sync_service - INFO -  Invoice created and tagged for order #1712
2025-09-29 12:22:08,108 - sync_service - INFO - Order #1712 is paid - creating incoming payment in SAP
2025-09-29 12:22:08,108 - sync_service - INFO -  POS ORDER DETECTED - Processing multiple payment types
2025-09-29 12:22:08,109 - sync_service - INFO -  BANK TRANSFER TRANSACTION: Valu POS - 5000.0 EGP - Account: 10801231
2025-09-29 12:22:08,109 - sync_service - INFO -  POS PAYMENT SUMMARY: Total Calculated Amount: 5000.0 EGP
2025-09-29 12:22:08,913 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-29 12:22:08,913 - sync_service - INFO - Created incoming payment in SAP: 22383
2025-09-29 12:22:08,914 - sync_service - INFO - Successfully created incoming payment: 22383
2025-09-29 12:22:10,558 - sync_service - INFO - Added tag 'sap_payment_22383' to order gid://shopify/Order/6420431896642
2025-09-29 12:22:12,337 - sync_service - INFO - Added tag 'sap_payment_synced' to order gid://shopify/Order/6420431896642
2025-09-29 12:22:12,339 - sync_service - INFO - Successfully processed order #1712
2025-09-29 12:22:12,339 - sync_service - INFO -  Processed order #1712 -> SAP Invoice: 23206
2025-09-29 12:22:12,340 - sync_service - INFO -     Gateway: Valu POS | Amount: 5000.0
2025-09-29 12:22:12,340 - sync_service - INFO - Processing order #1713 (ID: gid://shopify/Order/6420443136066)
2025-09-29 12:22:12,341 - sync_service - INFO - Processing order: #1713 | Payment: PAID | Fulfillment: FULFILLED
2025-09-29 12:22:12,341 - sync_service - INFO - Payment Gateway: cash | Card Type: Unknown | Amount: 30.0
2025-09-29 12:22:12,342 - sync_service - INFO -  PAYMENT GATEWAYS USED: 1 gateways, Total Amount: 30.0 EGP
2025-09-29 12:22:12,342 - sync_service - INFO -     Gateway 1: cash - 30.0 EGP - Transaction ID: gid://shopify/OrderTransaction/8217009913922
2025-09-29 12:22:12,343 - sync_service - INFO -  SEARCHING CUSTOMER: Original phone: '+201005527292' -> Cleaned: '+201005527292'
2025-09-29 12:22:12,343 - sync_service - INFO -  SAP QUERY: Phone1 eq '+201005527292' or Phone2 eq '+201005527292' or Cellular eq '+201005527292'
2025-09-29 12:22:12,702 - sync_service - INFO -  CUSTOMER SEARCH RESULT: Found 1 customers
2025-09-29 12:22:12,702 - sync_service - INFO -  FOUND EXISTING CUSTOMER: C0021112 - Karim Wafik
2025-09-29 12:22:12,702 - sync_service - INFO - Found existing customer: C0021112
2025-09-29 12:22:12,703 - sync_service - INFO - Checking line item for gift card: SKU='sr-0000072', VariantSKU='sr-0000072', Name='gift card - 10 egp'
2025-09-29 12:22:12,703 - sync_service - INFO - Found 1 gift card purchase(s) in order #1713
2025-09-29 12:22:12,703 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-29 12:22:12,703 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-09-29 12:22:22,720 - sync_service - ERROR - GraphQL query error for store local: 
2025-09-29 12:22:23,534 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-09-29 12:22:23,535 - sync_service - WARNING - GraphQL attempt 1/3 failed: GraphQL query error for store local: 
2025-09-29 12:22:23,535 - sync_service - INFO - Retrying in 2 seconds...
2025-09-29 12:22:25,550 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-29 12:22:25,550 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-09-29 12:22:35,565 - sync_service - ERROR - GraphQL query error for store local: 
2025-09-29 12:22:35,929 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-09-29 12:22:35,930 - sync_service - WARNING - GraphQL attempt 2/3 failed: GraphQL query error for store local: 
2025-09-29 12:22:35,930 - sync_service - INFO - Retrying in 4 seconds...
2025-09-29 12:22:39,947 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-29 12:22:39,947 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-09-29 12:22:40,426 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}]}}, 'status': 'success'}
2025-09-29 12:22:40,427 - sync_service - ERROR - Error querying gift cards: 'NoneType' object has no attribute 'get'
2025-09-29 12:22:40,427 - sync_service - WARNING - No gift cards found in Shopify for order 6420443136066 - will create with generated IDs
2025-09-29 12:22:40,428 - sync_service - WARNING - No matching gift card found in Shopify for amount 30.0 - creating with generated ID
2025-09-29 12:22:41,453 - sync_service - INFO - API log added to SAP: sap - GiftCards('GC6420443136066_30.0_0') - failure
2025-09-29 12:22:41,453 - sync_service - INFO - Gift card GC6420443136066_30.0_0 does not exist in SAP
2025-09-29 12:22:42,652 - sync_service - INFO - API log added to SAP: sap - GiftCards - success
2025-09-29 12:22:42,653 - sync_service - INFO - Created gift card in SAP: GC6420443136066_30.0_0 - Amount: 30.0 - SKU: SR-0000072
2025-09-29 12:22:42,653 - sync_service - INFO - Successfully created 1 gift card(s) in SAP
2025-09-29 12:22:42,653 - sync_service - INFO - Using location-based costing codes for order #1713: {'COGSCostingCode': 'DIP', 'COGSCostingCode2': 'SAL', 'COGSCostingCode3': 'General', 'CostingCode': 'DIP', 'CostingCode2': 'SAL', 'CostingCode3': 'General', 'Warehouse': 'DIP'}
2025-09-29 12:22:42,654 - sync_service - INFO - Added U_GiftCard field to line item: GC6420443136066_30.0_0 for amount: 30.0
2025-09-29 12:22:42,654 - sync_service - INFO -  No gift card redemptions found in this order
2025-09-29 12:22:42,654 - sync_service - INFO - Added POS receipt number to invoice: 1014
2025-09-29 12:22:43,929 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 12:22:45,808 - sync_service - INFO - API log added to SAP: sap - Invoices - failure
2025-09-29 12:22:45,808 - sync_service - ERROR - Failed to create invoice in SAP: HTTP 400: {
   "error" : {
      "code" : -1116,
      "message" : {
         "lang" : "en-us",
         "value" : "(130017) Please Select Gift Card on the Line"
      }
   }
}

2025-09-29 12:22:45,809 - sync_service - ERROR -  Failed to process order: HTTP 400: {
   "error" : {
      "code" : -1116,
      "message" : {
         "lang" : "en-us",
         "value" : "(130017) Please Select Gift Card on the Line"
      }
   }
}

2025-09-29 12:22:45,809 - sync_service - INFO - Processing order #1714 (ID: gid://shopify/Order/6420446183490)
2025-09-29 12:22:45,810 - sync_service - INFO - Processing order: #1714 | Payment: PAID | Fulfillment: FULFILLED
2025-09-29 12:22:45,810 - sync_service - INFO - Payment Gateway: cash | Card Type: Unknown | Amount: 4998.5
2025-09-29 12:22:45,810 - sync_service - INFO -  GIFT CARDS USED: 1 cards, Total Amount: 10.0
2025-09-29 12:22:45,811 - sync_service - INFO -     Gift Card 1: bcah - 10.0 EGP
2025-09-29 12:22:45,811 - sync_service - INFO -  PAYMENT GATEWAYS USED: 1 gateways, Total Amount: 4998.5 EGP
2025-09-29 12:22:45,811 - sync_service - INFO -     Gateway 1: cash - 4998.5 EGP - Transaction ID: gid://shopify/OrderTransaction/8217014730818
2025-09-29 12:22:45,812 - sync_service - INFO -  SEARCHING CUSTOMER: Original phone: '+201005552224' -> Cleaned: '+201005552224'
2025-09-29 12:22:45,812 - sync_service - INFO -  SAP QUERY: Phone1 eq '+201005552224' or Phone2 eq '+201005552224' or Cellular eq '+201005552224'
2025-09-29 12:22:46,537 - sync_service - INFO -  CUSTOMER SEARCH RESULT: Found 0 customers
2025-09-29 12:22:46,538 - sync_service - INFO -  NO EXISTING CUSTOMER FOUND for phone: +201005552224
2025-09-29 12:22:46,538 - sync_service - INFO - Creating new customer in SAP
2025-09-29 12:22:47,422 - sync_service - INFO - Created customer in SAP: C0021121
2025-09-29 12:22:47,422 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000715', VariantSKU='fg-0000715', Name='mm watch - blue'
2025-09-29 12:22:47,422 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000714', VariantSKU='fg-0000714', Name='iron man necklace - blue'
2025-09-29 12:22:47,423 - sync_service - INFO - Checking line item for gift card: SKU='', VariantSKU='', Name='gift card'
2025-09-29 12:22:47,423 - sync_service - INFO - Found 1 gift card purchase(s) in order #1714
2025-09-29 12:22:47,423 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-29 12:22:47,424 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-09-29 12:22:48,304 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}]}}, 'status': 'success'}
2025-09-29 12:22:48,304 - sync_service - ERROR - Error querying gift cards: 'NoneType' object has no attribute 'get'
2025-09-29 12:22:48,304 - sync_service - WARNING - No gift cards found in Shopify for order 6420446183490 - will create with generated IDs
2025-09-29 12:22:48,304 - sync_service - WARNING - No matching gift card found in Shopify for amount 5000.0 - creating with generated ID
2025-09-29 12:22:50,631 - sync_service - INFO - API log added to SAP: sap - GiftCards('GC6420446183490_5000.0_0') - failure
2025-09-29 12:22:50,632 - sync_service - INFO - Gift card GC6420446183490_5000.0_0 does not exist in SAP
2025-09-29 12:22:53,122 - sync_service - INFO - API log added to SAP: sap - GiftCards - success
2025-09-29 12:22:53,123 - sync_service - INFO - Created gift card in SAP: GC6420446183490_5000.0_0 - Amount: 5000.0 - SKU: 
2025-09-29 12:22:53,123 - sync_service - INFO - Successfully created 1 gift card(s) in SAP
2025-09-29 12:22:53,124 - sync_service - INFO - Using location-based costing codes for order #1714: {'COGSCostingCode': 'Arkan', 'COGSCostingCode2': 'SAL', 'COGSCostingCode3': 'General', 'CostingCode': 'Arkan', 'CostingCode2': 'SAL', 'CostingCode3': 'General', 'Warehouse': 'Arkan'}
2025-09-29 12:22:53,124 - sync_service - INFO - Added U_GiftCard field to line item: GC6420446183490_5000.0_0 for amount: 5000.0
2025-09-29 12:22:53,125 - sync_service - INFO -  Pricing for FG-0000714: Original=10.00, Sale=8.50, Discount=15.0%
2025-09-29 12:22:53,125 - sync_service - INFO - Skipping gift card line item for POS refund: Gift Card - Amount: 5000.0
2025-09-29 12:22:53,126 - sync_service - INFO -  Processing 1 gift card redemption(s)
2025-09-29 12:22:53,126 - sync_service - INFO -  Created gift card expense: bcah - Amount: -10.0
2025-09-29 12:22:53,127 - sync_service - INFO - Added POS receipt number to invoice: 1015
2025-09-29 12:22:54,823 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 12:22:57,173 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 12:22:57,174 - sync_service - INFO - Created invoice in SAP: 23207
2025-09-29 12:22:57,175 - sync_service - INFO - Created invoice data: {'DocEntry': 23207, 'DocNum': 100018915, 'DocTotal': 4998.5, 'TransNum': 97072}
2025-09-29 12:23:10,965 - sync_service - INFO - Added tag 'sap_invoice_23207' to order gid://shopify/Order/6420446183490
2025-09-29 12:23:12,713 - sync_service - INFO - Added tag 'sap_invoice_synced' to order gid://shopify/Order/6420446183490
2025-09-29 12:23:12,714 - sync_service - INFO -  Invoice created and tagged for order #1714
2025-09-29 12:23:12,714 - sync_service - INFO - Order #1714 is paid - creating incoming payment in SAP
2025-09-29 12:23:12,715 - sync_service - INFO -  POS ORDER DETECTED - Processing multiple payment types
2025-09-29 12:23:12,715 - sync_service - INFO -  CASH TRANSACTION: 4998.5 EGP - Account: 10801239
2025-09-29 12:23:12,715 - sync_service - INFO -  POS PAYMENT SUMMARY: Total Calculated Amount: 4998.5 EGP
2025-09-29 12:23:13,567 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-29 12:23:13,568 - sync_service - INFO - Created incoming payment in SAP: 22384
2025-09-29 12:23:13,568 - sync_service - INFO - Successfully created incoming payment: 22384
2025-09-29 12:23:15,237 - sync_service - INFO - Added tag 'sap_payment_22384' to order gid://shopify/Order/6420446183490
2025-09-29 12:23:29,096 - sync_service - INFO - Added tag 'sap_payment_synced' to order gid://shopify/Order/6420446183490
2025-09-29 12:23:29,097 - sync_service - INFO - Successfully processed order #1714
2025-09-29 12:23:29,098 - sync_service - INFO -  Processed order #1714 -> SAP Invoice: 23207
2025-09-29 12:23:29,098 - sync_service - INFO -     Gateway: cash | Amount: 4998.5
2025-09-29 12:23:29,099 - sync_service - INFO - Sync Event: {'sync_type': 'sales_orders', 'items_processed': 5, 'success_count': 4, 'error_count': 1, 'details': None}
2025-09-29 12:23:29,099 - sync_service - INFO - Orders sync completed. Processed: 5, Success: 4, Errors: 1
2025-09-29 12:53:26,985 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-29 12:53:27,001 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-29 12:53:27,002 - sync_service - INFO - Starting all syncs...
2025-09-29 12:53:27,002 - sync_service - INFO - Starting stock change sync...
2025-09-29 12:53:27,003 - sync_service - INFO - Starting stock change sync using MASHURA_StockChangeB1SLQuery view
2025-09-29 12:53:27,004 - sync_service - INFO - Processing inventory changes for store: local
2025-09-29 12:53:27,816 - sync_service - INFO - SAP login successful
2025-09-29 12:53:30,386 - sync_service - INFO - SAP logging client login successful
2025-09-29 12:53:31,080 - sync_service - INFO - API log added to SAP: sap - view.svc/MASHURA_StockChangeB1SLQuery?$filter=Shopify_Store eq 'local' - success
2025-09-29 12:53:31,083 - sync_service - INFO - Processing 5 inventory changes for store local
2025-09-29 12:53:31,084 - sync_service - INFO - Updating inventory for item FG-0000714 (variant 44545425965122) at location 70074957890
2025-09-29 12:53:31,084 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': {'location_id': '70074957890', 'inventory_item_id': '44545425965122', 'available': 4}, 'response': None, 'status': None}
2025-09-29 12:53:42,676 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': None, 'response': {'inventory_level': {'inventory_item_id': 44545425965122, 'location_id': 70074957890, 'available': 4, 'updated_at': '2025-09-29T12:53:42+03:00', 'admin_graphql_api_id': 'gid://shopify/InventoryLevel/104603189314?inventory_item_id=44545425965122'}}, 'status': 'success'}
2025-09-29 12:53:43,378 - sync_service - INFO - API log added to SAP: shopify - inventory_levels - success
2025-09-29 12:53:43,480 - sync_service - INFO - Updating inventory for item FG-0000714 (variant 44545425965122) at location 70074892354
2025-09-29 12:53:43,480 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': {'location_id': '70074892354', 'inventory_item_id': '44545425965122', 'available': 91}, 'response': None, 'status': None}
2025-09-29 12:53:43,949 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': None, 'response': {'inventory_level': {'inventory_item_id': 44545425965122, 'location_id': 70074892354, 'available': 91, 'updated_at': '2025-09-29T12:53:43+03:00', 'admin_graphql_api_id': 'gid://shopify/InventoryLevel/104603123778?inventory_item_id=44545425965122'}}, 'status': 'success'}
2025-09-29 12:53:44,625 - sync_service - INFO - API log added to SAP: shopify - inventory_levels - success
2025-09-29 12:53:44,730 - sync_service - INFO - Updating inventory for item FG-0000715 (variant 44487837089858) at location 70074892354
2025-09-29 12:53:44,733 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': {'location_id': '70074892354', 'inventory_item_id': '44487837089858', 'available': 4}, 'response': None, 'status': None}
2025-09-29 12:53:45,211 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': None, 'response': {'inventory_level': {'inventory_item_id': 44487837089858, 'location_id': 70074892354, 'available': 4, 'updated_at': '2025-09-29T10:56:36+03:00', 'admin_graphql_api_id': 'gid://shopify/InventoryLevel/104603123778?inventory_item_id=44487837089858'}}, 'status': 'success'}
2025-09-29 12:53:45,880 - sync_service - INFO - API log added to SAP: shopify - inventory_levels - success
2025-09-29 12:53:45,996 - sync_service - INFO - Updating inventory for item FG-0000715 (variant 44487837089858) at location 70074957890
2025-09-29 12:53:45,997 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': {'location_id': '70074957890', 'inventory_item_id': '44487837089858', 'available': 4}, 'response': None, 'status': None}
2025-09-29 12:53:46,495 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': None, 'response': {'inventory_level': {'inventory_item_id': 44487837089858, 'location_id': 70074957890, 'available': 4, 'updated_at': '2025-09-29T12:53:46+03:00', 'admin_graphql_api_id': 'gid://shopify/InventoryLevel/104603189314?inventory_item_id=44487837089858'}}, 'status': 'success'}
2025-09-29 12:53:47,174 - sync_service - INFO - API log added to SAP: shopify - inventory_levels - success
2025-09-29 12:53:47,291 - sync_service - INFO - Updating inventory for item FG-0000715 (variant 44487837089858) at location 70074990658
2025-09-29 12:53:47,293 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': {'location_id': '70074990658', 'inventory_item_id': '44487837089858', 'available': 4}, 'response': None, 'status': None}
2025-09-29 12:53:58,928 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'rest_inventory_local', 'request': None, 'response': {'inventory_level': {'inventory_item_id': 44487837089858, 'location_id': 70074990658, 'available': 4, 'updated_at': '2025-09-29T12:53:58+03:00', 'admin_graphql_api_id': 'gid://shopify/InventoryLevel/104603222082?inventory_item_id=44487837089858'}}, 'status': 'success'}
2025-09-29 12:53:59,633 - sync_service - INFO - API log added to SAP: shopify - inventory_levels - success
2025-09-29 12:53:59,740 - sync_service - INFO - Stock change sync completed: 5 processed, 5 successful, 0 errors
2025-09-29 12:53:59,741 - sync_service - INFO - Starting sales orders sync...
2025-09-29 12:53:59,742 - sync_service - INFO - Starting orders sync...
2025-09-29 12:53:59,744 - sync_service - INFO - Fetching orders with filter: tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10
2025-09-29 12:53:59,745 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-29 12:53:59,746 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: false, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        subtotalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        totalShippingPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Discounts applied ---\n                        discountApplications(first: 10) {\n                        edges {\n                            node {\n                            targetType        # ORDER or LINE_ITEM\n                            allocationMethod  # ACROSS / EACH / ONE\n                            value {\n                                __typename\n                                ... on PricingPercentageValue {\n                                percentage\n                                }\n                                ... on MoneyV2 {\n                                amount\n                                currencyCode\n                                }\n                            }\n                            ... on DiscountCodeApplication {\n                                code\n                            }\n                            ... on AutomaticDiscountApplication {\n                                title\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n                        \n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n                        shippingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n                        billingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n\n                        # --- Line Items with Discount Allocations ---\n                        lineItems(first: 50) {\n                        edges {\n                            node {\n                            id\n                            name\n                            quantity\n                            sku\n                            originalUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountedUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountAllocations {\n                                allocatedAmount {\n                                    amount\n                                    currencyCode\n                                }\n                                discountApplication {\n                                    __typename\n                                    ... on AutomaticDiscountApplication {\n                                        title\n                                    }\n                                    ... on DiscountCodeApplication {\n                                        code\n                                    }\n                                }\n                            }\n                            variant {\n                                id\n                                sku\n                                price\n                                compareAtPrice\n                                product {\n                                id\n                                title\n                                }\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Transactions (Gift cards show up here as gateway = "gift_card") ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson   # contains gift_card_id, last_characters etc if gift card used\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n\n            ', 'variables': {'first': 10, 'after': None, 'query': 'tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-09-29 12:54:00,409 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [{'node': {'id': 'gid://shopify/Order/6420443136066', 'name': '#1713', 'createdAt': '2025-09-29T08:27:49Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '72406990914-1-1014', 'totalPriceSet': {'shopMoney': {'amount': '30.0', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '30.0', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'firstName': 'Karim', 'lastName': 'Wafik', 'email': 'karimwafik.kw@gmail.com', 'phone': None, 'addresses': [{'address1': '97 Marghany st., Heliopolis, Cairo, Egypt', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': '21113', 'country': 'Egypt', 'phone': '+201005527292'}, {'address1': 'Stone Residence Compound 306, Third Settlement', 'address2': '9', 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'New Cairo', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'afasfag', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'asfasfas', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'asdfasfasf', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'nasr city', 'address2': None, 'city': 'nasr city', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '+201001234561'}, {'address1': 'new cairo', 'address2': None, 'city': 'new cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}]}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072665727042', 'name': 'Gift Card - 10 EGP', 'quantity': 3, 'sku': 'SR-0000072', 'originalUnitPriceSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42480052371522', 'sku': 'SR-0000072', 'price': '10.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7491930062914', 'title': 'Gift Card'}}}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217009913922', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '30.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:27:48Z', 'receiptJson': '{}'}]}}, {'node': {'id': 'gid://shopify/Order/6420449591362', 'name': '#1715', 'createdAt': '2025-09-29T08:36:18Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '72407023682-1-1016', 'totalPriceSet': {'shopMoney': {'amount': '17.0', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '17.0', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'firstName': 'Eman', 'lastName': 'Mohamed', 'email': 'test215@test.com', 'phone': '+201005552224', 'addresses': []}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072676704322', 'name': 'Iron Man Necklace - Blue', 'quantity': 2, 'sku': 'FG-0000714', 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217019547714', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'gift_card', 'amountSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:36:18Z', 'receiptJson': '{"gift_card_id":550425460802,"gift_card_last_characters":"995b"}'}, {'id': 'gid://shopify/OrderTransaction/8217020137538', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'gift_card', 'amountSet': {'shopMoney': {'amount': '7.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:36:45Z', 'receiptJson': '{"gift_card_id":550425395266,"gift_card_last_characters":"46g4"}'}]}}, {'node': {'id': 'gid://shopify/Order/6420456996930', 'name': '#1716', 'createdAt': '2025-09-29T08:50:59Z', 'displayFinancialStatus': 'PARTIALLY_REFUNDED', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'web', 'sourceIdentifier': None, 'totalPriceSet': {'shopMoney': {'amount': '208.5', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '200.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'firstName': 'Soha', 'lastName': 'Mohamed', 'email': 'testawyyyy@test.com', 'phone': None, 'addresses': [{'address1': 'zayed', 'address2': None, 'city': 'Zayed', 'province': 'Giza', 'zip': None, 'country': 'Egypt', 'phone': '+201005526262'}]}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest'], 'shippingAddress': {'address1': 'zayed', 'address2': None, 'city': 'Zayed', 'province': 'Giza', 'zip': None, 'country': 'Egypt', 'phone': '+201005526262', 'firstName': 'Soha', 'lastName': 'Mohamed', 'company': None}, 'billingAddress': {'address1': 'zayed', 'address2': None, 'city': 'Zayed', 'province': 'Giza', 'zip': None, 'country': 'Egypt', 'phone': '+201005526262', 'firstName': 'Soha', 'lastName': 'Mohamed', 'company': None}, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072692105282', 'name': 'Iron Man Necklace - Blue', 'quantity': 1, 'sku': 'FG-0000714', 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217039896642', 'kind': 'SALE', 'status': 'PENDING', 'gateway': 'Cash on Delivery (COD)', 'amountSet': {'shopMoney': {'amount': '208.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:50:59Z', 'receiptJson': '{}'}, {'id': 'gid://shopify/OrderTransaction/8217041010754', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'Cash on Delivery (COD)', 'amountSet': {'shopMoney': {'amount': '208.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:51:24Z', 'receiptJson': '{}'}, {'id': 'gid://shopify/OrderTransaction/8217044189250', 'kind': 'REFUND', 'status': 'SUCCESS', 'gateway': 'shopify_store_credit', 'amountSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:54:00Z', 'receiptJson': '{"account_id":143491138,"credit_operation_id":413204546}'}]}}], 'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo2NDIwNDU2OTk2OTMwLCJsYXN0X3ZhbHVlIjoxNzU5MTM1ODU5MDAwfQ=='}}}, 'status': 'success'}
2025-09-29 12:54:00,411 - sync_service - INFO - Retrieved 3 unsynced orders (limited to 5 most recent) from Shopify store local
2025-09-29 12:54:00,412 - sync_service - INFO - Processing 3 orders from store local
2025-09-29 12:54:00,412 - sync_service - INFO - Processing order #1713 (ID: gid://shopify/Order/6420443136066)
2025-09-29 12:54:00,414 - sync_service - INFO - Processing order: #1713 | Payment: PAID | Fulfillment: FULFILLED
2025-09-29 12:54:00,414 - sync_service - INFO - Payment Gateway: cash | Card Type: Unknown | Amount: 30.0
2025-09-29 12:54:00,415 - sync_service - INFO -  PAYMENT GATEWAYS USED: 1 gateways, Total Amount: 30.0 EGP
2025-09-29 12:54:00,416 - sync_service - INFO -     Gateway 1: cash - 30.0 EGP - Transaction ID: gid://shopify/OrderTransaction/8217009913922
2025-09-29 12:54:00,416 - sync_service - INFO -  SEARCHING CUSTOMER: Original phone: '+201005527292' -> Cleaned: '+201005527292'
2025-09-29 12:54:00,417 - sync_service - INFO -  SAP QUERY: Phone1 eq '+201005527292' or Phone2 eq '+201005527292' or Cellular eq '+201005527292'
2025-09-29 12:54:00,853 - sync_service - INFO -  CUSTOMER SEARCH RESULT: Found 1 customers
2025-09-29 12:54:00,853 - sync_service - INFO -  FOUND EXISTING CUSTOMER: C0021112 - Karim Wafik
2025-09-29 12:54:00,854 - sync_service - INFO - Found existing customer: C0021112
2025-09-29 12:54:00,854 - sync_service - INFO - Checking line item for gift card: SKU='sr-0000072', VariantSKU='sr-0000072', Name='gift card - 10 egp'
2025-09-29 12:54:00,862 - sync_service - INFO - Found 1 gift card purchase(s) in order #1713
2025-09-29 12:54:00,863 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-29 12:54:00,864 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-09-29 12:54:01,320 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}]}}, 'status': 'success'}
2025-09-29 12:54:01,321 - sync_service - ERROR - Error querying gift cards: 'NoneType' object has no attribute 'get'
2025-09-29 12:54:01,322 - sync_service - WARNING - No gift cards found in Shopify for order 6420443136066 - will create with generated IDs
2025-09-29 12:54:01,323 - sync_service - WARNING - No matching gift card found in Shopify for amount 30.0 - creating with generated ID
2025-09-29 12:54:01,887 - sync_service - INFO - API log added to SAP: sap - GiftCards('GC6420443136066_30.0_0') - success
2025-09-29 12:54:01,888 - sync_service - INFO - Gift card GC6420443136066_30.0_0 exists in SAP
2025-09-29 12:54:01,889 - sync_service - INFO - Gift card GC6420443136066_30.0_0 already exists in SAP, using existing record
2025-09-29 12:54:01,890 - sync_service - INFO - Successfully created 1 gift card(s) in SAP
2025-09-29 12:54:01,891 - sync_service - INFO - Using location-based costing codes for order #1713: {'COGSCostingCode': 'DIP', 'COGSCostingCode2': 'SAL', 'COGSCostingCode3': 'General', 'CostingCode': 'DIP', 'CostingCode2': 'SAL', 'CostingCode3': 'General', 'Warehouse': 'DIP'}
2025-09-29 12:54:01,892 - sync_service - INFO - Added U_GiftCard field to line item: GC6420443136066_30.0_0 for amount: 30.0
2025-09-29 12:54:01,893 - sync_service - INFO -  No gift card redemptions found in this order
2025-09-29 12:54:01,893 - sync_service - INFO - Added POS receipt number to invoice: 1014
2025-09-29 12:54:02,887 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 12:54:03,966 - sync_service - INFO - API log added to SAP: sap - Invoices - failure
2025-09-29 12:54:03,967 - sync_service - ERROR - Failed to create invoice in SAP: HTTP 400: {
   "error" : {
      "code" : -1116,
      "message" : {
         "lang" : "en-us",
         "value" : "(130017) Please Select Gift Card on the Line"
      }
   }
}

2025-09-29 12:54:03,967 - sync_service - ERROR -  Failed to process order: HTTP 400: {
   "error" : {
      "code" : -1116,
      "message" : {
         "lang" : "en-us",
         "value" : "(130017) Please Select Gift Card on the Line"
      }
   }
}

2025-09-29 12:54:03,967 - sync_service - INFO - Processing order #1715 (ID: gid://shopify/Order/6420449591362)
2025-09-29 12:54:03,968 - sync_service - INFO - Processing order: #1715 | Payment: PAID | Fulfillment: FULFILLED
2025-09-29 12:54:03,969 - sync_service - INFO - Payment Gateway: Unknown | Card Type: Unknown | Amount: 0.0
2025-09-29 12:54:03,969 - sync_service - INFO -  GIFT CARDS USED: 2 cards, Total Amount: 17.0
2025-09-29 12:54:03,970 - sync_service - INFO -     Gift Card 1: 995b - 10.0 EGP
2025-09-29 12:54:03,971 - sync_service - INFO -     Gift Card 2: 46g4 - 7.0 EGP
2025-09-29 12:54:03,971 - sync_service - INFO -  SEARCHING CUSTOMER: Original phone: '+201005552224' -> Cleaned: '+201005552224'
2025-09-29 12:54:03,971 - sync_service - INFO -  SAP QUERY: Phone1 eq '+201005552224' or Phone2 eq '+201005552224' or Cellular eq '+201005552224'
2025-09-29 12:54:04,682 - sync_service - INFO -  CUSTOMER SEARCH RESULT: Found 1 customers
2025-09-29 12:54:04,683 - sync_service - INFO -  FOUND EXISTING CUSTOMER: C0021121 - Eman Mohamed
2025-09-29 12:54:04,685 - sync_service - INFO - Found existing customer: C0021121
2025-09-29 12:54:04,685 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000714', VariantSKU='fg-0000714', Name='iron man necklace - blue'
2025-09-29 12:54:04,687 - sync_service - INFO - Using location-based costing codes for order #1715: {'COGSCostingCode': 'LakeTown', 'COGSCostingCode2': 'SAL', 'COGSCostingCode3': 'General', 'CostingCode': 'LakeTown', 'CostingCode2': 'SAL', 'CostingCode3': 'General', 'Warehouse': 'LTW'}
2025-09-29 12:54:04,699 - sync_service - INFO -  Pricing for FG-0000714: Original=10.00, Sale=8.50, Discount=15.0%
2025-09-29 12:54:04,700 - sync_service - INFO -  Processing 2 gift card redemption(s)
2025-09-29 12:54:04,701 - sync_service - INFO -  Created gift card expense: 995b - Amount: -10.0
2025-09-29 12:54:04,702 - sync_service - INFO -  Created gift card expense: 46g4 - Amount: -7.0
2025-09-29 12:54:04,703 - sync_service - INFO - Added POS receipt number to invoice: 1016
2025-09-29 12:54:06,038 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 12:54:06,925 - sync_service - INFO - API log added to SAP: sap - Invoices - failure
2025-09-29 12:54:06,927 - sync_service - ERROR - Failed to create invoice in SAP: HTTP 400: {
   "error" : {
      "code" : -5002,
      "message" : {
         "lang" : "en-us",
         "value" : "480000058 - Expense code 2 is duplicated; please change it"
      }
   }
}

2025-09-29 12:54:06,928 - sync_service - ERROR -  Failed to process order: HTTP 400: {
   "error" : {
      "code" : -5002,
      "message" : {
         "lang" : "en-us",
         "value" : "480000058 - Expense code 2 is duplicated; please change it"
      }
   }
}

2025-09-29 12:54:06,929 - sync_service - INFO - Processing order #1716 (ID: gid://shopify/Order/6420456996930)
2025-09-29 12:54:06,930 - sync_service - INFO - Processing order: #1716 | Payment: PARTIALLY_REFUNDED | Fulfillment: FULFILLED
2025-09-29 12:54:06,931 - sync_service - INFO - Payment Gateway: Cash on Delivery (COD) | Card Type: Unknown | Amount: 208.5
2025-09-29 12:54:06,932 - sync_service - INFO -  ONLINE PAYMENT ID: gid://shopify/OrderTransaction/8217041010754
2025-09-29 12:54:06,932 - sync_service - INFO -  PAYMENT GATEWAYS USED: 1 gateways, Total Amount: 208.5 EGP
2025-09-29 12:54:06,933 - sync_service - INFO -     Gateway 1: Cash on Delivery (COD) - 208.5 EGP - Transaction ID: gid://shopify/OrderTransaction/8217041010754
2025-09-29 12:54:06,934 - sync_service - INFO -  SHIP TO: Soha Mohamed | zayed | Zayed, Giza | +201005526262
2025-09-29 12:54:06,934 - sync_service - INFO -  SAP DELIVERY ADDRESS: zayed, Zayed, Giza
Egypt
2025-09-29 12:54:06,935 - sync_service - INFO -  BILL TO: Soha Mohamed | zayed | Zayed, Giza | +201005526262
2025-09-29 12:54:06,935 - sync_service - INFO -  SAP BILLING ADDRESS: zayed, Zayed, Giza
Egypt
2025-09-29 12:54:06,936 - sync_service - INFO -  SEARCHING CUSTOMER: Original phone: '+201005526262' -> Cleaned: '+201005526262'
2025-09-29 12:54:06,937 - sync_service - INFO -  SAP QUERY: Phone1 eq '+201005526262' or Phone2 eq '+201005526262' or Cellular eq '+201005526262'
2025-09-29 12:54:07,262 - sync_service - INFO -  CUSTOMER SEARCH RESULT: Found 0 customers
2025-09-29 12:54:07,264 - sync_service - INFO -  NO EXISTING CUSTOMER FOUND for phone: +201005526262
2025-09-29 12:54:07,264 - sync_service - INFO - Creating new customer in SAP
2025-09-29 12:54:08,008 - sync_service - INFO - Created customer in SAP: C0021122
2025-09-29 12:54:08,009 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000714', VariantSKU='fg-0000714', Name='iron man necklace - blue'
2025-09-29 12:54:08,010 - sync_service - INFO - Using location-based costing codes for order #1716: {'COGSCostingCode': 'ONL', 'COGSCostingCode2': 'SAL', 'COGSCostingCode3': 'OnlineS', 'CostingCode': 'ONL', 'CostingCode2': 'SAL', 'CostingCode3': 'OnlineS', 'Warehouse': 'SW'}
2025-09-29 12:54:08,011 - sync_service - INFO -  Pricing for FG-0000714: Original=10.00, Sale=8.50, Discount=15.0%
2025-09-29 12:54:08,012 - sync_service - INFO -  No gift card redemptions found in this order
2025-09-29 12:54:08,012 - sync_service - INFO - Applied freight expenses for shipping fee 200.0: [{'ExpenseCode': 4, 'LineTotal': 80, 'DistributionRule': 'ONL', 'DistributionRule2': 'SAL', 'DistributionRule3': 'OnlineS'}, {'ExpenseCode': 6, 'LineTotal': 120, 'DistributionRule': 'ONL', 'DistributionRule2': 'SAL', 'DistributionRule3': 'OnlineS'}]
2025-09-29 12:54:08,589 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 12:54:09,747 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 12:54:09,749 - sync_service - INFO - Created invoice in SAP: 23208
2025-09-29 12:54:09,750 - sync_service - INFO - Created invoice data: {'DocEntry': 23208, 'DocNum': 200004186, 'DocTotal': 208.5, 'TransNum': 97074}
2025-09-29 12:54:11,381 - sync_service - INFO - Added tag 'sap_invoice_23208' to order gid://shopify/Order/6420456996930
2025-09-29 12:54:13,143 - sync_service - INFO - Added tag 'sap_invoice_synced' to order gid://shopify/Order/6420456996930
2025-09-29 12:54:13,145 - sync_service - INFO -  Invoice created and tagged for order #1716
2025-09-29 12:54:13,146 - sync_service - INFO - Order #1716 is PARTIALLY_REFUNDED - treating as PAID for payment processing (order was paid, then partially refunded)
2025-09-29 12:54:13,147 - sync_service - INFO -  ONLINE PAYMENT CALCULATION: Payment Amount: 208.5 EGP | Store Credit: 0.0 EGP
2025-09-29 12:54:13,148 - sync_service - INFO - COD payment - using COD account:  (courier: )
2025-09-29 12:54:14,100 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - failure
2025-09-29 12:54:14,100 - sync_service - ERROR - Failed to create incoming payment in SAP: HTTP 400: {
   "error" : {
      "code" : -10,
      "message" : {
         "lang" : "en-us",
         "value" : "Account for bank transfer has not been defined "
      }
   }
}

2025-09-29 12:54:14,100 - sync_service - WARNING - Failed to create incoming payment for #1716: HTTP 400: {
   "error" : {
      "code" : -10,
      "message" : {
         "lang" : "en-us",
         "value" : "Account for bank transfer has not been defined "
      }
   }
}

2025-09-29 12:54:15,838 - sync_service - INFO - Added tag 'sap_payment_failed' to order gid://shopify/Order/6420456996930
2025-09-29 12:54:15,839 - sync_service - INFO - Successfully processed order #1716
2025-09-29 12:54:15,840 - sync_service - INFO -  Processed order #1716 -> SAP Invoice: 23208
2025-09-29 12:54:15,841 - sync_service - INFO -     Payment ID: gid://shopify/OrderTransaction/8217041010754
2025-09-29 12:54:15,842 - sync_service - INFO -     Gateway: Cash on Delivery (COD) | Amount: 208.5
2025-09-29 12:54:15,843 - sync_service - INFO -     Ship To: Soha Mohamed - Zayed
2025-09-29 12:54:15,844 - sync_service - INFO -     Bill To: Soha Mohamed - Zayed
2025-09-29 12:54:15,844 - sync_service - INFO - Sync Event: {'sync_type': 'sales_orders', 'items_processed': 3, 'success_count': 1, 'error_count': 2, 'details': None}
2025-09-29 12:54:15,845 - sync_service - INFO - Orders sync completed. Processed: 3, Success: 1, Errors: 2
2025-09-29 12:55:55,567 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-29 12:55:55,577 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-29 12:55:55,577 - sync_service - INFO - Starting all syncs...
2025-09-29 12:55:55,577 - sync_service - INFO - Starting sales orders sync...
2025-09-29 12:55:55,579 - sync_service - INFO - Starting orders sync...
2025-09-29 12:55:55,579 - sync_service - INFO - Fetching orders with filter: tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10
2025-09-29 12:55:55,580 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-29 12:55:55,581 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: false, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        subtotalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        totalShippingPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Discounts applied ---\n                        discountApplications(first: 10) {\n                        edges {\n                            node {\n                            targetType        # ORDER or LINE_ITEM\n                            allocationMethod  # ACROSS / EACH / ONE\n                            value {\n                                __typename\n                                ... on PricingPercentageValue {\n                                percentage\n                                }\n                                ... on MoneyV2 {\n                                amount\n                                currencyCode\n                                }\n                            }\n                            ... on DiscountCodeApplication {\n                                code\n                            }\n                            ... on AutomaticDiscountApplication {\n                                title\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n                        \n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n                        shippingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n                        billingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n\n                        # --- Line Items with Discount Allocations ---\n                        lineItems(first: 50) {\n                        edges {\n                            node {\n                            id\n                            name\n                            quantity\n                            sku\n                            originalUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountedUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountAllocations {\n                                allocatedAmount {\n                                    amount\n                                    currencyCode\n                                }\n                                discountApplication {\n                                    __typename\n                                    ... on AutomaticDiscountApplication {\n                                        title\n                                    }\n                                    ... on DiscountCodeApplication {\n                                        code\n                                    }\n                                }\n                            }\n                            variant {\n                                id\n                                sku\n                                price\n                                compareAtPrice\n                                product {\n                                id\n                                title\n                                }\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Transactions (Gift cards show up here as gateway = "gift_card") ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson   # contains gift_card_id, last_characters etc if gift card used\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n\n            ', 'variables': {'first': 10, 'after': None, 'query': 'tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-09-29 12:55:56,231 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [{'node': {'id': 'gid://shopify/Order/6420443136066', 'name': '#1713', 'createdAt': '2025-09-29T08:27:49Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '72406990914-1-1014', 'totalPriceSet': {'shopMoney': {'amount': '30.0', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '30.0', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'firstName': 'Karim', 'lastName': 'Wafik', 'email': 'karimwafik.kw@gmail.com', 'phone': None, 'addresses': [{'address1': '97 Marghany st., Heliopolis, Cairo, Egypt', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': '21113', 'country': 'Egypt', 'phone': '+201005527292'}, {'address1': 'Stone Residence Compound 306, Third Settlement', 'address2': '9', 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'New Cairo', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'afasfag', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'asfasfas', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'asdfasfasf', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'nasr city', 'address2': None, 'city': 'nasr city', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '+201001234561'}, {'address1': 'new cairo', 'address2': None, 'city': 'new cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}]}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072665727042', 'name': 'Gift Card - 10 EGP', 'quantity': 3, 'sku': 'SR-0000072', 'originalUnitPriceSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42480052371522', 'sku': 'SR-0000072', 'price': '10.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7491930062914', 'title': 'Gift Card'}}}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217009913922', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '30.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:27:48Z', 'receiptJson': '{}'}]}}, {'node': {'id': 'gid://shopify/Order/6420449591362', 'name': '#1715', 'createdAt': '2025-09-29T08:36:18Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '72407023682-1-1016', 'totalPriceSet': {'shopMoney': {'amount': '17.0', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '17.0', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'firstName': 'Eman', 'lastName': 'Mohamed', 'email': 'test215@test.com', 'phone': '+201005552224', 'addresses': []}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072676704322', 'name': 'Iron Man Necklace - Blue', 'quantity': 2, 'sku': 'FG-0000714', 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217019547714', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'gift_card', 'amountSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:36:18Z', 'receiptJson': '{"gift_card_id":550425460802,"gift_card_last_characters":"995b"}'}, {'id': 'gid://shopify/OrderTransaction/8217020137538', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'gift_card', 'amountSet': {'shopMoney': {'amount': '7.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:36:45Z', 'receiptJson': '{"gift_card_id":550425395266,"gift_card_last_characters":"46g4"}'}]}}], 'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo2NDIwNDQ5NTkxMzYyLCJsYXN0X3ZhbHVlIjoxNzU5MTM0OTc4MDAwfQ=='}}}, 'status': 'success'}
2025-09-29 12:55:56,233 - sync_service - INFO - Retrieved 2 unsynced orders (limited to 5 most recent) from Shopify store local
2025-09-29 12:55:56,234 - sync_service - INFO - Processing 2 orders from store local
2025-09-29 12:55:56,235 - sync_service - INFO - Processing order #1713 (ID: gid://shopify/Order/6420443136066)
2025-09-29 12:55:56,236 - sync_service - INFO - Processing order: #1713 | Payment: PAID | Fulfillment: FULFILLED
2025-09-29 12:55:56,237 - sync_service - INFO - Payment Gateway: cash | Card Type: Unknown | Amount: 30.0
2025-09-29 12:55:56,238 - sync_service - INFO -  PAYMENT GATEWAYS USED: 1 gateways, Total Amount: 30.0 EGP
2025-09-29 12:55:56,239 - sync_service - INFO -     Gateway 1: cash - 30.0 EGP - Transaction ID: gid://shopify/OrderTransaction/8217009913922
2025-09-29 12:55:56,239 - sync_service - INFO -  SEARCHING CUSTOMER: Original phone: '+201005527292' -> Cleaned: '+201005527292'
2025-09-29 12:55:56,241 - sync_service - INFO -  SAP QUERY: Phone1 eq '+201005527292' or Phone2 eq '+201005527292' or Cellular eq '+201005527292'
2025-09-29 12:55:56,954 - sync_service - INFO - SAP login successful
2025-09-29 12:55:57,698 - sync_service - INFO -  CUSTOMER SEARCH RESULT: Found 1 customers
2025-09-29 12:55:57,699 - sync_service - INFO -  FOUND EXISTING CUSTOMER: C0021112 - Karim Wafik
2025-09-29 12:55:57,700 - sync_service - INFO - Found existing customer: C0021112
2025-09-29 12:55:57,700 - sync_service - INFO - Checking line item for gift card: SKU='sr-0000072', VariantSKU='sr-0000072', Name='gift card - 10 egp'
2025-09-29 12:55:57,701 - sync_service - INFO - Found 1 gift card purchase(s) in order #1713
2025-09-29 12:55:57,702 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-29 12:55:57,702 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-09-29 12:55:58,197 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}]}}, 'status': 'success'}
2025-09-29 12:55:58,198 - sync_service - ERROR - Error querying gift cards: 'NoneType' object has no attribute 'get'
2025-09-29 12:55:58,199 - sync_service - WARNING - No gift cards found in Shopify for order 6420443136066 - will create with generated IDs
2025-09-29 12:55:58,200 - sync_service - WARNING - No matching gift card found in Shopify for amount 30.0 - creating with generated ID
2025-09-29 12:55:59,524 - sync_service - INFO - SAP logging client login successful
2025-09-29 12:56:00,181 - sync_service - INFO - API log added to SAP: sap - GiftCards('GC6420443136066_30.0_0') - success
2025-09-29 12:56:00,182 - sync_service - INFO - Gift card GC6420443136066_30.0_0 exists in SAP
2025-09-29 12:56:00,183 - sync_service - INFO - Gift card GC6420443136066_30.0_0 already exists in SAP, using existing record
2025-09-29 12:56:00,185 - sync_service - INFO - Successfully created 1 gift card(s) in SAP
2025-09-29 12:56:00,185 - sync_service - INFO - Using location-based costing codes for order #1713: {'COGSCostingCode': 'DIP', 'COGSCostingCode2': 'SAL', 'COGSCostingCode3': 'General', 'CostingCode': 'DIP', 'CostingCode2': 'SAL', 'CostingCode3': 'General', 'Warehouse': 'DIP'}
2025-09-29 12:56:00,186 - sync_service - INFO - Added U_GiftCard field to line item: GC6420443136066_30.0_0 for amount: 30.0
2025-09-29 12:56:00,187 - sync_service - INFO -  No gift card redemptions found in this order
2025-09-29 12:56:00,188 - sync_service - INFO - Added POS receipt number to invoice: 1014
2025-09-29 12:56:01,544 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 12:56:03,062 - sync_service - INFO - API log added to SAP: sap - Invoices - failure
2025-09-29 12:56:03,064 - sync_service - ERROR - Failed to create invoice in SAP: HTTP 400: {
   "error" : {
      "code" : -1116,
      "message" : {
         "lang" : "en-us",
         "value" : "(130017) Please Select Gift Card on the Line"
      }
   }
}

2025-09-29 12:56:03,064 - sync_service - ERROR -  Failed to process order: HTTP 400: {
   "error" : {
      "code" : -1116,
      "message" : {
         "lang" : "en-us",
         "value" : "(130017) Please Select Gift Card on the Line"
      }
   }
}

2025-09-29 12:56:03,065 - sync_service - INFO - Processing order #1715 (ID: gid://shopify/Order/6420449591362)
2025-09-29 12:56:03,065 - sync_service - INFO - Processing order: #1715 | Payment: PAID | Fulfillment: FULFILLED
2025-09-29 12:56:03,066 - sync_service - INFO - Payment Gateway: Unknown | Card Type: Unknown | Amount: 0.0
2025-09-29 12:56:03,066 - sync_service - INFO -  GIFT CARDS USED: 2 cards, Total Amount: 17.0
2025-09-29 12:56:03,067 - sync_service - INFO -     Gift Card 1: 995b - 10.0 EGP
2025-09-29 12:56:03,068 - sync_service - INFO -     Gift Card 2: 46g4 - 7.0 EGP
2025-09-29 12:56:03,068 - sync_service - INFO -  SEARCHING CUSTOMER: Original phone: '+201005552224' -> Cleaned: '+201005552224'
2025-09-29 12:56:03,069 - sync_service - INFO -  SAP QUERY: Phone1 eq '+201005552224' or Phone2 eq '+201005552224' or Cellular eq '+201005552224'
2025-09-29 12:56:03,416 - sync_service - INFO -  CUSTOMER SEARCH RESULT: Found 1 customers
2025-09-29 12:56:03,417 - sync_service - INFO -  FOUND EXISTING CUSTOMER: C0021121 - Eman Mohamed
2025-09-29 12:56:03,418 - sync_service - INFO - Found existing customer: C0021121
2025-09-29 12:56:03,419 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000714', VariantSKU='fg-0000714', Name='iron man necklace - blue'
2025-09-29 12:56:03,420 - sync_service - INFO - Using location-based costing codes for order #1715: {'COGSCostingCode': 'LakeTown', 'COGSCostingCode2': 'SAL', 'COGSCostingCode3': 'General', 'CostingCode': 'LakeTown', 'CostingCode2': 'SAL', 'CostingCode3': 'General', 'Warehouse': 'LTW'}
2025-09-29 12:56:03,420 - sync_service - INFO -  Pricing for FG-0000714: Original=10.00, Sale=8.50, Discount=15.0%
2025-09-29 12:56:03,421 - sync_service - INFO -  Processing 2 gift card redemption(s)
2025-09-29 12:56:03,422 - sync_service - INFO -  Created gift card expense: 995b - Amount: -10.0
2025-09-29 12:56:03,422 - sync_service - INFO -  Created gift card expense: 46g4 - Amount: -7.0
2025-09-29 12:56:03,423 - sync_service - INFO - Added POS receipt number to invoice: 1016
2025-09-29 12:56:04,359 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 12:56:05,310 - sync_service - INFO - API log added to SAP: sap - Invoices - failure
2025-09-29 12:56:05,311 - sync_service - ERROR - Failed to create invoice in SAP: HTTP 400: {
   "error" : {
      "code" : -5002,
      "message" : {
         "lang" : "en-us",
         "value" : "480000058 - Expense code 2 is duplicated; please change it"
      }
   }
}

2025-09-29 12:56:05,311 - sync_service - ERROR -  Failed to process order: HTTP 400: {
   "error" : {
      "code" : -5002,
      "message" : {
         "lang" : "en-us",
         "value" : "480000058 - Expense code 2 is duplicated; please change it"
      }
   }
}

2025-09-29 12:56:05,313 - sync_service - INFO - Sync Event: {'sync_type': 'sales_orders', 'items_processed': 2, 'success_count': 0, 'error_count': 2, 'details': None}
2025-09-29 12:56:05,314 - sync_service - INFO - Orders sync completed. Processed: 2, Success: 0, Errors: 2
2025-09-29 12:56:05,315 - sync_service - INFO - Starting payment recovery sync...
2025-09-29 12:56:05,316 - sync_service - INFO - Starting payment recovery sync...
2025-09-29 12:56:05,316 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-29 12:56:05,317 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n\n                        # --- Transactions ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n            ', 'variables': {'first': 10, 'after': None, 'query': '(financial_status:paid OR financial_status:partially_refunded OR financial_status:refunded) AND tag:sap_invoice_synced AND -tag:sap_payment_synced AND -tag:sap_payment_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-09-29 12:56:15,341 - sync_service - ERROR - GraphQL query error for store local: 
2025-09-29 12:56:15,995 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-09-29 12:56:15,997 - sync_service - WARNING - GraphQL attempt 1/3 failed: GraphQL query error for store local: 
2025-09-29 12:56:15,998 - sync_service - INFO - Retrying in 2 seconds...
2025-09-29 12:56:18,005 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-29 12:56:18,006 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n\n                        # --- Transactions ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n            ', 'variables': {'first': 10, 'after': None, 'query': '(financial_status:paid OR financial_status:partially_refunded OR financial_status:refunded) AND tag:sap_invoice_synced AND -tag:sap_payment_synced AND -tag:sap_payment_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-09-29 12:56:28,019 - sync_service - ERROR - GraphQL query error for store local: 
2025-09-29 12:56:28,305 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-09-29 12:56:28,306 - sync_service - WARNING - GraphQL attempt 2/3 failed: GraphQL query error for store local: 
2025-09-29 12:56:28,307 - sync_service - INFO - Retrying in 4 seconds...
2025-09-29 12:56:32,328 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-29 12:56:32,330 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n\n                        # --- Transactions ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n            ', 'variables': {'first': 10, 'after': None, 'query': '(financial_status:paid OR financial_status:partially_refunded OR financial_status:refunded) AND tag:sap_invoice_synced AND -tag:sap_payment_synced AND -tag:sap_payment_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-09-29 12:56:32,837 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [{'node': {'id': 'gid://shopify/Order/6420456996930', 'name': '#1716', 'createdAt': '2025-09-29T08:50:59Z', 'displayFinancialStatus': 'PARTIALLY_REFUNDED', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'web', 'sourceIdentifier': None, 'totalPriceSet': {'shopMoney': {'amount': '208.5', 'currencyCode': 'EGP'}}, 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'firstName': 'Soha', 'lastName': 'Mohamed', 'email': 'testawyyyy@test.com', 'phone': None, 'addresses': [{'address1': 'zayed', 'address2': None, 'city': 'Zayed', 'province': 'Giza', 'zip': None, 'country': 'Egypt', 'phone': '+201005526262'}]}, 'metafields': {'edges': [{'node': {'namespace': 'custom', 'key': 'courier', 'value': '["4 - Tuyingo"]'}}]}, 'tags': ['returntest', 'salestest', 'sap_invoice_23208', 'sap_invoice_synced'], 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217039896642', 'kind': 'SALE', 'status': 'PENDING', 'gateway': 'Cash on Delivery (COD)', 'amountSet': {'shopMoney': {'amount': '208.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:50:59Z', 'receiptJson': '{}'}, {'id': 'gid://shopify/OrderTransaction/8217041010754', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'Cash on Delivery (COD)', 'amountSet': {'shopMoney': {'amount': '208.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:51:24Z', 'receiptJson': '{}'}, {'id': 'gid://shopify/OrderTransaction/8217044189250', 'kind': 'REFUND', 'status': 'SUCCESS', 'gateway': 'shopify_store_credit', 'amountSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:54:00Z', 'receiptJson': '{"account_id":143491138,"credit_operation_id":413204546}'}]}}], 'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo2NDIwNDU2OTk2OTMwLCJsYXN0X3ZhbHVlIjoxNzU5MTM1ODU5MDAwfQ=='}}}, 'status': 'success'}
2025-09-29 12:56:32,838 - sync_service - INFO - Retrieved 1 orders that need payment recovery from Shopify store local
2025-09-29 12:56:32,839 - sync_service - INFO - Processing 1 orders for payment recovery from store local
2025-09-29 12:56:32,840 - sync_service - INFO - Processing payment recovery for order #1716 (ID: gid://shopify/Order/6420456996930)
2025-09-29 12:56:32,840 - sync_service - INFO - Processing payment recovery for order: #1716 | Payment: PARTIALLY_REFUNDED | Fulfillment: FULFILLED
2025-09-29 12:56:32,842 - sync_service - INFO - Found SAP invoice DocEntry: 23208 for order #1716
2025-09-29 12:56:33,383 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 12:56:33,384 - sync_service - INFO - Found SAP invoice DocEntry: 23208
2025-09-29 12:56:33,386 - sync_service - INFO - Found SAP invoice DocEntry: 23208 for order #1716
2025-09-29 12:56:34,337 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-29 12:56:34,338 - sync_service - INFO - COD payment - using COD account: 10801245 (courier: Tuyingo)
2025-09-29 12:56:35,195 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-29 12:56:35,196 - sync_service - INFO - Created incoming payment in SAP: 22385
2025-09-29 12:56:35,198 - sync_service - INFO -  Successfully created payment for order #1716 -> SAP Invoice: 23208 -> Payment: 22385
2025-09-29 12:56:40,228 - sync_service - WARNING - Error adding tag to order gid://shopify/Order/6420456996930, attempt 1/3: 
2025-09-29 12:56:47,379 - sync_service - INFO - Added tag 'sap_payment_22385' to order gid://shopify/Order/6420456996930
2025-09-29 12:56:48,669 - sync_service - INFO - Added tag 'sap_payment_synced' to order gid://shopify/Order/6420456996930
2025-09-29 12:56:48,671 - sync_service - INFO -  Payment recovery successful for order #1716 -> SAP Invoice: 23208 -> Payment: 22385
2025-09-29 12:56:48,672 - sync_service - INFO - Sync Event: {'sync_type': 'payment_recovery', 'items_processed': 1, 'success_count': 1, 'error_count': 0, 'details': None}
2025-09-29 12:56:48,673 - sync_service - INFO - Payment recovery sync completed. Processed: 1, Success: 1, Skipped: 0, Errors: 0
2025-09-29 21:03:05,820 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-29 21:03:05,909 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-29 21:03:05,911 - sync_service - INFO - Starting all syncs...
2025-09-29 21:03:05,911 - sync_service - INFO - Starting sales orders sync...
2025-09-29 21:03:05,912 - sync_service - INFO - Starting orders sync...
2025-09-29 21:03:05,913 - sync_service - INFO - Fetching orders with filter: tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10
2025-09-29 21:03:05,913 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-29 21:03:05,914 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: false, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n                        retailLocation {\n                            id\n                        }\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        subtotalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        totalShippingPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Discounts applied ---\n                        discountApplications(first: 10) {\n                        edges {\n                            node {\n                            targetType        # ORDER or LINE_ITEM\n                            allocationMethod  # ACROSS / EACH / ONE\n                            value {\n                                __typename\n                                ... on PricingPercentageValue {\n                                percentage\n                                }\n                                ... on MoneyV2 {\n                                amount\n                                currencyCode\n                                }\n                            }\n                            ... on DiscountCodeApplication {\n                                code\n                            }\n                            ... on AutomaticDiscountApplication {\n                                title\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n                        \n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n                        shippingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n                        billingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n\n                        # --- Line Items with Discount Allocations ---\n                        lineItems(first: 50) {\n                        edges {\n                            node {\n                            id\n                            name\n                            quantity\n                            sku\n                            originalUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountedUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountAllocations {\n                                allocatedAmount {\n                                    amount\n                                    currencyCode\n                                }\n                                discountApplication {\n                                    __typename\n                                    ... on AutomaticDiscountApplication {\n                                        title\n                                    }\n                                    ... on DiscountCodeApplication {\n                                        code\n                                    }\n                                }\n                            }\n                            variant {\n                                id\n                                sku\n                                price\n                                compareAtPrice\n                                product {\n                                id\n                                title\n                                }\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Transactions (Gift cards show up here as gateway = "gift_card") ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson   # contains gift_card_id, last_characters etc if gift card used\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n\n            ', 'variables': {'first': 10, 'after': None, 'query': 'tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-09-29 21:03:07,013 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [{'node': {'id': 'gid://shopify/Order/6420422131778', 'name': '#1710', 'createdAt': '2025-09-29T07:56:31Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '70074892354-1-1010', 'retailLocation': {'id': 'gid://shopify/Location/70074892354'}, 'totalPriceSet': {'shopMoney': {'amount': '5008.5', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '5008.5', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'firstName': 'Nora', 'lastName': 'Maged', 'email': 'testawy@test.net', 'phone': '+201005528282', 'addresses': []}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072626208834', 'name': 'MM Watch - Blue', 'quantity': 1, 'sku': 'FG-0000715', 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42387257458754', 'sku': 'FG-0000715', 'price': '5000.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7527948386370', 'title': 'MM Watch'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072626241602', 'name': 'Iron Man Necklace - Blue', 'quantity': 1, 'sku': 'FG-0000714', 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8216980783170', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '5008.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T07:56:30Z', 'receiptJson': '{}'}]}}, {'node': {'id': 'gid://shopify/Order/6420425900098', 'name': '#1711', 'createdAt': '2025-09-29T08:01:14Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '70074892354-1-1012', 'retailLocation': {'id': 'gid://shopify/Location/70074990658'}, 'totalPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'firstName': 'Nora', 'lastName': 'Maged', 'email': 'testawy@test.net', 'phone': '+201005528282', 'addresses': []}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072630272066', 'name': 'Iron Man Necklace - Blue', 'quantity': 1, 'sku': 'FG-0000714', 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8216984485954', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'Geidea POS', 'amountSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:01:14Z', 'receiptJson': '{}'}]}}, {'node': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'createdAt': '2025-09-29T08:07:17Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '70074990658-1-1013', 'retailLocation': {'id': 'gid://shopify/Location/72406990914'}, 'totalPriceSet': {'shopMoney': {'amount': '10000.0', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '10000.0', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'firstName': 'Nora', 'lastName': 'Maged', 'email': 'testawy@test.net', 'phone': '+201005528282', 'addresses': []}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072642134082', 'name': 'MM Watch - Blue', 'quantity': 1, 'sku': 'FG-0000715', 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42387257458754', 'sku': 'FG-0000715', 'price': '5000.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7527948386370', 'title': 'MM Watch'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072644427842', 'name': 'Gift Card', 'quantity': 1, 'sku': None, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': None}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8216992448578', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'Valu POS', 'amountSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:07:17Z', 'receiptJson': '{}'}]}}, {'node': {'id': 'gid://shopify/Order/6420443136066', 'name': '#1713', 'createdAt': '2025-09-29T08:27:49Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '72406990914-1-1014', 'retailLocation': {'id': 'gid://shopify/Location/70074957890'}, 'totalPriceSet': {'shopMoney': {'amount': '30.0', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '30.0', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'firstName': 'Karim', 'lastName': 'Wafik', 'email': 'karimwafik.kw@gmail.com', 'phone': None, 'addresses': [{'address1': '97 Marghany st., Heliopolis, Cairo, Egypt', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': '21113', 'country': 'Egypt', 'phone': '+201005527292'}, {'address1': 'Stone Residence Compound 306, Third Settlement', 'address2': '9', 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'New Cairo', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'afasfag', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'asfasfas', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'asdfasfasf', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'nasr city', 'address2': None, 'city': 'nasr city', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '+201001234561'}, {'address1': 'new cairo', 'address2': None, 'city': 'new cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}]}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072665727042', 'name': 'Gift Card - 10 EGP', 'quantity': 3, 'sku': 'SR-0000072', 'originalUnitPriceSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42480052371522', 'sku': 'SR-0000072', 'price': '10.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7491930062914', 'title': 'Gift Card'}}}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217009913922', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '30.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:27:48Z', 'receiptJson': '{}'}]}}, {'node': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'createdAt': '2025-09-29T08:32:12Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '70074957890-1-1015', 'retailLocation': {'id': 'gid://shopify/Location/72407023682'}, 'totalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'firstName': 'Eman', 'lastName': 'Mohamed', 'email': 'test215@test.com', 'phone': '+201005552224', 'addresses': []}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072670904386', 'name': 'MM Watch - Blue', 'quantity': 1, 'sku': 'FG-0000715', 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42387257458754', 'sku': 'FG-0000715', 'price': '5000.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7527948386370', 'title': 'MM Watch'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072670937154', 'name': 'Iron Man Necklace - Blue', 'quantity': 1, 'sku': 'FG-0000714', 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072683290690', 'name': 'Gift Card', 'quantity': 1, 'sku': None, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': None}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217014566978', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'gift_card', 'amountSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:11Z', 'receiptJson': '{"gift_card_id":550425428034,"gift_card_last_characters":"bcah"}'}, {'id': 'gid://shopify/OrderTransaction/8217014730818', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '4998.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:24Z', 'receiptJson': '{}'}]}}, {'node': {'id': 'gid://shopify/Order/6420456996930', 'name': '#1716', 'createdAt': '2025-09-29T08:50:59Z', 'displayFinancialStatus': 'PARTIALLY_REFUNDED', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'web', 'sourceIdentifier': None, 'retailLocation': None, 'totalPriceSet': {'shopMoney': {'amount': '208.5', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '200.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'firstName': 'Soha', 'lastName': 'Mohamed', 'email': 'testawyyyy@test.com', 'phone': None, 'addresses': [{'address1': 'zayed', 'address2': None, 'city': 'Zayed', 'province': 'Giza', 'zip': None, 'country': 'Egypt', 'phone': '+201005526262'}]}, 'metafields': {'edges': [{'node': {'namespace': 'custom', 'key': 'courier', 'value': '["4 - Tuyingo"]'}}]}, 'tags': ['returntest', 'salestest'], 'shippingAddress': {'address1': 'zayed', 'address2': None, 'city': 'Zayed', 'province': 'Giza', 'zip': None, 'country': 'Egypt', 'phone': '+201005526262', 'firstName': 'Soha', 'lastName': 'Mohamed', 'company': None}, 'billingAddress': {'address1': 'zayed', 'address2': None, 'city': 'Zayed', 'province': 'Giza', 'zip': None, 'country': 'Egypt', 'phone': '+201005526262', 'firstName': 'Soha', 'lastName': 'Mohamed', 'company': None}, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072692105282', 'name': 'Iron Man Necklace - Blue', 'quantity': 1, 'sku': 'FG-0000714', 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217039896642', 'kind': 'SALE', 'status': 'PENDING', 'gateway': 'Cash on Delivery (COD)', 'amountSet': {'shopMoney': {'amount': '208.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:50:59Z', 'receiptJson': '{}'}, {'id': 'gid://shopify/OrderTransaction/8217041010754', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'Cash on Delivery (COD)', 'amountSet': {'shopMoney': {'amount': '208.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:51:24Z', 'receiptJson': '{}'}, {'id': 'gid://shopify/OrderTransaction/8217044189250', 'kind': 'REFUND', 'status': 'SUCCESS', 'gateway': 'shopify_store_credit', 'amountSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:54:00Z', 'receiptJson': '{"account_id":143491138,"credit_operation_id":413204546}'}]}}], 'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo2NDIwNDU2OTk2OTMwLCJsYXN0X3ZhbHVlIjoxNzU5MTM1ODU5MDAwfQ=='}}}, 'status': 'success'}
2025-09-29 21:03:07,015 - sync_service - INFO - Retrieved 6 unsynced orders (limited to 5 most recent) from Shopify store local
2025-09-29 21:03:07,017 - sync_service - INFO - Processing 6 orders from store local
2025-09-29 21:03:07,017 - sync_service - INFO - Processing order #1710 (ID: gid://shopify/Order/6420422131778)
2025-09-29 21:03:07,018 - sync_service - INFO - Processing order: #1710 | Payment: PAID | Fulfillment: FULFILLED
2025-09-29 21:03:07,019 - sync_service - INFO - Payment Gateway: cash | Card Type: Unknown | Amount: 5008.5
2025-09-29 21:03:07,019 - sync_service - INFO -  PAYMENT GATEWAYS USED: 1 gateways, Total Amount: 5008.5 EGP
2025-09-29 21:03:07,020 - sync_service - INFO -     Gateway 1: cash - 5008.5 EGP - Transaction ID: gid://shopify/OrderTransaction/8216980783170
2025-09-29 21:03:07,020 - sync_service - INFO -  SEARCHING CUSTOMER: Original phone: '+201005528282' -> Cleaned: '+201005528282'
2025-09-29 21:03:07,020 - sync_service - INFO -  SAP QUERY: Phone1 eq '+201005528282' or Phone2 eq '+201005528282' or Cellular eq '+201005528282'
2025-09-29 21:03:08,348 - sync_service - INFO - SAP login successful
2025-09-29 21:03:09,567 - sync_service - INFO -  CUSTOMER SEARCH RESULT: Found 1 customers
2025-09-29 21:03:09,567 - sync_service - INFO -  FOUND EXISTING CUSTOMER: C0021120 - Nora Maged
2025-09-29 21:03:09,568 - sync_service - INFO - Found existing customer: C0021120
2025-09-29 21:03:09,568 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000715', VariantSKU='fg-0000715', Name='mm watch - blue'
2025-09-29 21:03:09,569 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000714', VariantSKU='fg-0000714', Name='iron man necklace - blue'
2025-09-29 21:03:09,571 - sync_service - INFO - Using location-based costing codes for order #1710: {'COGSCostingCode': 'WAT', 'COGSCostingCode2': 'SAL', 'COGSCostingCode3': 'General', 'CostingCode': 'WAT', 'CostingCode2': 'SAL', 'CostingCode3': 'General', 'Warehouse': '5A'}
2025-09-29 21:03:09,571 - sync_service - INFO -  Pricing for FG-0000714: Original=10.00, Sale=8.50, Discount=15.0%
2025-09-29 21:03:09,572 - sync_service - INFO -  No gift card redemptions found in this order
2025-09-29 21:03:09,572 - sync_service - INFO - Added POS receipt number to invoice: 1010
2025-09-29 21:03:11,815 - sync_service - INFO - SAP logging client login successful
2025-09-29 21:03:12,846 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 21:03:15,816 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 21:03:15,817 - sync_service - INFO - Created invoice in SAP: 23209
2025-09-29 21:03:15,817 - sync_service - INFO - Created invoice data: {'DocEntry': 23209, 'DocNum': 100018916, 'DocTotal': 5008.5, 'TransNum': 97076}
2025-09-29 21:03:28,634 - sync_service - INFO - Added tag 'sap_invoice_23209' to order gid://shopify/Order/6420422131778
2025-09-29 21:03:30,230 - sync_service - INFO - Added tag 'sap_invoice_synced' to order gid://shopify/Order/6420422131778
2025-09-29 21:03:30,232 - sync_service - INFO -  Invoice created and tagged for order #1710
2025-09-29 21:03:30,233 - sync_service - INFO - Order #1710 is paid - creating incoming payment in SAP
2025-09-29 21:03:30,234 - sync_service - INFO -  POS ORDER DETECTED - Processing multiple payment types
2025-09-29 21:03:30,234 - sync_service - INFO -  CASH TRANSACTION: 5008.5 EGP - Account: 10801228
2025-09-29 21:03:30,236 - sync_service - INFO -  POS PAYMENT SUMMARY: Total Calculated Amount: 5008.5 EGP
2025-09-29 21:03:34,717 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-29 21:03:34,718 - sync_service - INFO - Created incoming payment in SAP: 22386
2025-09-29 21:03:34,720 - sync_service - INFO - Successfully created incoming payment: 22386
2025-09-29 21:03:36,520 - sync_service - INFO - Added tag 'sap_payment_22386' to order gid://shopify/Order/6420422131778
2025-09-29 21:03:49,378 - sync_service - INFO - Added tag 'sap_payment_synced' to order gid://shopify/Order/6420422131778
2025-09-29 21:03:49,379 - sync_service - INFO - Successfully processed order #1710
2025-09-29 21:03:49,380 - sync_service - INFO -  Processed order #1710 -> SAP Invoice: 23209
2025-09-29 21:03:49,382 - sync_service - INFO -     Gateway: cash | Amount: 5008.5
2025-09-29 21:03:49,383 - sync_service - INFO - Processing order #1711 (ID: gid://shopify/Order/6420425900098)
2025-09-29 21:03:49,385 - sync_service - INFO - Processing order: #1711 | Payment: PAID | Fulfillment: FULFILLED
2025-09-29 21:03:49,391 - sync_service - INFO - Payment Gateway: Geidea POS | Card Type: Unknown | Amount: 8.5
2025-09-29 21:03:49,392 - sync_service - INFO -  PAYMENT GATEWAYS USED: 1 gateways, Total Amount: 8.5 EGP
2025-09-29 21:03:49,392 - sync_service - INFO -     Gateway 1: Geidea POS - 8.5 EGP - Transaction ID: gid://shopify/OrderTransaction/8216984485954
2025-09-29 21:03:49,394 - sync_service - INFO -  SEARCHING CUSTOMER: Original phone: '+201005528282' -> Cleaned: '+201005528282'
2025-09-29 21:03:49,397 - sync_service - INFO -  SAP QUERY: Phone1 eq '+201005528282' or Phone2 eq '+201005528282' or Cellular eq '+201005528282'
2025-09-29 21:03:50,272 - sync_service - INFO -  CUSTOMER SEARCH RESULT: Found 1 customers
2025-09-29 21:03:50,272 - sync_service - INFO -  FOUND EXISTING CUSTOMER: C0021120 - Nora Maged
2025-09-29 21:03:50,273 - sync_service - INFO - Found existing customer: C0021120
2025-09-29 21:03:50,273 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000714', VariantSKU='fg-0000714', Name='iron man necklace - blue'
2025-09-29 21:03:50,273 - sync_service - INFO - Using location-based costing codes for order #1711: {'COGSCostingCode': 'WAT', 'COGSCostingCode2': 'SAL', 'COGSCostingCode3': 'General', 'CostingCode': 'WAT', 'CostingCode2': 'SAL', 'CostingCode3': 'General', 'Warehouse': '5A'}
2025-09-29 21:03:50,274 - sync_service - INFO -  Pricing for FG-0000714: Original=10.00, Sale=8.50, Discount=15.0%
2025-09-29 21:03:50,274 - sync_service - INFO -  No gift card redemptions found in this order
2025-09-29 21:03:50,275 - sync_service - INFO - Added POS receipt number to invoice: 1012
2025-09-29 21:03:52,039 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 21:03:54,126 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 21:03:54,127 - sync_service - INFO - Created invoice in SAP: 23210
2025-09-29 21:03:54,128 - sync_service - INFO - Created invoice data: {'DocEntry': 23210, 'DocNum': 100018917, 'DocTotal': 8.5, 'TransNum': 97078}
2025-09-29 21:04:07,544 - sync_service - INFO - Added tag 'sap_invoice_23210' to order gid://shopify/Order/6420425900098
2025-09-29 21:04:09,367 - sync_service - INFO - Added tag 'sap_invoice_synced' to order gid://shopify/Order/6420425900098
2025-09-29 21:04:09,369 - sync_service - INFO -  Invoice created and tagged for order #1711
2025-09-29 21:04:09,370 - sync_service - INFO - Order #1711 is paid - creating incoming payment in SAP
2025-09-29 21:04:09,372 - sync_service - INFO -  POS ORDER DETECTED - Processing multiple payment types
2025-09-29 21:04:09,373 - sync_service - INFO -  CREDIT CARD TRANSACTION: Geidea POS - 8.5 EGP - Account: 10801235
2025-09-29 21:04:09,374 - sync_service - INFO -  POS PAYMENT SUMMARY: Total Calculated Amount: 8.5 EGP
2025-09-29 21:04:11,569 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-29 21:04:11,572 - sync_service - INFO - Created incoming payment in SAP: 22387
2025-09-29 21:04:11,573 - sync_service - INFO - Successfully created incoming payment: 22387
2025-09-29 21:04:13,132 - sync_service - INFO - Added tag 'sap_payment_22387' to order gid://shopify/Order/6420425900098
2025-09-29 21:04:14,693 - sync_service - INFO - Added tag 'sap_payment_synced' to order gid://shopify/Order/6420425900098
2025-09-29 21:04:14,695 - sync_service - INFO - Successfully processed order #1711
2025-09-29 21:04:14,695 - sync_service - INFO -  Processed order #1711 -> SAP Invoice: 23210
2025-09-29 21:04:14,696 - sync_service - INFO -     Gateway: Geidea POS | Amount: 8.5
2025-09-29 21:04:14,697 - sync_service - INFO - Processing order #1712 (ID: gid://shopify/Order/6420431896642)
2025-09-29 21:04:14,698 - sync_service - INFO - Processing order: #1712 | Payment: PAID | Fulfillment: FULFILLED
2025-09-29 21:04:14,699 - sync_service - INFO - Payment Gateway: Valu POS | Card Type: Unknown | Amount: 5000.0
2025-09-29 21:04:14,699 - sync_service - INFO -  PAYMENT GATEWAYS USED: 1 gateways, Total Amount: 5000.0 EGP
2025-09-29 21:04:14,700 - sync_service - INFO -     Gateway 1: Valu POS - 5000.0 EGP - Transaction ID: gid://shopify/OrderTransaction/8216992448578
2025-09-29 21:04:14,700 - sync_service - INFO -  SEARCHING CUSTOMER: Original phone: '+201005528282' -> Cleaned: '+201005528282'
2025-09-29 21:04:14,701 - sync_service - INFO -  SAP QUERY: Phone1 eq '+201005528282' or Phone2 eq '+201005528282' or Cellular eq '+201005528282'
2025-09-29 21:04:18,430 - sync_service - INFO -  CUSTOMER SEARCH RESULT: Found 1 customers
2025-09-29 21:04:18,430 - sync_service - INFO -  FOUND EXISTING CUSTOMER: C0021120 - Nora Maged
2025-09-29 21:04:18,431 - sync_service - INFO - Found existing customer: C0021120
2025-09-29 21:04:18,432 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000715', VariantSKU='fg-0000715', Name='mm watch - blue'
2025-09-29 21:04:18,432 - sync_service - INFO - Checking line item for gift card: SKU='', VariantSKU='', Name='gift card'
2025-09-29 21:04:18,433 - sync_service - INFO - Found 1 gift card purchase(s) in order #1712
2025-09-29 21:04:18,433 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-29 21:04:18,434 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-09-29 21:04:28,448 - sync_service - ERROR - GraphQL query error for store local: 
2025-09-29 21:04:28,954 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-09-29 21:04:28,955 - sync_service - WARNING - GraphQL attempt 1/3 failed: GraphQL query error for store local: 
2025-09-29 21:04:28,956 - sync_service - INFO - Retrying in 2 seconds...
2025-09-29 21:04:30,973 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-29 21:04:30,974 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-09-29 21:04:31,436 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}]}}, 'status': 'success'}
2025-09-29 21:04:31,437 - sync_service - ERROR - Error querying gift cards: 'NoneType' object has no attribute 'get'
2025-09-29 21:04:31,437 - sync_service - WARNING - No gift cards found in Shopify for order 6420431896642 - will create with generated IDs
2025-09-29 21:04:31,439 - sync_service - WARNING - No matching gift card found in Shopify for unit price 5000.0 - creating with generated ID
2025-09-29 21:04:31,439 - sync_service - INFO - Preparing gift card data for invoice line: GC6420431896642_5000.0_0 - Amount: 5000.0 - SKU: 
2025-09-29 21:04:31,440 - sync_service - INFO - Successfully created 1 gift card(s) in SAP
2025-09-29 21:04:31,440 - sync_service - INFO - Using location-based costing codes for order #1712: {'COGSCostingCode': 'ZAM', 'COGSCostingCode2': 'SAL', 'COGSCostingCode3': 'General', 'CostingCode': 'ZAM', 'CostingCode2': 'SAL', 'CostingCode3': 'General', 'Warehouse': 'ZW'}
2025-09-29 21:04:31,441 - sync_service - INFO - Skipping gift card line item for POS refund: Gift Card - Amount: 5000.0
2025-09-29 21:04:31,441 - sync_service - INFO -  No gift card redemptions found in this order
2025-09-29 21:04:31,441 - sync_service - INFO - Added POS receipt number to invoice: 1013
2025-09-29 21:04:33,182 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 21:04:35,332 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 21:04:35,333 - sync_service - INFO - Created invoice in SAP: 23211
2025-09-29 21:04:35,334 - sync_service - INFO - Created invoice data: {'DocEntry': 23211, 'DocNum': 100018918, 'DocTotal': 5000.0, 'TransNum': 97080}
2025-09-29 21:04:48,806 - sync_service - INFO - Added tag 'sap_invoice_23211' to order gid://shopify/Order/6420431896642
2025-09-29 21:04:50,880 - sync_service - INFO - Added tag 'sap_invoice_synced' to order gid://shopify/Order/6420431896642
2025-09-29 21:04:50,881 - sync_service - INFO -  Invoice created and tagged for order #1712
2025-09-29 21:04:50,882 - sync_service - INFO - Order #1712 is paid - creating incoming payment in SAP
2025-09-29 21:04:50,883 - sync_service - INFO -  POS ORDER DETECTED - Processing multiple payment types
2025-09-29 21:04:50,883 - sync_service - INFO -  BANK TRANSFER TRANSACTION: Valu POS - 5000.0 EGP - Account: 10801231
2025-09-29 21:04:50,884 - sync_service - INFO -  POS PAYMENT SUMMARY: Total Calculated Amount: 5000.0 EGP
2025-09-29 21:04:53,331 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-29 21:04:53,332 - sync_service - INFO - Created incoming payment in SAP: 22388
2025-09-29 21:04:53,333 - sync_service - INFO - Successfully created incoming payment: 22388
2025-09-29 21:05:06,093 - sync_service - INFO - Added tag 'sap_payment_22388' to order gid://shopify/Order/6420431896642
2025-09-29 21:05:07,876 - sync_service - INFO - Added tag 'sap_payment_synced' to order gid://shopify/Order/6420431896642
2025-09-29 21:05:07,881 - sync_service - INFO - Successfully processed order #1712
2025-09-29 21:05:07,882 - sync_service - INFO -  Processed order #1712 -> SAP Invoice: 23211
2025-09-29 21:05:07,883 - sync_service - INFO -     Gateway: Valu POS | Amount: 5000.0
2025-09-29 21:05:07,884 - sync_service - INFO - Processing order #1713 (ID: gid://shopify/Order/6420443136066)
2025-09-29 21:05:07,885 - sync_service - INFO - Processing order: #1713 | Payment: PAID | Fulfillment: FULFILLED
2025-09-29 21:05:07,886 - sync_service - INFO - Payment Gateway: cash | Card Type: Unknown | Amount: 30.0
2025-09-29 21:05:07,887 - sync_service - INFO -  PAYMENT GATEWAYS USED: 1 gateways, Total Amount: 30.0 EGP
2025-09-29 21:05:07,888 - sync_service - INFO -     Gateway 1: cash - 30.0 EGP - Transaction ID: gid://shopify/OrderTransaction/8217009913922
2025-09-29 21:05:07,889 - sync_service - INFO -  SEARCHING CUSTOMER: Original phone: '+201005527292' -> Cleaned: '+201005527292'
2025-09-29 21:05:07,889 - sync_service - INFO -  SAP QUERY: Phone1 eq '+201005527292' or Phone2 eq '+201005527292' or Cellular eq '+201005527292'
2025-09-29 21:05:09,014 - sync_service - INFO -  CUSTOMER SEARCH RESULT: Found 1 customers
2025-09-29 21:05:09,018 - sync_service - INFO -  FOUND EXISTING CUSTOMER: C0021112 - Karim Wafik
2025-09-29 21:05:09,019 - sync_service - INFO - Found existing customer: C0021112
2025-09-29 21:05:09,020 - sync_service - INFO - Checking line item for gift card: SKU='sr-0000072', VariantSKU='sr-0000072', Name='gift card - 10 egp'
2025-09-29 21:05:09,021 - sync_service - INFO - Found 1 gift card purchase(s) in order #1713
2025-09-29 21:05:09,021 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-29 21:05:09,022 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-09-29 21:05:09,916 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}]}}, 'status': 'success'}
2025-09-29 21:05:09,918 - sync_service - ERROR - Error querying gift cards: 'NoneType' object has no attribute 'get'
2025-09-29 21:05:09,919 - sync_service - WARNING - No gift cards found in Shopify for order 6420443136066 - will create with generated IDs
2025-09-29 21:05:09,922 - sync_service - WARNING - No matching gift card found in Shopify for unit price 10.0 - creating with generated ID
2025-09-29 21:05:09,959 - sync_service - INFO - Preparing gift card data for invoice line: GC6420443136066_10.0_0 - Amount: 10.0 - SKU: SR-0000072
2025-09-29 21:05:09,961 - sync_service - WARNING - No matching gift card found in Shopify for unit price 10.0 - creating with generated ID
2025-09-29 21:05:09,962 - sync_service - INFO - Preparing gift card data for invoice line: GC6420443136066_10.0_1 - Amount: 10.0 - SKU: SR-0000072
2025-09-29 21:05:09,974 - sync_service - WARNING - No matching gift card found in Shopify for unit price 10.0 - creating with generated ID
2025-09-29 21:05:09,976 - sync_service - INFO - Preparing gift card data for invoice line: GC6420443136066_10.0_2 - Amount: 10.0 - SKU: SR-0000072
2025-09-29 21:05:09,980 - sync_service - INFO - Successfully created 3 gift card(s) in SAP
2025-09-29 21:05:09,981 - sync_service - INFO - Using location-based costing codes for order #1713: {'COGSCostingCode': 'DIP', 'COGSCostingCode2': 'SAL', 'COGSCostingCode3': 'General', 'CostingCode': 'DIP', 'CostingCode2': 'SAL', 'CostingCode3': 'General', 'Warehouse': 'DIP'}
2025-09-29 21:05:09,983 - sync_service - INFO - Creating 3 separate lines for gift card item: SR-0000072
2025-09-29 21:05:09,985 - sync_service - INFO - Added U_GiftCard field to line item: GC6420443136066_10.0_0 for gift card 1/3
2025-09-29 21:05:09,986 - sync_service - INFO - Added U_GiftCard field to line item: GC6420443136066_10.0_1 for gift card 2/3
2025-09-29 21:05:09,988 - sync_service - INFO - Added U_GiftCard field to line item: GC6420443136066_10.0_2 for gift card 3/3
2025-09-29 21:05:09,990 - sync_service - INFO -  No gift card redemptions found in this order
2025-09-29 21:05:09,993 - sync_service - INFO - Added POS receipt number to invoice: 1014
2025-09-29 21:05:11,865 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 21:05:13,642 - sync_service - INFO - API log added to SAP: sap - Invoices - failure
2025-09-29 21:05:13,643 - sync_service - ERROR - Failed to create invoice in SAP: HTTP 400: {
   "error" : {
      "code" : -1116,
      "message" : {
         "lang" : "en-us",
         "value" : "(130017) Please Select Gift Card on the Line"
      }
   }
}

2025-09-29 21:05:13,645 - sync_service - ERROR -  Failed to process order: HTTP 400: {
   "error" : {
      "code" : -1116,
      "message" : {
         "lang" : "en-us",
         "value" : "(130017) Please Select Gift Card on the Line"
      }
   }
}

2025-09-29 21:05:13,645 - sync_service - INFO - Processing order #1714 (ID: gid://shopify/Order/6420446183490)
2025-09-29 21:05:13,646 - sync_service - INFO - Processing order: #1714 | Payment: PAID | Fulfillment: FULFILLED
2025-09-29 21:05:13,646 - sync_service - INFO - Payment Gateway: cash | Card Type: Unknown | Amount: 4998.5
2025-09-29 21:05:13,646 - sync_service - INFO -  GIFT CARDS USED: 1 cards, Total Amount: 10.0
2025-09-29 21:05:13,647 - sync_service - INFO -     Gift Card 1: bcah - 10.0 EGP
2025-09-29 21:05:13,647 - sync_service - INFO -  PAYMENT GATEWAYS USED: 1 gateways, Total Amount: 4998.5 EGP
2025-09-29 21:05:13,647 - sync_service - INFO -     Gateway 1: cash - 4998.5 EGP - Transaction ID: gid://shopify/OrderTransaction/8217014730818
2025-09-29 21:05:13,649 - sync_service - INFO -  SEARCHING CUSTOMER: Original phone: '+201005552224' -> Cleaned: '+201005552224'
2025-09-29 21:05:13,649 - sync_service - INFO -  SAP QUERY: Phone1 eq '+201005552224' or Phone2 eq '+201005552224' or Cellular eq '+201005552224'
2025-09-29 21:05:14,522 - sync_service - INFO -  CUSTOMER SEARCH RESULT: Found 1 customers
2025-09-29 21:05:14,524 - sync_service - INFO -  FOUND EXISTING CUSTOMER: C0021121 - Eman Mohamed
2025-09-29 21:05:14,525 - sync_service - INFO - Found existing customer: C0021121
2025-09-29 21:05:14,526 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000715', VariantSKU='fg-0000715', Name='mm watch - blue'
2025-09-29 21:05:14,526 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000714', VariantSKU='fg-0000714', Name='iron man necklace - blue'
2025-09-29 21:05:14,527 - sync_service - INFO - Checking line item for gift card: SKU='', VariantSKU='', Name='gift card'
2025-09-29 21:05:14,527 - sync_service - INFO - Found 1 gift card purchase(s) in order #1714
2025-09-29 21:05:14,528 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-29 21:05:14,528 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-09-29 21:05:17,701 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}]}}, 'status': 'success'}
2025-09-29 21:05:17,702 - sync_service - ERROR - Error querying gift cards: 'NoneType' object has no attribute 'get'
2025-09-29 21:05:17,703 - sync_service - WARNING - No gift cards found in Shopify for order 6420446183490 - will create with generated IDs
2025-09-29 21:05:17,704 - sync_service - WARNING - No matching gift card found in Shopify for unit price 5000.0 - creating with generated ID
2025-09-29 21:05:17,705 - sync_service - INFO - Preparing gift card data for invoice line: GC6420446183490_5000.0_0 - Amount: 5000.0 - SKU: 
2025-09-29 21:05:17,705 - sync_service - INFO - Successfully created 1 gift card(s) in SAP
2025-09-29 21:05:17,706 - sync_service - INFO - Using location-based costing codes for order #1714: {'COGSCostingCode': 'Arkan', 'COGSCostingCode2': 'SAL', 'COGSCostingCode3': 'General', 'CostingCode': 'Arkan', 'CostingCode2': 'SAL', 'CostingCode3': 'General', 'Warehouse': 'Arkan'}
2025-09-29 21:05:17,707 - sync_service - INFO -  Pricing for FG-0000714: Original=10.00, Sale=8.50, Discount=15.0%
2025-09-29 21:05:17,707 - sync_service - INFO - Skipping gift card line item for POS refund: Gift Card - Amount: 5000.0
2025-09-29 21:05:17,708 - sync_service - INFO -  Processing 1 gift card redemption(s)
2025-09-29 21:05:17,739 - sync_service - INFO -  Created gift card expense: bcah - Amount: -10.0
2025-09-29 21:05:17,740 - sync_service - INFO - Added POS receipt number to invoice: 1015
2025-09-29 21:05:19,023 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 21:05:21,246 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 21:05:21,247 - sync_service - INFO - Created invoice in SAP: 23212
2025-09-29 21:05:21,248 - sync_service - INFO - Created invoice data: {'DocEntry': 23212, 'DocNum': 100018919, 'DocTotal': 4998.5, 'TransNum': 97082}
2025-09-29 21:05:22,982 - sync_service - INFO - Added tag 'sap_invoice_23212' to order gid://shopify/Order/6420446183490
2025-09-29 21:05:36,300 - sync_service - INFO - Added tag 'sap_invoice_synced' to order gid://shopify/Order/6420446183490
2025-09-29 21:05:36,301 - sync_service - INFO -  Invoice created and tagged for order #1714
2025-09-29 21:05:36,302 - sync_service - INFO - Order #1714 is paid - creating incoming payment in SAP
2025-09-29 21:05:36,302 - sync_service - INFO -  POS ORDER DETECTED - Processing multiple payment types
2025-09-29 21:05:36,303 - sync_service - INFO -  CASH TRANSACTION: 4998.5 EGP - Account: 10801239
2025-09-29 21:05:36,304 - sync_service - INFO -  POS PAYMENT SUMMARY: Total Calculated Amount: 4998.5 EGP
2025-09-29 21:05:37,926 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-29 21:05:37,928 - sync_service - INFO - Created incoming payment in SAP: 22389
2025-09-29 21:05:37,929 - sync_service - INFO - Successfully created incoming payment: 22389
2025-09-29 21:05:40,104 - sync_service - INFO - Added tag 'sap_payment_22389' to order gid://shopify/Order/6420446183490
2025-09-29 21:05:51,070 - sync_service - INFO - Added tag 'sap_payment_synced' to order gid://shopify/Order/6420446183490
2025-09-29 21:05:51,071 - sync_service - INFO - Successfully processed order #1714
2025-09-29 21:05:51,071 - sync_service - INFO -  Processed order #1714 -> SAP Invoice: 23212
2025-09-29 21:05:51,072 - sync_service - INFO -     Gateway: cash | Amount: 4998.5
2025-09-29 21:05:51,073 - sync_service - INFO - Processing order #1716 (ID: gid://shopify/Order/6420456996930)
2025-09-29 21:05:51,073 - sync_service - INFO - Processing order: #1716 | Payment: PARTIALLY_REFUNDED | Fulfillment: FULFILLED
2025-09-29 21:05:51,074 - sync_service - INFO - Payment Gateway: Cash on Delivery (COD) | Card Type: Unknown | Amount: 208.5
2025-09-29 21:05:51,074 - sync_service - INFO -  ONLINE PAYMENT ID: gid://shopify/OrderTransaction/8217041010754
2025-09-29 21:05:51,074 - sync_service - INFO -  PAYMENT GATEWAYS USED: 1 gateways, Total Amount: 208.5 EGP
2025-09-29 21:05:51,075 - sync_service - INFO -     Gateway 1: Cash on Delivery (COD) - 208.5 EGP - Transaction ID: gid://shopify/OrderTransaction/8217041010754
2025-09-29 21:05:51,075 - sync_service - INFO -  SHIP TO: Soha Mohamed | zayed | Zayed, Giza | +201005526262
2025-09-29 21:05:51,076 - sync_service - INFO -  SAP DELIVERY ADDRESS: zayed, Zayed, Giza
Egypt
2025-09-29 21:05:51,077 - sync_service - INFO -  BILL TO: Soha Mohamed | zayed | Zayed, Giza | +201005526262
2025-09-29 21:05:51,077 - sync_service - INFO -  SAP BILLING ADDRESS: zayed, Zayed, Giza
Egypt
2025-09-29 21:05:51,077 - sync_service - INFO -  SEARCHING CUSTOMER: Original phone: '+201005526262' -> Cleaned: '+201005526262'
2025-09-29 21:05:51,078 - sync_service - INFO -  SAP QUERY: Phone1 eq '+201005526262' or Phone2 eq '+201005526262' or Cellular eq '+201005526262'
2025-09-29 21:05:51,774 - sync_service - INFO -  CUSTOMER SEARCH RESULT: Found 1 customers
2025-09-29 21:05:51,775 - sync_service - INFO -  FOUND EXISTING CUSTOMER: C0021122 - Soha Mohamed
2025-09-29 21:05:51,776 - sync_service - INFO - Found existing customer: C0021122
2025-09-29 21:05:51,776 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000714', VariantSKU='fg-0000714', Name='iron man necklace - blue'
2025-09-29 21:05:51,777 - sync_service - INFO - Using location-based costing codes for order #1716: {'COGSCostingCode': 'ONL', 'COGSCostingCode2': 'SAL', 'COGSCostingCode3': 'OnlineS', 'CostingCode': 'ONL', 'CostingCode2': 'SAL', 'CostingCode3': 'OnlineS', 'Warehouse': 'SW'}
2025-09-29 21:05:51,778 - sync_service - INFO -  Pricing for FG-0000714: Original=10.00, Sale=8.50, Discount=15.0%
2025-09-29 21:05:51,779 - sync_service - INFO -  No gift card redemptions found in this order
2025-09-29 21:05:51,780 - sync_service - INFO - Applied freight expenses for shipping fee 200.0: [{'ExpenseCode': 4, 'LineTotal': 80, 'DistributionRule': 'ONL', 'DistributionRule2': 'SAL', 'DistributionRule3': 'OnlineS'}, {'ExpenseCode': 6, 'LineTotal': 120, 'DistributionRule': 'ONL', 'DistributionRule2': 'SAL', 'DistributionRule3': 'OnlineS'}]
2025-09-29 21:05:53,290 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-29 21:05:53,291 - sync_service - INFO - Order 6420456996930 already exists in SAP with DocEntry: 23208
2025-09-29 21:05:53,293 - sync_service - INFO - Order #1716 already exists in SAP with DocEntry: 23208
2025-09-29 21:05:55,029 - sync_service - INFO - Added tag 'sap_invoice_23208' to order gid://shopify/Order/6420456996930
2025-09-29 21:06:06,919 - sync_service - INFO - Added tag 'sap_invoice_synced' to order gid://shopify/Order/6420456996930
2025-09-29 21:06:06,921 - sync_service - ERROR -  Failed to process order: None
2025-09-29 21:06:06,924 - sync_service - INFO - Sync Event: {'sync_type': 'sales_orders', 'items_processed': 6, 'success_count': 4, 'error_count': 2, 'details': None}
2025-09-29 21:06:06,925 - sync_service - INFO - Orders sync completed. Processed: 6, Success: 4, Errors: 2
2025-09-29 21:06:06,927 - sync_service - INFO - Starting payment recovery sync...
2025-09-29 21:06:06,928 - sync_service - INFO - Starting payment recovery sync...
2025-09-29 21:06:06,929 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-29 21:06:06,930 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n\n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n\n                        # --- Transactions ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n            ', 'variables': {'first': 10, 'after': None, 'query': '(financial_status:paid OR financial_status:partially_refunded OR financial_status:refunded) AND tag:sap_invoice_synced AND -tag:sap_payment_synced AND -tag:sap_payment_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-09-29 21:06:07,404 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [], 'pageInfo': {'hasNextPage': False, 'endCursor': None}}}, 'status': 'success'}
2025-09-29 21:06:07,406 - sync_service - INFO - Retrieved 0 orders that need payment recovery from Shopify store local
2025-09-29 21:06:07,408 - sync_service - INFO - No orders need payment recovery for store local
2025-09-29 21:06:07,409 - sync_service - INFO - Sync Event: {'sync_type': 'payment_recovery', 'items_processed': 0, 'success_count': 0, 'error_count': 0, 'details': None}
2025-09-29 21:06:07,411 - sync_service - INFO - Payment recovery sync completed. Processed: 0, Success: 0, Skipped: 0, Errors: 0
2025-09-30 09:47:14,241 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-30 09:47:14,304 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-30 09:48:58,389 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-30 09:48:58,399 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-30 09:48:58,403 - sync_service - INFO - Starting all syncs...
2025-09-30 09:48:58,404 - sync_service - INFO - Starting sales orders sync...
2025-09-30 09:48:58,404 - sync_service - INFO - Starting orders sync...
2025-09-30 09:48:58,405 - sync_service - INFO - Fetching orders with filter: tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10
2025-09-30 09:48:58,406 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 09:48:58,407 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: false, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n                        retailLocation {\n                            id\n                        }\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        subtotalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        totalShippingPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Discounts applied ---\n                        discountApplications(first: 10) {\n                        edges {\n                            node {\n                            targetType        # ORDER or LINE_ITEM\n                            allocationMethod  # ACROSS / EACH / ONE\n                            value {\n                                __typename\n                                ... on PricingPercentageValue {\n                                percentage\n                                }\n                                ... on MoneyV2 {\n                                amount\n                                currencyCode\n                                }\n                            }\n                            ... on DiscountCodeApplication {\n                                code\n                            }\n                            ... on AutomaticDiscountApplication {\n                                title\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n                        \n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n                        shippingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n                        billingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n\n                        # --- Line Items with Discount Allocations ---\n                        lineItems(first: 50) {\n                        edges {\n                            node {\n                            id\n                            name\n                            quantity\n                            sku\n                            originalUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountedUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountAllocations {\n                                allocatedAmount {\n                                    amount\n                                    currencyCode\n                                }\n                                discountApplication {\n                                    __typename\n                                    ... on AutomaticDiscountApplication {\n                                        title\n                                    }\n                                    ... on DiscountCodeApplication {\n                                        code\n                                    }\n                                }\n                            }\n                            variant {\n                                id\n                                sku\n                                price\n                                compareAtPrice\n                                product {\n                                id\n                                title\n                                }\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Transactions (Gift cards show up here as gateway = "gift_card") ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson   # contains gift_card_id, last_characters etc if gift card used\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n\n            ', 'variables': {'first': 10, 'after': None, 'query': 'tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-09-30 09:49:08,464 - sync_service - ERROR - GraphQL query error for store local: 
2025-09-30 09:49:09,478 - sync_service - INFO - SAP logging client login successful
2025-09-30 09:49:10,181 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-09-30 09:49:10,182 - sync_service - WARNING - GraphQL attempt 1/3 failed: GraphQL query error for store local: 
2025-09-30 09:49:10,183 - sync_service - INFO - Retrying in 2 seconds...
2025-09-30 09:49:12,195 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 09:49:12,197 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: false, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n                        retailLocation {\n                            id\n                        }\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        subtotalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        totalShippingPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Discounts applied ---\n                        discountApplications(first: 10) {\n                        edges {\n                            node {\n                            targetType        # ORDER or LINE_ITEM\n                            allocationMethod  # ACROSS / EACH / ONE\n                            value {\n                                __typename\n                                ... on PricingPercentageValue {\n                                percentage\n                                }\n                                ... on MoneyV2 {\n                                amount\n                                currencyCode\n                                }\n                            }\n                            ... on DiscountCodeApplication {\n                                code\n                            }\n                            ... on AutomaticDiscountApplication {\n                                title\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n                        \n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n                        shippingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n                        billingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n\n                        # --- Line Items with Discount Allocations ---\n                        lineItems(first: 50) {\n                        edges {\n                            node {\n                            id\n                            name\n                            quantity\n                            sku\n                            originalUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountedUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountAllocations {\n                                allocatedAmount {\n                                    amount\n                                    currencyCode\n                                }\n                                discountApplication {\n                                    __typename\n                                    ... on AutomaticDiscountApplication {\n                                        title\n                                    }\n                                    ... on DiscountCodeApplication {\n                                        code\n                                    }\n                                }\n                            }\n                            variant {\n                                id\n                                sku\n                                price\n                                compareAtPrice\n                                product {\n                                id\n                                title\n                                }\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Transactions (Gift cards show up here as gateway = "gift_card") ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson   # contains gift_card_id, last_characters etc if gift card used\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n\n            ', 'variables': {'first': 10, 'after': None, 'query': 'tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-09-30 09:49:12,910 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [{'node': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'createdAt': '2025-09-29T08:07:17Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '70074990658-1-1013', 'retailLocation': {'id': 'gid://shopify/Location/72406990914'}, 'totalPriceSet': {'shopMoney': {'amount': '10000.0', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '10000.0', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'firstName': 'Nora', 'lastName': 'Maged', 'email': 'testawy@test.net', 'phone': '+201005528282', 'addresses': []}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072642134082', 'name': 'MM Watch - Blue', 'quantity': 1, 'sku': 'FG-0000715', 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42387257458754', 'sku': 'FG-0000715', 'price': '5000.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7527948386370', 'title': 'MM Watch'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072644427842', 'name': 'Gift Card', 'quantity': 1, 'sku': None, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': None}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8216992448578', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'Valu POS', 'amountSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:07:17Z', 'receiptJson': '{}'}]}}, {'node': {'id': 'gid://shopify/Order/6420443136066', 'name': '#1713', 'createdAt': '2025-09-29T08:27:49Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '72406990914-1-1014', 'retailLocation': {'id': 'gid://shopify/Location/70074957890'}, 'totalPriceSet': {'shopMoney': {'amount': '30.0', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '30.0', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'firstName': 'Karim', 'lastName': 'Wafik', 'email': 'karimwafik.kw@gmail.com', 'phone': None, 'addresses': [{'address1': '97 Marghany st., Heliopolis, Cairo, Egypt', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': '21113', 'country': 'Egypt', 'phone': '+201005527292'}, {'address1': 'Stone Residence Compound 306, Third Settlement', 'address2': '9', 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'New Cairo', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'afasfag', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'asfasfas', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'asdfasfasf', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'nasr city', 'address2': None, 'city': 'nasr city', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '+201001234561'}, {'address1': 'new cairo', 'address2': None, 'city': 'new cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}]}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072665727042', 'name': 'Gift Card - 10 EGP', 'quantity': 3, 'sku': 'SR-0000072', 'originalUnitPriceSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42480052371522', 'sku': 'SR-0000072', 'price': '10.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7491930062914', 'title': 'Gift Card'}}}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217009913922', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '30.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:27:48Z', 'receiptJson': '{}'}]}}], 'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo2NDIwNDQzMTM2MDY2LCJsYXN0X3ZhbHVlIjoxNzU5MTM0NDY5MDAwfQ=='}}}, 'status': 'success'}
2025-09-30 09:49:12,911 - sync_service - INFO - Retrieved 2 unsynced orders (limited to 5 most recent) from Shopify store local
2025-09-30 09:49:12,913 - sync_service - INFO - Processing 2 orders from store local
2025-09-30 09:49:12,913 - sync_service - INFO - Processing order #1712 (ID: gid://shopify/Order/6420431896642)
2025-09-30 09:49:12,915 - sync_service - INFO - Processing order: #1712 | Payment: PAID | Fulfillment: FULFILLED
2025-09-30 09:49:12,916 - sync_service - INFO - Payment Gateway: Valu POS | Card Type: Unknown | Amount: 5000.0
2025-09-30 09:49:12,923 - sync_service - INFO -  PAYMENT GATEWAYS USED: 1 gateways, Total Amount: 5000.0 EGP
2025-09-30 09:49:12,924 - sync_service - INFO -     Gateway 1: Valu POS - 5000.0 EGP - Transaction ID: gid://shopify/OrderTransaction/8216992448578
2025-09-30 09:49:12,924 - sync_service - INFO -  SEARCHING CUSTOMER: Original phone: '+201005528282' -> Cleaned: '+201005528282'
2025-09-30 09:49:12,925 - sync_service - INFO -  SAP QUERY: Phone1 eq '+201005528282' or Phone2 eq '+201005528282' or Cellular eq '+201005528282'
2025-09-30 09:49:13,647 - sync_service - INFO - SAP login successful
2025-09-30 09:49:14,697 - sync_service - INFO -  CUSTOMER SEARCH RESULT: Found 1 customers
2025-09-30 09:49:14,698 - sync_service - INFO -  FOUND EXISTING CUSTOMER: C0021120 - Nora Maged
2025-09-30 09:49:14,700 - sync_service - INFO - Found existing customer: C0021120
2025-09-30 09:49:14,701 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000715', VariantSKU='fg-0000715', Name='mm watch - blue'
2025-09-30 09:49:14,701 - sync_service - INFO - Checking line item for gift card: SKU='', VariantSKU='', Name='gift card'
2025-09-30 09:49:14,741 - sync_service - INFO - Found 1 gift card purchase(s) in order #1712
2025-09-30 09:49:14,761 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 09:49:14,764 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-09-30 09:49:15,330 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}]}}, 'status': 'success'}
2025-09-30 09:49:15,335 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}
2025-09-30 09:49:15,335 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}
2025-09-30 09:49:15,336 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}
2025-09-30 09:49:15,336 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}
2025-09-30 09:49:15,336 - sync_service - INFO - Found 1 gift cards for order 6420431896642
2025-09-30 09:49:15,338 - sync_service - INFO - Looking for gift card with unit price: 5000.0
2025-09-30 09:49:15,338 - sync_service - INFO - Available Shopify gift cards: [{'id': 'gid://shopify/GiftCard/550425362498', 'amount': 5000.0}]
2025-09-30 09:49:15,338 - sync_service - INFO - Checking gift card gid://shopify/GiftCard/550425362498 with amount 5000.0 against unit price 5000.0
2025-09-30 09:49:15,338 - sync_service - INFO -  Found matching gift card: gid://shopify/GiftCard/550425362498
2025-09-30 09:49:15,339 - sync_service - INFO - Preparing gift card data for invoice line: 550425362498 - Amount: 5000.0 - SKU: 
2025-09-30 09:49:15,339 - sync_service - INFO - Successfully created 1 gift card(s) in SAP
2025-09-30 09:49:15,339 - sync_service - INFO - Found retail location ID for POS order: 72406990914
2025-09-30 09:49:15,339 - sync_service - INFO - Extracted POS receipt number: 1013
2025-09-30 09:49:15,341 - sync_service - INFO - Using location-based costing codes for order #1712: {'COGSCostingCode': 'DIP', 'COGSCostingCode2': 'SAL', 'COGSCostingCode3': 'General', 'CostingCode': 'DIP', 'CostingCode2': 'SAL', 'CostingCode3': 'General', 'Warehouse': 'DIP'}
2025-09-30 09:49:15,341 - sync_service - INFO - Skipping gift card line item for POS refund: Gift Card - Amount: 5000.0
2025-09-30 09:49:15,341 - sync_service - INFO -  No gift card redemptions found in this order
2025-09-30 09:49:15,343 - sync_service - INFO - Added POS receipt number to invoice: 1013
2025-09-30 09:49:17,272 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-30 09:49:21,564 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-30 09:49:21,566 - sync_service - INFO - Created invoice in SAP: 23213
2025-09-30 09:49:21,567 - sync_service - INFO - Created invoice data: {'DocEntry': 23213, 'DocNum': 100018920, 'DocTotal': 5000.0, 'TransNum': 97084}
2025-09-30 09:49:23,486 - sync_service - INFO - Added tag 'sap_invoice_23213' to order gid://shopify/Order/6420431896642
2025-09-30 09:49:25,256 - sync_service - INFO - Added tag 'sap_invoice_synced' to order gid://shopify/Order/6420431896642
2025-09-30 09:49:25,259 - sync_service - INFO -  Invoice created and tagged for order #1712
2025-09-30 09:49:25,259 - sync_service - INFO - Order #1712 is paid - creating incoming payment in SAP
2025-09-30 09:49:25,260 - sync_service - INFO -  POS ORDER DETECTED - Processing multiple payment types
2025-09-30 09:49:25,261 - sync_service - INFO -  BANK TRANSFER TRANSACTION: Valu POS - 5000.0 EGP - Account: 10801231
2025-09-30 09:49:25,262 - sync_service - INFO -  POS PAYMENT SUMMARY: Total Calculated Amount: 5000.0 EGP
2025-09-30 09:49:27,739 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-30 09:49:27,740 - sync_service - INFO - Created incoming payment in SAP: 22390
2025-09-30 09:49:27,742 - sync_service - INFO - Successfully created incoming payment: 22390
2025-09-30 09:49:29,456 - sync_service - INFO - Added tag 'sap_payment_22390' to order gid://shopify/Order/6420431896642
2025-09-30 09:49:41,452 - sync_service - INFO - Added tag 'sap_payment_synced' to order gid://shopify/Order/6420431896642
2025-09-30 09:49:41,453 - sync_service - INFO - Successfully processed order #1712
2025-09-30 09:49:41,454 - sync_service - INFO -  Processed order #1712 -> SAP Invoice: 23213
2025-09-30 09:49:41,454 - sync_service - INFO -     Gateway: Valu POS | Amount: 5000.0
2025-09-30 09:49:41,454 - sync_service - INFO - Processing order #1713 (ID: gid://shopify/Order/6420443136066)
2025-09-30 09:49:41,456 - sync_service - INFO - Processing order: #1713 | Payment: PAID | Fulfillment: FULFILLED
2025-09-30 09:49:41,456 - sync_service - INFO - Payment Gateway: cash | Card Type: Unknown | Amount: 30.0
2025-09-30 09:49:41,457 - sync_service - INFO -  PAYMENT GATEWAYS USED: 1 gateways, Total Amount: 30.0 EGP
2025-09-30 09:49:41,457 - sync_service - INFO -     Gateway 1: cash - 30.0 EGP - Transaction ID: gid://shopify/OrderTransaction/8217009913922
2025-09-30 09:49:41,457 - sync_service - INFO -  SEARCHING CUSTOMER: Original phone: '+201005527292' -> Cleaned: '+201005527292'
2025-09-30 09:49:41,458 - sync_service - INFO -  SAP QUERY: Phone1 eq '+201005527292' or Phone2 eq '+201005527292' or Cellular eq '+201005527292'
2025-09-30 09:49:46,392 - sync_service - INFO -  CUSTOMER SEARCH RESULT: Found 1 customers
2025-09-30 09:49:46,393 - sync_service - INFO -  FOUND EXISTING CUSTOMER: C0021112 - Karim Wafik
2025-09-30 09:49:46,394 - sync_service - INFO - Found existing customer: C0021112
2025-09-30 09:49:46,395 - sync_service - INFO - Checking line item for gift card: SKU='sr-0000072', VariantSKU='sr-0000072', Name='gift card - 10 egp'
2025-09-30 09:49:46,396 - sync_service - INFO - Found 1 gift card purchase(s) in order #1713
2025-09-30 09:49:46,397 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 09:49:46,397 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-09-30 09:49:47,254 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}]}}, 'status': 'success'}
2025-09-30 09:49:47,256 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}
2025-09-30 09:49:47,256 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}
2025-09-30 09:49:47,256 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}
2025-09-30 09:49:47,256 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}
2025-09-30 09:49:47,256 - sync_service - INFO - Found 3 gift cards for order 6420443136066
2025-09-30 09:49:47,258 - sync_service - INFO - Looking for gift card with unit price: 10.0
2025-09-30 09:49:47,258 - sync_service - INFO - Available Shopify gift cards: [{'id': 'gid://shopify/GiftCard/550425395266', 'amount': 10.0}, {'id': 'gid://shopify/GiftCard/550425428034', 'amount': 10.0}, {'id': 'gid://shopify/GiftCard/550425460802', 'amount': 10.0}]
2025-09-30 09:49:47,259 - sync_service - INFO - Checking gift card gid://shopify/GiftCard/550425395266 with amount 10.0 against unit price 10.0
2025-09-30 09:49:47,259 - sync_service - INFO -  Found matching gift card: gid://shopify/GiftCard/550425395266
2025-09-30 09:49:47,259 - sync_service - INFO - Preparing gift card data for invoice line: 550425395266 - Amount: 10.0 - SKU: SR-0000072
2025-09-30 09:49:47,259 - sync_service - INFO - Looking for gift card with unit price: 10.0
2025-09-30 09:49:47,259 - sync_service - INFO - Available Shopify gift cards: [{'id': 'gid://shopify/GiftCard/550425428034', 'amount': 10.0}, {'id': 'gid://shopify/GiftCard/550425460802', 'amount': 10.0}]
2025-09-30 09:49:47,261 - sync_service - INFO - Checking gift card gid://shopify/GiftCard/550425428034 with amount 10.0 against unit price 10.0
2025-09-30 09:49:47,261 - sync_service - INFO -  Found matching gift card: gid://shopify/GiftCard/550425428034
2025-09-30 09:49:47,261 - sync_service - INFO - Preparing gift card data for invoice line: 550425428034 - Amount: 10.0 - SKU: SR-0000072
2025-09-30 09:49:47,261 - sync_service - INFO - Looking for gift card with unit price: 10.0
2025-09-30 09:49:47,262 - sync_service - INFO - Available Shopify gift cards: [{'id': 'gid://shopify/GiftCard/550425460802', 'amount': 10.0}]
2025-09-30 09:49:47,262 - sync_service - INFO - Checking gift card gid://shopify/GiftCard/550425460802 with amount 10.0 against unit price 10.0
2025-09-30 09:49:47,262 - sync_service - INFO -  Found matching gift card: gid://shopify/GiftCard/550425460802
2025-09-30 09:49:47,264 - sync_service - INFO - Preparing gift card data for invoice line: 550425460802 - Amount: 10.0 - SKU: SR-0000072
2025-09-30 09:49:47,265 - sync_service - INFO - Successfully created 3 gift card(s) in SAP
2025-09-30 09:49:47,265 - sync_service - INFO - Found retail location ID for POS order: 70074957890
2025-09-30 09:49:47,267 - sync_service - INFO - Extracted POS receipt number: 1014
2025-09-30 09:49:47,267 - sync_service - INFO - Using location-based costing codes for order #1713: {'COGSCostingCode': 'Arkan', 'COGSCostingCode2': 'SAL', 'COGSCostingCode3': 'General', 'CostingCode': 'Arkan', 'CostingCode2': 'SAL', 'CostingCode3': 'General', 'Warehouse': 'Arkan'}
2025-09-30 09:49:47,268 - sync_service - INFO - Creating 3 separate lines for gift card item: SR-0000072
2025-09-30 09:49:47,268 - sync_service - INFO - Added U_GiftCard field to line item: 550425395266 for gift card 1/3
2025-09-30 09:49:47,270 - sync_service - INFO - Added U_GiftCard field to line item: 550425428034 for gift card 2/3
2025-09-30 09:49:47,270 - sync_service - INFO - Added U_GiftCard field to line item: 550425460802 for gift card 3/3
2025-09-30 09:49:47,273 - sync_service - INFO -  No gift card redemptions found in this order
2025-09-30 09:49:47,276 - sync_service - INFO - Added POS receipt number to invoice: 1014
2025-09-30 09:49:48,283 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-30 09:49:49,447 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-30 09:49:49,450 - sync_service - INFO - Created invoice in SAP: 23214
2025-09-30 09:49:49,451 - sync_service - INFO - Created invoice data: {'DocEntry': 23214, 'DocNum': 100018921, 'DocTotal': 30.0, 'TransNum': 97086}
2025-09-30 09:50:00,149 - sync_service - INFO - Added tag 'sap_invoice_23214' to order gid://shopify/Order/6420443136066
2025-09-30 09:50:01,788 - sync_service - INFO - Added tag 'sap_invoice_synced' to order gid://shopify/Order/6420443136066
2025-09-30 09:50:01,789 - sync_service - INFO -  Invoice created and tagged for order #1713
2025-09-30 09:50:01,791 - sync_service - INFO - Order #1713 is paid - creating incoming payment in SAP
2025-09-30 09:50:01,792 - sync_service - INFO -  POS ORDER DETECTED - Processing multiple payment types
2025-09-30 09:50:01,793 - sync_service - INFO -  CASH TRANSACTION: 30.0 EGP - Account: 10801229
2025-09-30 09:50:01,793 - sync_service - INFO -  POS PAYMENT SUMMARY: Total Calculated Amount: 30.0 EGP
2025-09-30 09:50:02,681 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-30 09:50:02,683 - sync_service - INFO - Created incoming payment in SAP: 22391
2025-09-30 09:50:02,684 - sync_service - INFO - Successfully created incoming payment: 22391
2025-09-30 09:50:04,536 - sync_service - INFO - Added tag 'sap_payment_22391' to order gid://shopify/Order/6420443136066
2025-09-30 09:50:14,472 - sync_service - INFO - Added tag 'sap_payment_synced' to order gid://shopify/Order/6420443136066
2025-09-30 09:50:14,473 - sync_service - INFO - Successfully processed order #1713
2025-09-30 09:50:14,474 - sync_service - INFO -  Processed order #1713 -> SAP Invoice: 23214
2025-09-30 09:50:14,474 - sync_service - INFO -     Gateway: cash | Amount: 30.0
2025-09-30 09:50:14,476 - sync_service - INFO - Sync Event: {'sync_type': 'sales_orders', 'items_processed': 2, 'success_count': 2, 'error_count': 0, 'details': None}
2025-09-30 09:50:14,476 - sync_service - INFO - Orders sync completed. Processed: 2, Success: 2, Errors: 0
2025-09-30 09:50:14,477 - sync_service - INFO - Starting payment recovery sync...
2025-09-30 09:50:14,477 - sync_service - INFO - Starting payment recovery sync...
2025-09-30 09:50:14,477 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 09:50:14,478 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n\n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n\n                        # --- Transactions ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n            ', 'variables': {'first': 10, 'after': None, 'query': '(financial_status:paid OR financial_status:partially_refunded OR financial_status:refunded) AND tag:sap_invoice_synced AND -tag:sap_payment_synced AND -tag:sap_payment_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-09-30 09:50:15,090 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [{'node': {'id': 'gid://shopify/Order/6420456996930', 'name': '#1716', 'createdAt': '2025-09-29T08:50:59Z', 'displayFinancialStatus': 'PARTIALLY_REFUNDED', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'web', 'sourceIdentifier': None, 'totalPriceSet': {'shopMoney': {'amount': '208.5', 'currencyCode': 'EGP'}}, 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'firstName': 'Soha', 'lastName': 'Mohamed', 'email': 'testawyyyy@test.com', 'phone': None, 'addresses': [{'address1': 'zayed', 'address2': None, 'city': 'Zayed', 'province': 'Giza', 'zip': None, 'country': 'Egypt', 'phone': '+201005526262'}]}, 'retailLocation': None, 'metafields': {'edges': [{'node': {'namespace': 'custom', 'key': 'courier', 'value': '["4 - Tuyingo"]'}}]}, 'tags': ['returntest', 'salestest', 'sap_invoice_23208', 'sap_invoice_synced'], 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217039896642', 'kind': 'SALE', 'status': 'PENDING', 'gateway': 'Cash on Delivery (COD)', 'amountSet': {'shopMoney': {'amount': '208.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:50:59Z', 'receiptJson': '{}'}, {'id': 'gid://shopify/OrderTransaction/8217041010754', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'Cash on Delivery (COD)', 'amountSet': {'shopMoney': {'amount': '208.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:51:24Z', 'receiptJson': '{}'}, {'id': 'gid://shopify/OrderTransaction/8217044189250', 'kind': 'REFUND', 'status': 'SUCCESS', 'gateway': 'shopify_store_credit', 'amountSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:54:00Z', 'receiptJson': '{"account_id":143491138,"credit_operation_id":413204546}'}]}}, {'node': {'id': 'gid://shopify/Order/6420443136066', 'name': '#1713', 'createdAt': '2025-09-29T08:27:49Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '72406990914-1-1014', 'totalPriceSet': {'shopMoney': {'amount': '30.0', 'currencyCode': 'EGP'}}, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'firstName': 'Karim', 'lastName': 'Wafik', 'email': 'karimwafik.kw@gmail.com', 'phone': None, 'addresses': [{'address1': '97 Marghany st., Heliopolis, Cairo, Egypt', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': '21113', 'country': 'Egypt', 'phone': '+201005527292'}, {'address1': 'Stone Residence Compound 306, Third Settlement', 'address2': '9', 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'New Cairo', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'afasfag', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'asfasfas', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'asdfasfasf', 'address2': None, 'city': 'Cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}, {'address1': 'nasr city', 'address2': None, 'city': 'nasr city', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '+201001234561'}, {'address1': 'new cairo', 'address2': None, 'city': 'new cairo', 'province': 'Cairo', 'zip': None, 'country': 'Egypt', 'phone': '01005527292'}]}, 'retailLocation': {'id': 'gid://shopify/Location/70074957890'}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest', 'sap_invoice_23214', 'sap_invoice_synced', 'sap_payment_22391', 'sap_payment_synced'], 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217009913922', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '30.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:27:48Z', 'receiptJson': '{}'}]}}], 'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo2NDIwNDQzMTM2MDY2LCJsYXN0X3ZhbHVlIjoxNzU5MTM0NDY5MDAwfQ=='}}}, 'status': 'success'}
2025-09-30 09:50:15,091 - sync_service - INFO - Retrieved 2 orders that need payment recovery from Shopify store local
2025-09-30 09:50:15,092 - sync_service - INFO - Processing 2 orders for payment recovery from store local
2025-09-30 09:50:15,093 - sync_service - INFO - Processing payment recovery for order #1716 (ID: gid://shopify/Order/6420456996930)
2025-09-30 09:50:15,094 - sync_service - INFO - Web/online order detected, using original location mapping method
2025-09-30 09:50:15,094 - sync_service - INFO - Processing payment recovery for order: #1716 | Payment: PARTIALLY_REFUNDED | Fulfillment: FULFILLED
2025-09-30 09:50:15,095 - sync_service - INFO - Found SAP invoice DocEntry: 23208 for order #1716
2025-09-30 09:50:15,673 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-30 09:50:15,674 - sync_service - INFO - Found SAP invoice DocEntry: 23208
2025-09-30 09:50:15,675 - sync_service - INFO - Found SAP invoice DocEntry: 23208 for order #1716
2025-09-30 09:50:16,933 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-30 09:50:16,935 - sync_service - INFO - Payment for order 6420456996930 already exists in SAP with DocEntry: 22385
2025-09-30 09:50:16,936 - sync_service - INFO - Payment for order #1716 already exists in SAP with DocEntry: 22385
2025-09-30 09:50:18,265 - sync_service - INFO - Added tag 'sap_payment_22385' to order gid://shopify/Order/6420456996930
2025-09-30 09:50:23,286 - sync_service - WARNING - Error adding tag to order gid://shopify/Order/6420456996930, attempt 1/3: 
2025-09-30 09:50:26,861 - sync_service - INFO - Added tag 'sap_payment_synced' to order gid://shopify/Order/6420456996930
2025-09-30 09:50:26,863 - sync_service - INFO -  Skipped order #1716 - Payment already exists in SAP
2025-09-30 09:50:26,865 - sync_service - INFO - Processing payment recovery for order #1713 (ID: gid://shopify/Order/6420443136066)
2025-09-30 09:50:26,866 - sync_service - INFO - Found retail location ID for POS order: 70074957890
2025-09-30 09:50:26,866 - sync_service - INFO - Extracted POS receipt number: 1014
2025-09-30 09:50:26,867 - sync_service - INFO - Processing payment recovery for order: #1713 | Payment: PAID | Fulfillment: FULFILLED
2025-09-30 09:50:26,867 - sync_service - INFO - Found SAP invoice DocEntry: 23214 for order #1713
2025-09-30 09:50:27,884 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-30 09:50:27,885 - sync_service - INFO - Found SAP invoice DocEntry: 23214
2025-09-30 09:50:27,886 - sync_service - INFO - Found SAP invoice DocEntry: 23214 for order #1713
2025-09-30 09:50:29,284 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-30 09:50:29,286 - sync_service - INFO - Payment for order 6420443136066 already exists in SAP with DocEntry: 22391
2025-09-30 09:50:29,287 - sync_service - INFO - Payment for order #1713 already exists in SAP with DocEntry: 22391
2025-09-30 09:50:30,299 - sync_service - INFO - Added tag 'sap_payment_22391' to order gid://shopify/Order/6420443136066
2025-09-30 09:50:31,645 - sync_service - INFO - Added tag 'sap_payment_synced' to order gid://shopify/Order/6420443136066
2025-09-30 09:50:31,646 - sync_service - INFO -  Skipped order #1713 - Payment already exists in SAP
2025-09-30 09:50:31,647 - sync_service - INFO - Sync Event: {'sync_type': 'payment_recovery', 'items_processed': 2, 'success_count': 0, 'error_count': 0, 'details': None}
2025-09-30 09:50:31,647 - sync_service - INFO - Payment recovery sync completed. Processed: 2, Success: 0, Skipped: 2, Errors: 0
2025-09-30 09:56:33,465 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-30 09:56:33,476 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-30 09:56:33,477 - sync_service - INFO - Starting all syncs...
2025-09-30 09:56:33,477 - sync_service - INFO - Starting sales orders sync...
2025-09-30 09:56:33,478 - sync_service - INFO - Starting orders sync...
2025-09-30 09:56:33,478 - sync_service - INFO - Fetching orders with filter: tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10
2025-09-30 09:56:33,478 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 09:56:33,479 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: false, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n                        retailLocation {\n                            id\n                        }\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        subtotalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        totalShippingPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Discounts applied ---\n                        discountApplications(first: 10) {\n                        edges {\n                            node {\n                            targetType        # ORDER or LINE_ITEM\n                            allocationMethod  # ACROSS / EACH / ONE\n                            value {\n                                __typename\n                                ... on PricingPercentageValue {\n                                percentage\n                                }\n                                ... on MoneyV2 {\n                                amount\n                                currencyCode\n                                }\n                            }\n                            ... on DiscountCodeApplication {\n                                code\n                            }\n                            ... on AutomaticDiscountApplication {\n                                title\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n                        \n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n                        shippingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n                        billingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n\n                        # --- Line Items with Discount Allocations ---\n                        lineItems(first: 50) {\n                        edges {\n                            node {\n                            id\n                            name\n                            quantity\n                            sku\n                            originalUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountedUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountAllocations {\n                                allocatedAmount {\n                                    amount\n                                    currencyCode\n                                }\n                                discountApplication {\n                                    __typename\n                                    ... on AutomaticDiscountApplication {\n                                        title\n                                    }\n                                    ... on DiscountCodeApplication {\n                                        code\n                                    }\n                                }\n                            }\n                            variant {\n                                id\n                                sku\n                                price\n                                compareAtPrice\n                                product {\n                                id\n                                title\n                                }\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Transactions (Gift cards show up here as gateway = "gift_card") ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson   # contains gift_card_id, last_characters etc if gift card used\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n\n            ', 'variables': {'first': 10, 'after': None, 'query': 'tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-09-30 09:56:34,232 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [{'node': {'id': 'gid://shopify/Order/6420425900098', 'name': '#1711', 'createdAt': '2025-09-29T08:01:14Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '70074892354-1-1012', 'retailLocation': {'id': 'gid://shopify/Location/70074990658'}, 'totalPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'firstName': 'Nora', 'lastName': 'Maged', 'email': 'testawy@test.net', 'phone': '+201005528282', 'addresses': []}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072630272066', 'name': 'Iron Man Necklace - Blue', 'quantity': 1, 'sku': 'FG-0000714', 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8216984485954', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'Geidea POS', 'amountSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:01:14Z', 'receiptJson': '{}'}]}}, {'node': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'createdAt': '2025-09-29T08:32:12Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '70074957890-1-1015', 'retailLocation': {'id': 'gid://shopify/Location/72407023682'}, 'totalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'firstName': 'Eman', 'lastName': 'Mohamed', 'email': 'test215@test.com', 'phone': '+201005552224', 'addresses': []}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072670904386', 'name': 'MM Watch - Blue', 'quantity': 1, 'sku': 'FG-0000715', 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42387257458754', 'sku': 'FG-0000715', 'price': '5000.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7527948386370', 'title': 'MM Watch'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072670937154', 'name': 'Iron Man Necklace - Blue', 'quantity': 1, 'sku': 'FG-0000714', 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072683290690', 'name': 'Gift Card', 'quantity': 1, 'sku': None, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': None}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217014566978', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'gift_card', 'amountSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:11Z', 'receiptJson': '{"gift_card_id":550425428034,"gift_card_last_characters":"bcah"}'}, {'id': 'gid://shopify/OrderTransaction/8217014730818', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '4998.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:24Z', 'receiptJson': '{}'}]}}], 'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo2NDIwNDQ2MTgzNDkwLCJsYXN0X3ZhbHVlIjoxNzU5MTM0NzMyMDAwfQ=='}}}, 'status': 'success'}
2025-09-30 09:56:34,233 - sync_service - INFO - Retrieved 2 unsynced orders (limited to 5 most recent) from Shopify store local
2025-09-30 09:56:34,234 - sync_service - INFO - Processing 2 orders from store local
2025-09-30 09:56:34,234 - sync_service - INFO - Processing order #1711 (ID: gid://shopify/Order/6420425900098)
2025-09-30 09:56:34,235 - sync_service - INFO - Processing order: #1711 | Payment: PAID | Fulfillment: FULFILLED
2025-09-30 09:56:34,235 - sync_service - INFO - Payment Gateway: Geidea POS | Card Type: Unknown | Amount: 8.5
2025-09-30 09:56:34,236 - sync_service - INFO -  PAYMENT GATEWAYS USED: 1 gateways, Total Amount: 8.5 EGP
2025-09-30 09:56:34,236 - sync_service - INFO -     Gateway 1: Geidea POS - 8.5 EGP - Transaction ID: gid://shopify/OrderTransaction/8216984485954
2025-09-30 09:56:34,236 - sync_service - INFO -  SEARCHING CUSTOMER: Original phone: '+201005528282' -> Cleaned: '+201005528282'
2025-09-30 09:56:34,236 - sync_service - INFO -  SAP QUERY: Phone1 eq '+201005528282' or Phone2 eq '+201005528282' or Cellular eq '+201005528282'
2025-09-30 09:56:34,968 - sync_service - INFO - SAP login successful
2025-09-30 09:56:35,707 - sync_service - INFO -  CUSTOMER SEARCH RESULT: Found 1 customers
2025-09-30 09:56:35,707 - sync_service - INFO -  FOUND EXISTING CUSTOMER: C0021120 - Nora Maged
2025-09-30 09:56:35,709 - sync_service - INFO - Found existing customer: C0021120
2025-09-30 09:56:35,710 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000714', VariantSKU='fg-0000714', Name='iron man necklace - blue'
2025-09-30 09:56:35,712 - sync_service - INFO - Found retail location ID for POS order: 70074990658
2025-09-30 09:56:35,712 - sync_service - INFO - Extracted POS receipt number: 1012
2025-09-30 09:56:35,714 - sync_service - INFO - Using location-based costing codes for order #1711: {'COGSCostingCode': 'ZAM', 'COGSCostingCode2': 'SAL', 'COGSCostingCode3': 'General', 'CostingCode': 'ZAM', 'CostingCode2': 'SAL', 'CostingCode3': 'General', 'Warehouse': 'ZW'}
2025-09-30 09:56:35,715 - sync_service - INFO -  Pricing for FG-0000714: Original=10.00, Sale=8.50, Discount=15.0%
2025-09-30 09:56:35,716 - sync_service - INFO -  No gift card redemptions found in this order
2025-09-30 09:56:35,717 - sync_service - INFO - Added POS receipt number to invoice: 1012
2025-09-30 09:56:37,711 - sync_service - INFO - SAP logging client login successful
2025-09-30 09:56:38,653 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-30 09:56:40,897 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-30 09:56:40,987 - sync_service - INFO - Created invoice in SAP: 23215
2025-09-30 09:56:40,988 - sync_service - INFO - Created invoice data: {'DocEntry': 23215, 'DocNum': 100018922, 'DocTotal': 8.5, 'TransNum': 97088}
2025-09-30 09:56:42,732 - sync_service - INFO - Added tag 'sap_invoice_23215' to order gid://shopify/Order/6420425900098
2025-09-30 09:56:44,338 - sync_service - INFO - Added tag 'sap_invoice_synced' to order gid://shopify/Order/6420425900098
2025-09-30 09:56:44,341 - sync_service - INFO -  Invoice created and tagged for order #1711
2025-09-30 09:56:44,341 - sync_service - INFO - Order #1711 is paid - creating incoming payment in SAP
2025-09-30 09:56:44,342 - sync_service - INFO -  POS ORDER DETECTED - Processing multiple payment types
2025-09-30 09:56:44,343 - sync_service - INFO -  CREDIT CARD TRANSACTION: Geidea POS - 8.5 EGP - Account: 10801235
2025-09-30 09:56:44,346 - sync_service - INFO -  POS PAYMENT SUMMARY: Total Calculated Amount: 8.5 EGP
2025-09-30 09:56:46,194 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-30 09:56:46,200 - sync_service - INFO - Created incoming payment in SAP: 22392
2025-09-30 09:56:46,201 - sync_service - INFO - Successfully created incoming payment: 22392
2025-09-30 09:56:47,823 - sync_service - INFO - Added tag 'sap_payment_22392' to order gid://shopify/Order/6420425900098
2025-09-30 09:56:49,995 - sync_service - INFO - Added tag 'sap_payment_synced' to order gid://shopify/Order/6420425900098
2025-09-30 09:56:49,998 - sync_service - INFO - Successfully processed order #1711
2025-09-30 09:56:50,000 - sync_service - INFO -  Processed order #1711 -> SAP Invoice: 23215
2025-09-30 09:56:50,000 - sync_service - INFO -     Gateway: Geidea POS | Amount: 8.5
2025-09-30 09:56:50,002 - sync_service - INFO - Processing order #1714 (ID: gid://shopify/Order/6420446183490)
2025-09-30 09:56:50,002 - sync_service - INFO - Processing order: #1714 | Payment: PAID | Fulfillment: FULFILLED
2025-09-30 09:56:50,003 - sync_service - INFO - Payment Gateway: cash | Card Type: Unknown | Amount: 4998.5
2025-09-30 09:56:50,005 - sync_service - INFO -  GIFT CARDS USED: 1 cards, Total Amount: 10.0
2025-09-30 09:56:50,005 - sync_service - INFO -     Gift Card 1: bcah - 10.0 EGP
2025-09-30 09:56:50,005 - sync_service - INFO -  PAYMENT GATEWAYS USED: 1 gateways, Total Amount: 4998.5 EGP
2025-09-30 09:56:50,005 - sync_service - INFO -     Gateway 1: cash - 4998.5 EGP - Transaction ID: gid://shopify/OrderTransaction/8217014730818
2025-09-30 09:56:50,006 - sync_service - INFO -  SEARCHING CUSTOMER: Original phone: '+201005552224' -> Cleaned: '+201005552224'
2025-09-30 09:56:50,006 - sync_service - INFO -  SAP QUERY: Phone1 eq '+201005552224' or Phone2 eq '+201005552224' or Cellular eq '+201005552224'
2025-09-30 09:56:50,358 - sync_service - INFO -  CUSTOMER SEARCH RESULT: Found 1 customers
2025-09-30 09:56:50,359 - sync_service - INFO -  FOUND EXISTING CUSTOMER: C0021121 - Eman Mohamed
2025-09-30 09:56:50,359 - sync_service - INFO - Found existing customer: C0021121
2025-09-30 09:56:50,360 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000715', VariantSKU='fg-0000715', Name='mm watch - blue'
2025-09-30 09:56:50,361 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000714', VariantSKU='fg-0000714', Name='iron man necklace - blue'
2025-09-30 09:56:50,361 - sync_service - INFO - Checking line item for gift card: SKU='', VariantSKU='', Name='gift card'
2025-09-30 09:56:50,362 - sync_service - INFO - Found 1 gift card purchase(s) in order #1714
2025-09-30 09:56:50,362 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 09:56:50,363 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-09-30 09:56:57,770 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}]}}, 'status': 'success'}
2025-09-30 09:56:57,771 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}
2025-09-30 09:56:57,772 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}
2025-09-30 09:56:57,773 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}
2025-09-30 09:56:57,773 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}
2025-09-30 09:56:57,774 - sync_service - INFO - Found 1 gift cards for order 6420446183490
2025-09-30 09:56:57,774 - sync_service - INFO - Looking for gift card with unit price: 5000.0
2025-09-30 09:56:57,775 - sync_service - INFO - Available Shopify gift cards: [{'id': 'gid://shopify/GiftCard/550425493570', 'amount': 5000.0}]
2025-09-30 09:56:57,776 - sync_service - INFO - Checking gift card gid://shopify/GiftCard/550425493570 with amount 5000.0 against unit price 5000.0
2025-09-30 09:56:57,776 - sync_service - INFO -  Found matching gift card: gid://shopify/GiftCard/550425493570
2025-09-30 09:56:57,782 - sync_service - INFO - Preparing gift card data for invoice line: 550425493570 - Amount: 5000.0 - SKU: 
2025-09-30 09:56:57,784 - sync_service - INFO - Successfully created 1 gift card(s) in SAP
2025-09-30 09:56:57,797 - sync_service - INFO - Found retail location ID for POS order: 72407023682
2025-09-30 09:56:57,798 - sync_service - INFO - Extracted POS receipt number: 1015
2025-09-30 09:56:57,800 - sync_service - INFO - Using location-based costing codes for order #1714: {'COGSCostingCode': 'LakeTown', 'COGSCostingCode2': 'SAL', 'COGSCostingCode3': 'General', 'CostingCode': 'LakeTown', 'CostingCode2': 'SAL', 'CostingCode3': 'General', 'Warehouse': 'LTW'}
2025-09-30 09:56:57,801 - sync_service - INFO -  Pricing for FG-0000714: Original=10.00, Sale=8.50, Discount=15.0%
2025-09-30 09:56:57,814 - sync_service - INFO - Skipping gift card line item for POS refund: Gift Card - Amount: 5000.0
2025-09-30 09:56:57,817 - sync_service - INFO -  Processing 1 gift card redemption(s)
2025-09-30 09:56:57,823 - sync_service - INFO -  Created gift card expense: bcah - Amount: -10.0
2025-09-30 09:56:57,824 - sync_service - INFO - Added POS receipt number to invoice: 1015
2025-09-30 09:56:58,807 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-30 09:57:00,512 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-30 09:57:00,513 - sync_service - INFO - Created invoice in SAP: 23216
2025-09-30 09:57:00,513 - sync_service - INFO - Created invoice data: {'DocEntry': 23216, 'DocNum': 100018923, 'DocTotal': 4998.5, 'TransNum': 97090}
2025-09-30 09:57:02,479 - sync_service - INFO - Added tag 'sap_invoice_23216' to order gid://shopify/Order/6420446183490
2025-09-30 09:57:13,451 - sync_service - INFO - Added tag 'sap_invoice_synced' to order gid://shopify/Order/6420446183490
2025-09-30 09:57:13,453 - sync_service - INFO -  Invoice created and tagged for order #1714
2025-09-30 09:57:13,453 - sync_service - INFO - Order #1714 is paid - creating incoming payment in SAP
2025-09-30 09:57:13,454 - sync_service - INFO -  POS ORDER DETECTED - Processing multiple payment types
2025-09-30 09:57:13,455 - sync_service - INFO -  CASH TRANSACTION: 4998.5 EGP - Account: 10801239
2025-09-30 09:57:13,455 - sync_service - INFO -  POS PAYMENT SUMMARY: Total Calculated Amount: 4998.5 EGP
2025-09-30 09:57:15,375 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-30 09:57:15,376 - sync_service - INFO - Created incoming payment in SAP: 22393
2025-09-30 09:57:15,377 - sync_service - INFO - Successfully created incoming payment: 22393
2025-09-30 09:57:17,035 - sync_service - INFO - Added tag 'sap_payment_22393' to order gid://shopify/Order/6420446183490
2025-09-30 09:57:28,067 - sync_service - INFO - Added tag 'sap_payment_synced' to order gid://shopify/Order/6420446183490
2025-09-30 09:57:28,069 - sync_service - INFO - Successfully processed order #1714
2025-09-30 09:57:28,070 - sync_service - INFO -  Processed order #1714 -> SAP Invoice: 23216
2025-09-30 09:57:28,070 - sync_service - INFO -     Gateway: cash | Amount: 4998.5
2025-09-30 09:57:28,070 - sync_service - INFO - Sync Event: {'sync_type': 'sales_orders', 'items_processed': 2, 'success_count': 2, 'error_count': 0, 'details': None}
2025-09-30 09:57:28,072 - sync_service - INFO - Orders sync completed. Processed: 2, Success: 2, Errors: 0
2025-09-30 09:57:28,073 - sync_service - INFO - Starting payment recovery sync...
2025-09-30 09:57:28,074 - sync_service - INFO - Starting payment recovery sync...
2025-09-30 09:57:28,075 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 09:57:28,075 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n\n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n\n                        # --- Transactions ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n            ', 'variables': {'first': 10, 'after': None, 'query': '(financial_status:paid OR financial_status:partially_refunded OR financial_status:refunded) AND tag:sap_invoice_synced AND -tag:sap_payment_synced AND -tag:sap_payment_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-09-30 09:57:28,585 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [{'node': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'createdAt': '2025-09-29T08:32:12Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '70074957890-1-1015', 'totalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'firstName': 'Eman', 'lastName': 'Mohamed', 'email': 'test215@test.com', 'phone': '+201005552224', 'addresses': []}, 'retailLocation': {'id': 'gid://shopify/Location/72407023682'}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22393', 'sap_payment_synced'], 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217014566978', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'gift_card', 'amountSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:11Z', 'receiptJson': '{"gift_card_id":550425428034,"gift_card_last_characters":"bcah"}'}, {'id': 'gid://shopify/OrderTransaction/8217014730818', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '4998.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:24Z', 'receiptJson': '{}'}]}}], 'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo2NDIwNDQ2MTgzNDkwLCJsYXN0X3ZhbHVlIjoxNzU5MTM0NzMyMDAwfQ=='}}}, 'status': 'success'}
2025-09-30 09:57:28,586 - sync_service - INFO - Retrieved 1 orders that need payment recovery from Shopify store local
2025-09-30 09:57:28,587 - sync_service - INFO - Processing 1 orders for payment recovery from store local
2025-09-30 09:57:28,588 - sync_service - INFO - Processing payment recovery for order #1714 (ID: gid://shopify/Order/6420446183490)
2025-09-30 09:57:28,588 - sync_service - INFO - Found retail location ID for POS order: 72407023682
2025-09-30 09:57:28,589 - sync_service - INFO - Extracted POS receipt number: 1015
2025-09-30 09:57:28,590 - sync_service - INFO - Processing payment recovery for order: #1714 | Payment: PAID | Fulfillment: FULFILLED
2025-09-30 09:57:28,591 - sync_service - INFO - Found SAP invoice DocEntry: 23216 for order #1714
2025-09-30 09:57:29,152 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-30 09:57:29,153 - sync_service - INFO - Found SAP invoice DocEntry: 23216
2025-09-30 09:57:29,154 - sync_service - INFO - Found SAP invoice DocEntry: 23216 for order #1714
2025-09-30 09:57:35,781 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-30 09:57:35,785 - sync_service - INFO - Payment for order 6420446183490 already exists in SAP with DocEntry: 22389
2025-09-30 09:57:35,788 - sync_service - INFO - Payment for order #1714 already exists in SAP with DocEntry: 22389
2025-09-30 09:57:40,297 - sync_service - INFO - Added tag 'sap_payment_22389' to order gid://shopify/Order/6420446183490
2025-09-30 09:57:41,497 - sync_service - INFO - Added tag 'sap_payment_synced' to order gid://shopify/Order/6420446183490
2025-09-30 09:57:41,499 - sync_service - INFO -  Skipped order #1714 - Payment already exists in SAP
2025-09-30 09:57:41,500 - sync_service - INFO - Sync Event: {'sync_type': 'payment_recovery', 'items_processed': 1, 'success_count': 0, 'error_count': 0, 'details': None}
2025-09-30 09:57:41,501 - sync_service - INFO - Payment recovery sync completed. Processed: 1, Success: 0, Skipped: 1, Errors: 0
2025-09-30 09:59:19,252 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-30 09:59:19,264 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-30 09:59:19,269 - sync_service - INFO - Starting all syncs...
2025-09-30 09:59:19,269 - sync_service - INFO - Starting returns sync...
2025-09-30 09:59:19,269 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 09:59:19,270 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n                query getOrders($first: Int!, $after: String, $query: String) {\n                    orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                        edges {\n                            node {\n                                id\n                                name\n                                createdAt\n                                displayFinancialStatus\n                                displayFulfillmentStatus\n                                returnStatus\n                                sourceName\n                                sourceIdentifier\n                                totalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                subtotalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                totalShippingPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                customer {\n                                    id\n                                    firstName\n                                    lastName\n                                    email\n                                    phone\n                                    addresses {\n                                        address1\n                                        address2\n                                        city\n                                        province\n                                        zip\n                                        country\n                                        phone\n                                    }\n                                }\n                                retailLocation {\n                                    id\n                                }\n                                metafields(first: 10) {\n                                    edges {\n                                        node {\n                                            namespace\n                                            key\n                                            value\n                                        }\n                                    }\n                                }\n                                tags\n                                shippingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                billingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                lineItems(first: 50) {\n                                    edges {\n                                        node {\n                                            id\n                                            name\n                                            quantity\n                                            sku\n                                            isGiftCard\n                                            currentQuantity\n                                            originalUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            discountedUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            variant {\n                                                id\n                                                sku\n                                                price\n                                                compareAtPrice\n                                                product {\n                                                    id\n                                                    title\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                                transactions(first: 10) {\n                                    id\n                                    kind\n                                    status\n                                    gateway\n                                    amountSet {\n                                        shopMoney {\n                                            amount\n                                            currencyCode\n                                        }\n                                    }\n                                    processedAt\n                                    receiptJson\n                                }\n                            }\n                        }\n                        pageInfo {\n                            hasNextPage\n                            endCursor\n                        }\n                    }\n                }\n                ', 'variables': {'first': 10, 'after': None, 'query': 'tag:returntest \n                    financial_status:refunded OR financial_status:partially_refunded OR return_status:RETURNED\n                    tag:sap_invoice_synced \n                    tag:sap_payment_synced \n                    -tag:sap_return_synced \n                    created_at:>=2025-08-31'}}, 'response': None, 'status': None}
2025-09-30 09:59:29,298 - sync_service - ERROR - GraphQL query error for store local: 
2025-09-30 09:59:30,757 - sync_service - INFO - SAP logging client login successful
2025-09-30 09:59:31,961 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-09-30 09:59:34,002 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 09:59:34,003 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n                query getOrders($first: Int!, $after: String, $query: String) {\n                    orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                        edges {\n                            node {\n                                id\n                                name\n                                createdAt\n                                displayFinancialStatus\n                                displayFulfillmentStatus\n                                returnStatus\n                                sourceName\n                                sourceIdentifier\n                                totalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                subtotalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                totalShippingPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                customer {\n                                    id\n                                    firstName\n                                    lastName\n                                    email\n                                    phone\n                                    addresses {\n                                        address1\n                                        address2\n                                        city\n                                        province\n                                        zip\n                                        country\n                                        phone\n                                    }\n                                }\n                                retailLocation {\n                                    id\n                                }\n                                metafields(first: 10) {\n                                    edges {\n                                        node {\n                                            namespace\n                                            key\n                                            value\n                                        }\n                                    }\n                                }\n                                tags\n                                shippingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                billingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                lineItems(first: 50) {\n                                    edges {\n                                        node {\n                                            id\n                                            name\n                                            quantity\n                                            sku\n                                            isGiftCard\n                                            currentQuantity\n                                            originalUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            discountedUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            variant {\n                                                id\n                                                sku\n                                                price\n                                                compareAtPrice\n                                                product {\n                                                    id\n                                                    title\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                                transactions(first: 10) {\n                                    id\n                                    kind\n                                    status\n                                    gateway\n                                    amountSet {\n                                        shopMoney {\n                                            amount\n                                            currencyCode\n                                        }\n                                    }\n                                    processedAt\n                                    receiptJson\n                                }\n                            }\n                        }\n                        pageInfo {\n                            hasNextPage\n                            endCursor\n                        }\n                    }\n                }\n                ', 'variables': {'first': 10, 'after': None, 'query': 'tag:returntest \n                    financial_status:refunded OR financial_status:partially_refunded OR return_status:RETURNED\n                    tag:sap_invoice_synced \n                    tag:sap_payment_synced \n                    -tag:sap_return_synced \n                    created_at:>=2025-08-31'}}, 'response': None, 'status': None}
2025-09-30 09:59:34,850 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [{'node': {'id': 'gid://shopify/Order/6420456996930', 'name': '#1716', 'createdAt': '2025-09-29T08:50:59Z', 'displayFinancialStatus': 'PARTIALLY_REFUNDED', 'displayFulfillmentStatus': 'FULFILLED', 'returnStatus': 'RETURNED', 'sourceName': 'web', 'sourceIdentifier': None, 'totalPriceSet': {'shopMoney': {'amount': '208.5', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '200.0', 'currencyCode': 'EGP'}}, 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'firstName': 'Soha', 'lastName': 'Mohamed', 'email': 'testawyyyy@test.com', 'phone': None, 'addresses': [{'address1': 'zayed', 'address2': None, 'city': 'Zayed', 'province': 'Giza', 'zip': None, 'country': 'Egypt', 'phone': '+201005526262'}]}, 'retailLocation': None, 'metafields': {'edges': [{'node': {'namespace': 'custom', 'key': 'courier', 'value': '["4 - Tuyingo"]'}}]}, 'tags': ['returntest', 'salestest', 'sap_invoice_23208', 'sap_invoice_synced', 'sap_payment_22385', 'sap_payment_synced'], 'shippingAddress': {'address1': 'zayed', 'address2': None, 'city': 'Zayed', 'province': 'Giza', 'zip': None, 'country': 'Egypt', 'phone': '+201005526262', 'firstName': 'Soha', 'lastName': 'Mohamed', 'company': None}, 'billingAddress': {'address1': 'zayed', 'address2': None, 'city': 'Zayed', 'province': 'Giza', 'zip': None, 'country': 'Egypt', 'phone': '+201005526262', 'firstName': 'Soha', 'lastName': 'Mohamed', 'company': None}, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072692105282', 'name': 'Iron Man Necklace - Blue', 'quantity': 1, 'sku': 'FG-0000714', 'isGiftCard': False, 'currentQuantity': 0, 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217039896642', 'kind': 'SALE', 'status': 'PENDING', 'gateway': 'Cash on Delivery (COD)', 'amountSet': {'shopMoney': {'amount': '208.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:50:59Z', 'receiptJson': '{}'}, {'id': 'gid://shopify/OrderTransaction/8217041010754', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'Cash on Delivery (COD)', 'amountSet': {'shopMoney': {'amount': '208.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:51:24Z', 'receiptJson': '{}'}, {'id': 'gid://shopify/OrderTransaction/8217044189250', 'kind': 'REFUND', 'status': 'SUCCESS', 'gateway': 'shopify_store_credit', 'amountSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:54:00Z', 'receiptJson': '{"account_id":143491138,"credit_operation_id":413204546}'}]}}, {'node': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'createdAt': '2025-09-29T08:32:12Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'returnStatus': 'RETURNED', 'sourceName': 'pos', 'sourceIdentifier': '70074957890-1-1015', 'totalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'firstName': 'Eman', 'lastName': 'Mohamed', 'email': 'test215@test.com', 'phone': '+201005552224', 'addresses': []}, 'retailLocation': {'id': 'gid://shopify/Location/72407023682'}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072670904386', 'name': 'MM Watch - Blue', 'quantity': 1, 'sku': 'FG-0000715', 'isGiftCard': False, 'currentQuantity': 0, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': {'id': 'gid://shopify/ProductVariant/42387257458754', 'sku': 'FG-0000715', 'price': '5000.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7527948386370', 'title': 'MM Watch'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072670937154', 'name': 'Iron Man Necklace - Blue', 'quantity': 1, 'sku': 'FG-0000714', 'isGiftCard': False, 'currentQuantity': 1, 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072683290690', 'name': 'Gift Card', 'quantity': 1, 'sku': None, 'isGiftCard': True, 'currentQuantity': 1, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': None}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217014566978', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'gift_card', 'amountSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:11Z', 'receiptJson': '{"gift_card_id":550425428034,"gift_card_last_characters":"bcah"}'}, {'id': 'gid://shopify/OrderTransaction/8217014730818', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '4998.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:24Z', 'receiptJson': '{}'}]}}, {'node': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'createdAt': '2025-09-29T08:07:17Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'returnStatus': 'RETURNED', 'sourceName': 'pos', 'sourceIdentifier': '70074990658-1-1013', 'totalPriceSet': {'shopMoney': {'amount': '10000.0', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '10000.0', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'firstName': 'Nora', 'lastName': 'Maged', 'email': 'testawy@test.net', 'phone': '+201005528282', 'addresses': []}, 'retailLocation': {'id': 'gid://shopify/Location/72406990914'}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072642134082', 'name': 'MM Watch - Blue', 'quantity': 1, 'sku': 'FG-0000715', 'isGiftCard': False, 'currentQuantity': 0, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': {'id': 'gid://shopify/ProductVariant/42387257458754', 'sku': 'FG-0000715', 'price': '5000.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7527948386370', 'title': 'MM Watch'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072644427842', 'name': 'Gift Card', 'quantity': 1, 'sku': None, 'isGiftCard': True, 'currentQuantity': 1, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': None}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8216992448578', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'Valu POS', 'amountSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:07:17Z', 'receiptJson': '{}'}]}}], 'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo2NDIwNDMxODk2NjQyLCJsYXN0X3ZhbHVlIjoxNzU5MTMzMjM3MDAwfQ=='}}}, 'status': 'success'}
2025-09-30 09:59:34,850 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 09:59:34,850 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation giftCardCreate($input: GiftCardCreateInput!) {\n                giftCardCreate(input: $input) {\n                    giftCard {\n                        id\n                        expiresOn\n                        initialValue {\n                            amount\n                        }\n                        customer {\n                            id\n                        }\n                    }\n                    userErrors {\n                        message\n                        field\n                        code\n                    }\n                }\n            }\n            ', 'variables': {'input': {'initialValue': '8.5', 'customerId': 'gid://shopify/Customer/8203737235522', 'recipientAttributes': None, 'note': 'Refund for order 1716 (ID: 6420456996930)', 'expiresOn': '2026-09-30'}}}, 'response': None, 'status': None}
2025-09-30 09:59:35,367 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCardCreate': {'giftCard': {'id': 'gid://shopify/GiftCard/550437224514', 'expiresOn': '2026-09-30', 'initialValue': {'amount': '8.5'}, 'customer': {'id': 'gid://shopify/Customer/8203737235522'}}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 09:59:35,368 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 09:59:35,369 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420456996930'}}, 'response': None, 'status': None}
2025-09-30 09:59:35,786 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420456996930', 'name': '#1716', 'tags': ['returntest', 'salestest', 'sap_invoice_23208', 'sap_invoice_synced', 'sap_payment_22385', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 09:59:35,787 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 09:59:35,787 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420456996930', 'tags': ['returntest', 'salestest', 'sap_invoice_23208', 'sap_invoice_synced', 'sap_payment_22385', 'sap_payment_synced', 'giftcard_gid://shopify/GiftCard/550437224514']}}}, 'response': None, 'status': None}
2025-09-30 09:59:36,217 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420456996930', 'name': '#1716', 'tags': ['returntest', 'salestest', 'sap_invoice_23208', 'sap_invoice_synced', 'sap_payment_22385', 'sap_payment_synced']}, 'userErrors': [{'field': ['tags'], 'message': 'Order tags is invalid'}]}}, 'status': 'success'}
2025-09-30 09:59:37,452 - sync_service - INFO - SAP login successful
2025-09-30 09:59:40,590 - sync_service - INFO - API log added to SAP: sap - IncomingPayments(22385) - success
2025-09-30 09:59:44,571 - sync_service - INFO - API log added to SAP: sap - IncomingPayments(22385)/Cancel - success
2025-09-30 09:59:48,052 - sync_service - INFO - API log added to SAP: sap - Invoices(23208) - success
2025-09-30 09:59:51,223 - sync_service - INFO - API log added to SAP: sap - Invoices(23208)/Cancel - success
2025-09-30 09:59:53,883 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-30 09:59:53,884 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 09:59:53,884 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420456996930'}}, 'response': None, 'status': None}
2025-09-30 09:59:54,312 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420456996930', 'name': '#1716', 'tags': ['returntest', 'salestest', 'sap_invoice_23208', 'sap_invoice_synced', 'sap_payment_22385', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 09:59:54,316 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 09:59:54,318 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420456996930', 'tags': ['returntest', 'salestest', 'sap_invoice_23208', 'sap_invoice_synced', 'sap_payment_22385', 'sap_payment_synced', 'sap_giftcard_invoice_synced']}}}, 'response': None, 'status': None}
2025-09-30 09:59:54,804 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420456996930', 'name': '#1716', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23208', 'sap_invoice_synced', 'sap_payment_22385', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 09:59:54,805 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 09:59:54,810 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420456996930'}}, 'response': None, 'status': None}
2025-09-30 09:59:55,625 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420456996930', 'name': '#1716', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23208', 'sap_invoice_synced', 'sap_payment_22385', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 09:59:55,626 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 09:59:55,627 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420456996930', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23208', 'sap_invoice_synced', 'sap_payment_22385', 'sap_payment_synced', 'sap_giftcard_invoice_23218']}}}, 'response': None, 'status': None}
2025-09-30 09:59:56,443 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420456996930', 'name': '#1716', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23218', 'sap_giftcard_invoice_synced', 'sap_invoice_23208', 'sap_invoice_synced', 'sap_payment_22385', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 09:59:59,306 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-30 09:59:59,308 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 09:59:59,310 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420456996930'}}, 'response': None, 'status': None}
2025-09-30 10:00:05,448 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420456996930', 'name': '#1716', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23218', 'sap_giftcard_invoice_synced', 'sap_invoice_23208', 'sap_invoice_synced', 'sap_payment_22385', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:00:05,452 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:00:05,453 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420456996930', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23218', 'sap_giftcard_invoice_synced', 'sap_invoice_23208', 'sap_invoice_synced', 'sap_payment_22385', 'sap_payment_synced', 'sap_giftcard_payment_synced']}}}, 'response': None, 'status': None}
2025-09-30 10:00:05,958 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420456996930', 'name': '#1716', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23218', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23208', 'sap_invoice_synced', 'sap_payment_22385', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:00:05,960 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:00:05,961 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420456996930'}}, 'response': None, 'status': None}
2025-09-30 10:00:06,778 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420456996930', 'name': '#1716', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23218', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23208', 'sap_invoice_synced', 'sap_payment_22385', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:00:06,780 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:00:06,781 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420456996930', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23218', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23208', 'sap_invoice_synced', 'sap_payment_22385', 'sap_payment_synced', 'sap_giftcard_payment_22394']}}}, 'response': None, 'status': None}
2025-09-30 10:00:07,392 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420456996930', 'name': '#1716', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23218', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22394', 'sap_giftcard_payment_synced', 'sap_invoice_23208', 'sap_invoice_synced', 'sap_payment_22385', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:00:07,394 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:00:07,395 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420456996930'}}, 'response': None, 'status': None}
2025-09-30 10:00:07,818 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420456996930', 'name': '#1716', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23218', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22394', 'sap_giftcard_payment_synced', 'sap_invoice_23208', 'sap_invoice_synced', 'sap_payment_22385', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:00:07,819 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:00:07,820 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420456996930', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23218', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22394', 'sap_giftcard_payment_synced', 'sap_invoice_23208', 'sap_invoice_synced', 'sap_payment_22385', 'sap_payment_synced', 'sap_return_synced']}}}, 'response': None, 'status': None}
2025-09-30 10:00:08,417 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420456996930', 'name': '#1716', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23218', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22394', 'sap_giftcard_payment_synced', 'sap_invoice_23208', 'sap_invoice_synced', 'sap_payment_22385', 'sap_payment_synced', 'sap_return_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:00:08,418 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:00:08,419 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-09-30 10:00:08,928 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550437224514', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-30T06:59:36Z', 'expiresOn': '2026-09-30', 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'email': 'testawyyyy@test.com'}}}]}}, 'status': 'success'}
2025-09-30 10:00:11,515 - sync_service - INFO - API log added to SAP: sap - IncomingPayments(22393) - success
2025-09-30 10:00:13,982 - sync_service - INFO - API log added to SAP: sap - IncomingPayments(22393)/Cancel - success
2025-09-30 10:00:16,702 - sync_service - INFO - API log added to SAP: sap - Invoices(23216) - success
2025-09-30 10:00:19,160 - sync_service - INFO - API log added to SAP: sap - Invoices(23216)/Cancel - success
2025-09-30 10:00:21,746 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-30 10:00:21,748 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:00:21,749 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:00:31,763 - sync_service - ERROR - GraphQL query error for store local: 
2025-09-30 10:00:32,718 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-09-30 10:00:33,731 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:00:33,733 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:00:34,202 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:00:34,204 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:00:34,205 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced', 'sap_giftcard_invoice_synced']}}}, 'response': None, 'status': None}
2025-09-30 10:00:34,685 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:00:34,708 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:00:34,709 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:00:35,125 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:00:35,126 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:00:35,127 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced', 'sap_giftcard_invoice_23220']}}}, 'response': None, 'status': None}
2025-09-30 10:00:35,635 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23220', 'sap_giftcard_invoice_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:00:38,100 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-30 10:00:38,101 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:00:38,102 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:00:45,360 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23220', 'sap_giftcard_invoice_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:00:45,361 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:00:45,362 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23220', 'sap_giftcard_invoice_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced', 'sap_giftcard_payment_synced']}}}, 'response': None, 'status': None}
2025-09-30 10:00:45,870 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23220', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:00:45,871 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:00:45,872 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:00:46,294 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23220', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:00:46,295 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:00:46,296 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23220', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced', 'sap_giftcard_payment_22395']}}}, 'response': None, 'status': None}
2025-09-30 10:00:46,894 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23220', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22395', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:00:46,895 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:00:46,895 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:00:47,614 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23220', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22395', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:00:47,616 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:00:47,617 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23220', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22395', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced', 'sap_return_synced']}}}, 'response': None, 'status': None}
2025-09-30 10:00:48,428 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23220', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22395', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced', 'sap_return_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:00:48,448 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:00:48,449 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-09-30 10:00:48,950 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550437224514', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-30T06:59:36Z', 'expiresOn': '2026-09-30', 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'email': 'testawyyyy@test.com'}}}]}}, 'status': 'success'}
2025-09-30 10:00:50,601 - sync_service - INFO - API log added to SAP: sap - IncomingPayments(22390) - success
2025-09-30 10:00:52,929 - sync_service - INFO - API log added to SAP: sap - IncomingPayments(22390)/Cancel - success
2025-09-30 10:00:55,123 - sync_service - INFO - API log added to SAP: sap - Invoices(23213) - success
2025-09-30 10:00:57,739 - sync_service - INFO - API log added to SAP: sap - Invoices(23213)/Cancel - success
2025-09-30 10:01:00,296 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-30 10:01:00,299 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:01:00,300 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420431896642'}}, 'response': None, 'status': None}
2025-09-30 10:01:00,735 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:01:00,736 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:01:00,737 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420431896642', 'tags': ['returntest', 'salestest', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced', 'sap_giftcard_invoice_synced']}}}, 'response': None, 'status': None}
2025-09-30 10:01:01,630 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:01:01,631 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:01:01,632 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420431896642'}}, 'response': None, 'status': None}
2025-09-30 10:01:11,650 - sync_service - ERROR - GraphQL query error for store local: 
2025-09-30 10:01:12,578 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-09-30 10:01:13,580 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:01:13,583 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420431896642'}}, 'response': None, 'status': None}
2025-09-30 10:01:14,114 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:01:14,115 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:01:14,116 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420431896642', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced', 'sap_giftcard_invoice_23222']}}}, 'response': None, 'status': None}
2025-09-30 10:01:14,735 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23222', 'sap_giftcard_invoice_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:01:16,324 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-30 10:01:16,325 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:01:16,326 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420431896642'}}, 'response': None, 'status': None}
2025-09-30 10:01:16,745 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23222', 'sap_giftcard_invoice_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:01:16,746 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:01:16,748 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420431896642', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23222', 'sap_giftcard_invoice_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced', 'sap_giftcard_payment_synced']}}}, 'response': None, 'status': None}
2025-09-30 10:01:17,286 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23222', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:01:17,288 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:01:17,289 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420431896642'}}, 'response': None, 'status': None}
2025-09-30 10:01:17,703 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23222', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:01:17,704 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:01:17,705 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420431896642', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23222', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced', 'sap_giftcard_payment_22396']}}}, 'response': None, 'status': None}
2025-09-30 10:01:18,207 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23222', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22396', 'sap_giftcard_payment_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:01:18,208 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:01:18,209 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420431896642'}}, 'response': None, 'status': None}
2025-09-30 10:01:18,655 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23222', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22396', 'sap_giftcard_payment_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:01:18,656 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:01:18,657 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420431896642', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23222', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22396', 'sap_giftcard_payment_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced', 'sap_return_synced']}}}, 'response': None, 'status': None}
2025-09-30 10:01:19,230 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23222', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22396', 'sap_giftcard_payment_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced', 'sap_return_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:15:44,227 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-30 10:15:44,267 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-30 10:15:44,270 - sync_service - INFO - Starting all syncs...
2025-09-30 10:15:44,271 - sync_service - INFO - Starting returns sync...
2025-09-30 10:15:44,272 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:15:44,273 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n                query getOrders($first: Int!, $after: String, $query: String) {\n                    orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                        edges {\n                            node {\n                                id\n                                name\n                                createdAt\n                                displayFinancialStatus\n                                displayFulfillmentStatus\n                                returnStatus\n                                sourceName\n                                sourceIdentifier\n                                totalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                subtotalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                totalShippingPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                customer {\n                                    id\n                                    firstName\n                                    lastName\n                                    email\n                                    phone\n                                    addresses {\n                                        address1\n                                        address2\n                                        city\n                                        province\n                                        zip\n                                        country\n                                        phone\n                                    }\n                                }\n                                retailLocation {\n                                    id\n                                }\n                                metafields(first: 10) {\n                                    edges {\n                                        node {\n                                            namespace\n                                            key\n                                            value\n                                        }\n                                    }\n                                }\n                                tags\n                                shippingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                billingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                lineItems(first: 50) {\n                                    edges {\n                                        node {\n                                            id\n                                            name\n                                            quantity\n                                            sku\n                                            isGiftCard\n                                            currentQuantity\n                                            originalUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            discountedUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            variant {\n                                                id\n                                                sku\n                                                price\n                                                compareAtPrice\n                                                product {\n                                                    id\n                                                    title\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                                transactions(first: 10) {\n                                    id\n                                    kind\n                                    status\n                                    gateway\n                                    amountSet {\n                                        shopMoney {\n                                            amount\n                                            currencyCode\n                                        }\n                                    }\n                                    processedAt\n                                    receiptJson\n                                }\n                            }\n                        }\n                        pageInfo {\n                            hasNextPage\n                            endCursor\n                        }\n                    }\n                }\n                ', 'variables': {'first': 10, 'after': None, 'query': 'tag:returntest \n                    financial_status:refunded OR financial_status:partially_refunded OR return_status:RETURNED\n                    tag:sap_invoice_synced \n                    tag:sap_payment_synced \n                    -tag:sap_return_synced \n                    created_at:>=2025-08-31'}}, 'response': None, 'status': None}
2025-09-30 10:15:54,301 - sync_service - ERROR - GraphQL query error for store local: 
2025-09-30 10:15:55,023 - sync_service - INFO - SAP logging client login successful
2025-09-30 10:15:55,702 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-09-30 10:15:57,710 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:15:57,711 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n                query getOrders($first: Int!, $after: String, $query: String) {\n                    orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                        edges {\n                            node {\n                                id\n                                name\n                                createdAt\n                                displayFinancialStatus\n                                displayFulfillmentStatus\n                                returnStatus\n                                sourceName\n                                sourceIdentifier\n                                totalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                subtotalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                totalShippingPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                customer {\n                                    id\n                                    firstName\n                                    lastName\n                                    email\n                                    phone\n                                    addresses {\n                                        address1\n                                        address2\n                                        city\n                                        province\n                                        zip\n                                        country\n                                        phone\n                                    }\n                                }\n                                retailLocation {\n                                    id\n                                }\n                                metafields(first: 10) {\n                                    edges {\n                                        node {\n                                            namespace\n                                            key\n                                            value\n                                        }\n                                    }\n                                }\n                                tags\n                                shippingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                billingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                lineItems(first: 50) {\n                                    edges {\n                                        node {\n                                            id\n                                            name\n                                            quantity\n                                            sku\n                                            isGiftCard\n                                            currentQuantity\n                                            originalUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            discountedUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            variant {\n                                                id\n                                                sku\n                                                price\n                                                compareAtPrice\n                                                product {\n                                                    id\n                                                    title\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                                transactions(first: 10) {\n                                    id\n                                    kind\n                                    status\n                                    gateway\n                                    amountSet {\n                                        shopMoney {\n                                            amount\n                                            currencyCode\n                                        }\n                                    }\n                                    processedAt\n                                    receiptJson\n                                }\n                            }\n                        }\n                        pageInfo {\n                            hasNextPage\n                            endCursor\n                        }\n                    }\n                }\n                ', 'variables': {'first': 10, 'after': None, 'query': 'tag:returntest \n                    financial_status:refunded OR financial_status:partially_refunded OR return_status:RETURNED\n                    tag:sap_invoice_synced \n                    tag:sap_payment_synced \n                    -tag:sap_return_synced \n                    created_at:>=2025-08-31'}}, 'response': None, 'status': None}
2025-09-30 10:15:58,278 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [{'node': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'createdAt': '2025-09-29T08:32:12Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'returnStatus': 'RETURNED', 'sourceName': 'pos', 'sourceIdentifier': '70074957890-1-1015', 'totalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'firstName': 'Eman', 'lastName': 'Mohamed', 'email': 'test215@test.com', 'phone': '+201005552224', 'addresses': []}, 'retailLocation': {'id': 'gid://shopify/Location/72407023682'}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072670904386', 'name': 'MM Watch - Blue', 'quantity': 1, 'sku': 'FG-0000715', 'isGiftCard': False, 'currentQuantity': 0, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': {'id': 'gid://shopify/ProductVariant/42387257458754', 'sku': 'FG-0000715', 'price': '5000.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7527948386370', 'title': 'MM Watch'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072670937154', 'name': 'Iron Man Necklace - Blue', 'quantity': 1, 'sku': 'FG-0000714', 'isGiftCard': False, 'currentQuantity': 1, 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072683290690', 'name': 'Gift Card', 'quantity': 1, 'sku': None, 'isGiftCard': True, 'currentQuantity': 1, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': None}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217014566978', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'gift_card', 'amountSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:11Z', 'receiptJson': '{"gift_card_id":550425428034,"gift_card_last_characters":"bcah"}'}, {'id': 'gid://shopify/OrderTransaction/8217014730818', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '4998.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:24Z', 'receiptJson': '{}'}]}}], 'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo2NDIwNDQ2MTgzNDkwLCJsYXN0X3ZhbHVlIjoxNzU5MTM0NzMyMDAwfQ=='}}}, 'status': 'success'}
2025-09-30 10:15:58,279 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:15:58,280 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-09-30 10:15:59,051 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550437224514', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-30T06:59:36Z', 'expiresOn': '2026-09-30', 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'email': 'testawyyyy@test.com'}}}]}}, 'status': 'success'}
2025-09-30 10:15:59,792 - sync_service - INFO - SAP login successful
2025-09-30 10:16:01,139 - sync_service - INFO - API log added to SAP: sap - IncomingPayments(22393) - success
2025-09-30 10:16:02,449 - sync_service - INFO - API log added to SAP: sap - Invoices(23216) - success
2025-09-30 10:16:05,230 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-30 10:16:05,233 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:16:05,234 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:16:05,661 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:16:05,661 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:16:05,663 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced', 'sap_giftcard_invoice_synced']}}}, 'response': None, 'status': None}
2025-09-30 10:16:06,493 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:16:06,494 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:16:06,495 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:16:16,504 - sync_service - ERROR - GraphQL query error for store local: 
2025-09-30 10:16:16,797 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-09-30 10:16:17,826 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:16:17,973 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:16:18,424 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:16:18,425 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:16:18,426 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced', 'sap_giftcard_invoice_23223']}}}, 'response': None, 'status': None}
2025-09-30 10:16:18,944 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23223', 'sap_giftcard_invoice_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:16:20,765 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-30 10:16:20,767 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:16:20,767 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:16:21,183 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23223', 'sap_giftcard_invoice_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:16:21,185 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:16:21,186 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23223', 'sap_giftcard_invoice_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced', 'sap_giftcard_payment_synced']}}}, 'response': None, 'status': None}
2025-09-30 10:16:21,678 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23223', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:16:21,679 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:16:21,679 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:16:22,205 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23223', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:16:22,208 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:16:22,209 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23223', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced', 'sap_giftcard_payment_22397']}}}, 'response': None, 'status': None}
2025-09-30 10:16:22,754 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23223', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22397', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:16:22,802 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:16:22,810 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:16:23,257 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23223', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22397', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:16:23,259 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:16:23,262 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23223', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22397', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced', 'sap_return_synced']}}}, 'response': None, 'status': None}
2025-09-30 10:16:24,759 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23223', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22397', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced', 'sap_return_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:27:30,378 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-30 10:27:30,459 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-30 10:27:30,461 - sync_service - INFO - Starting all syncs...
2025-09-30 10:27:30,461 - sync_service - INFO - Starting returns sync...
2025-09-30 10:27:30,462 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:27:30,462 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n                query getOrders($first: Int!, $after: String, $query: String) {\n                    orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                        edges {\n                            node {\n                                id\n                                name\n                                createdAt\n                                displayFinancialStatus\n                                displayFulfillmentStatus\n                                returnStatus\n                                sourceName\n                                sourceIdentifier\n                                totalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                subtotalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                totalShippingPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                customer {\n                                    id\n                                    firstName\n                                    lastName\n                                    email\n                                    phone\n                                    addresses {\n                                        address1\n                                        address2\n                                        city\n                                        province\n                                        zip\n                                        country\n                                        phone\n                                    }\n                                }\n                                retailLocation {\n                                    id\n                                }\n                                metafields(first: 10) {\n                                    edges {\n                                        node {\n                                            namespace\n                                            key\n                                            value\n                                        }\n                                    }\n                                }\n                                tags\n                                shippingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                billingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                lineItems(first: 50) {\n                                    edges {\n                                        node {\n                                            id\n                                            name\n                                            quantity\n                                            sku\n                                            isGiftCard\n                                            currentQuantity\n                                            originalUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            discountedUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            variant {\n                                                id\n                                                sku\n                                                price\n                                                compareAtPrice\n                                                product {\n                                                    id\n                                                    title\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                                transactions(first: 10) {\n                                    id\n                                    kind\n                                    status\n                                    gateway\n                                    amountSet {\n                                        shopMoney {\n                                            amount\n                                            currencyCode\n                                        }\n                                    }\n                                    processedAt\n                                    receiptJson\n                                }\n                            }\n                        }\n                        pageInfo {\n                            hasNextPage\n                            endCursor\n                        }\n                    }\n                }\n                ', 'variables': {'first': 10, 'after': None, 'query': 'tag:returntest \n                    financial_status:refunded OR financial_status:partially_refunded OR return_status:RETURNED\n                    tag:sap_invoice_synced \n                    tag:sap_payment_synced \n                    -tag:sap_return_synced \n                    created_at:>=2025-08-31'}}, 'response': None, 'status': None}
2025-09-30 10:27:40,500 - sync_service - ERROR - GraphQL query error for store local: 
2025-09-30 10:27:41,794 - sync_service - INFO - SAP logging client login successful
2025-09-30 10:27:42,478 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-09-30 10:27:44,492 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:27:44,503 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n                query getOrders($first: Int!, $after: String, $query: String) {\n                    orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                        edges {\n                            node {\n                                id\n                                name\n                                createdAt\n                                displayFinancialStatus\n                                displayFulfillmentStatus\n                                returnStatus\n                                sourceName\n                                sourceIdentifier\n                                totalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                subtotalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                totalShippingPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                customer {\n                                    id\n                                    firstName\n                                    lastName\n                                    email\n                                    phone\n                                    addresses {\n                                        address1\n                                        address2\n                                        city\n                                        province\n                                        zip\n                                        country\n                                        phone\n                                    }\n                                }\n                                retailLocation {\n                                    id\n                                }\n                                metafields(first: 10) {\n                                    edges {\n                                        node {\n                                            namespace\n                                            key\n                                            value\n                                        }\n                                    }\n                                }\n                                tags\n                                shippingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                billingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                lineItems(first: 50) {\n                                    edges {\n                                        node {\n                                            id\n                                            name\n                                            quantity\n                                            sku\n                                            isGiftCard\n                                            currentQuantity\n                                            originalUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            discountedUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            variant {\n                                                id\n                                                sku\n                                                price\n                                                compareAtPrice\n                                                product {\n                                                    id\n                                                    title\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                                transactions(first: 10) {\n                                    id\n                                    kind\n                                    status\n                                    gateway\n                                    amountSet {\n                                        shopMoney {\n                                            amount\n                                            currencyCode\n                                        }\n                                    }\n                                    processedAt\n                                    receiptJson\n                                }\n                            }\n                        }\n                        pageInfo {\n                            hasNextPage\n                            endCursor\n                        }\n                    }\n                }\n                ', 'variables': {'first': 10, 'after': None, 'query': 'tag:returntest \n                    financial_status:refunded OR financial_status:partially_refunded OR return_status:RETURNED\n                    tag:sap_invoice_synced \n                    tag:sap_payment_synced \n                    -tag:sap_return_synced \n                    created_at:>=2025-08-31'}}, 'response': None, 'status': None}
2025-09-30 10:27:45,123 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [{'node': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'createdAt': '2025-09-29T08:32:12Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'returnStatus': 'RETURNED', 'sourceName': 'pos', 'sourceIdentifier': '70074957890-1-1015', 'totalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'firstName': 'Eman', 'lastName': 'Mohamed', 'email': 'test215@test.com', 'phone': '+201005552224', 'addresses': []}, 'retailLocation': {'id': 'gid://shopify/Location/72407023682'}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072670904386', 'name': 'MM Watch - Blue', 'quantity': 1, 'sku': 'FG-0000715', 'isGiftCard': False, 'currentQuantity': 0, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': {'id': 'gid://shopify/ProductVariant/42387257458754', 'sku': 'FG-0000715', 'price': '5000.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7527948386370', 'title': 'MM Watch'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072670937154', 'name': 'Iron Man Necklace - Blue', 'quantity': 1, 'sku': 'FG-0000714', 'isGiftCard': False, 'currentQuantity': 1, 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072683290690', 'name': 'Gift Card', 'quantity': 1, 'sku': None, 'isGiftCard': True, 'currentQuantity': 1, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': None}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217014566978', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'gift_card', 'amountSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:11Z', 'receiptJson': '{"gift_card_id":550425428034,"gift_card_last_characters":"bcah"}'}, {'id': 'gid://shopify/OrderTransaction/8217014730818', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '4998.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:24Z', 'receiptJson': '{}'}]}}, {'node': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'createdAt': '2025-09-29T08:07:17Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'returnStatus': 'RETURNED', 'sourceName': 'pos', 'sourceIdentifier': '70074990658-1-1013', 'totalPriceSet': {'shopMoney': {'amount': '10000.0', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '10000.0', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'firstName': 'Nora', 'lastName': 'Maged', 'email': 'testawy@test.net', 'phone': '+201005528282', 'addresses': []}, 'retailLocation': {'id': 'gid://shopify/Location/72406990914'}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072642134082', 'name': 'MM Watch - Blue', 'quantity': 1, 'sku': 'FG-0000715', 'isGiftCard': False, 'currentQuantity': 0, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': {'id': 'gid://shopify/ProductVariant/42387257458754', 'sku': 'FG-0000715', 'price': '5000.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7527948386370', 'title': 'MM Watch'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072644427842', 'name': 'Gift Card', 'quantity': 1, 'sku': None, 'isGiftCard': True, 'currentQuantity': 1, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': None}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8216992448578', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'Valu POS', 'amountSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:07:17Z', 'receiptJson': '{}'}]}}], 'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo2NDIwNDMxODk2NjQyLCJsYXN0X3ZhbHVlIjoxNzU5MTMzMjM3MDAwfQ=='}}}, 'status': 'success'}
2025-09-30 10:27:45,126 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:27:45,127 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-09-30 10:27:45,594 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550437224514', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-30T06:59:36Z', 'expiresOn': '2026-09-30', 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'email': 'testawyyyy@test.com'}}}]}}, 'status': 'success'}
2025-09-30 10:27:46,262 - sync_service - INFO - SAP login successful
2025-09-30 10:27:47,589 - sync_service - INFO - API log added to SAP: sap - IncomingPayments(22393) - success
2025-09-30 10:27:48,910 - sync_service - INFO - API log added to SAP: sap - Invoices(23216) - success
2025-09-30 10:27:50,839 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-30 10:27:50,842 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:27:50,843 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:28:00,858 - sync_service - ERROR - GraphQL query error for store local: 
2025-09-30 10:28:01,143 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-09-30 10:28:02,146 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:28:02,147 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:28:02,566 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:28:02,568 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:28:02,568 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced', 'sap_giftcard_invoice_synced']}}}, 'response': None, 'status': None}
2025-09-30 10:28:03,059 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:28:03,059 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:28:03,060 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:28:03,504 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:28:03,504 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:28:03,505 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced', 'sap_giftcard_invoice_23224']}}}, 'response': None, 'status': None}
2025-09-30 10:28:03,998 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23224', 'sap_giftcard_invoice_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:28:05,623 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-30 10:28:05,624 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:28:05,624 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:28:06,062 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23224', 'sap_giftcard_invoice_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:28:06,063 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:28:06,063 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23224', 'sap_giftcard_invoice_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced', 'sap_giftcard_payment_synced']}}}, 'response': None, 'status': None}
2025-09-30 10:28:06,613 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23224', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:28:06,615 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:28:06,616 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:28:07,083 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23224', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:28:07,084 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:28:07,084 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23224', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced', 'sap_giftcard_payment_22398']}}}, 'response': None, 'status': None}
2025-09-30 10:28:13,689 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23224', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22398', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:28:13,689 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:28:13,691 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:28:14,113 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23224', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22398', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:28:14,114 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:28:14,115 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23224', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22398', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced', 'sap_return_synced']}}}, 'response': None, 'status': None}
2025-09-30 10:28:14,644 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23224', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22398', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced', 'sap_return_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:28:14,645 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:28:14,646 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-09-30 10:28:15,181 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550437224514', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-30T06:59:36Z', 'expiresOn': '2026-09-30', 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'email': 'testawyyyy@test.com'}}}]}}, 'status': 'success'}
2025-09-30 10:28:16,005 - sync_service - INFO - API log added to SAP: sap - IncomingPayments(22390) - success
2025-09-30 10:28:17,228 - sync_service - INFO - API log added to SAP: sap - Invoices(23213) - success
2025-09-30 10:28:18,867 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-30 10:28:18,872 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:28:18,874 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420431896642'}}, 'response': None, 'status': None}
2025-09-30 10:28:25,190 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:28:25,194 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:28:25,218 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420431896642', 'tags': ['returntest', 'salestest', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced', 'sap_giftcard_invoice_synced']}}}, 'response': None, 'status': None}
2025-09-30 10:28:25,731 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:28:25,731 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:28:25,732 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420431896642'}}, 'response': None, 'status': None}
2025-09-30 10:28:26,225 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:28:26,226 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:28:26,227 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420431896642', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced', 'sap_giftcard_invoice_23225']}}}, 'response': None, 'status': None}
2025-09-30 10:28:26,726 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23225', 'sap_giftcard_invoice_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:28:27,921 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-30 10:28:27,922 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:28:27,924 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420431896642'}}, 'response': None, 'status': None}
2025-09-30 10:28:28,310 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23225', 'sap_giftcard_invoice_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:28:28,311 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:28:28,311 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420431896642', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23225', 'sap_giftcard_invoice_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced', 'sap_giftcard_payment_synced']}}}, 'response': None, 'status': None}
2025-09-30 10:28:28,971 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23225', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:28:28,972 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:28:28,973 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420431896642'}}, 'response': None, 'status': None}
2025-09-30 10:28:29,429 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23225', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:28:29,429 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:28:29,431 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420431896642', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23225', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced', 'sap_giftcard_payment_22399']}}}, 'response': None, 'status': None}
2025-09-30 10:28:29,942 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23225', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22399', 'sap_giftcard_payment_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:28:29,942 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:28:29,943 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420431896642'}}, 'response': None, 'status': None}
2025-09-30 10:28:39,952 - sync_service - ERROR - GraphQL query error for store local: 
2025-09-30 10:28:40,224 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-09-30 10:28:41,233 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:28:41,233 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420431896642'}}, 'response': None, 'status': None}
2025-09-30 10:28:41,644 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23225', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22399', 'sap_giftcard_payment_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:28:41,646 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:28:41,647 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420431896642', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23225', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22399', 'sap_giftcard_payment_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced', 'sap_return_synced']}}}, 'response': None, 'status': None}
2025-09-30 10:28:42,120 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23225', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22399', 'sap_giftcard_payment_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced', 'sap_return_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:44:04,826 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-30 10:44:04,855 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-30 10:44:04,855 - sync_service - INFO - Starting all syncs...
2025-09-30 10:44:04,856 - sync_service - INFO - Starting returns sync...
2025-09-30 10:44:04,856 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:44:04,857 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n                query getOrders($first: Int!, $after: String, $query: String) {\n                    orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                        edges {\n                            node {\n                                id\n                                name\n                                createdAt\n                                displayFinancialStatus\n                                displayFulfillmentStatus\n                                returnStatus\n                                sourceName\n                                sourceIdentifier\n                                totalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                subtotalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                totalShippingPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                customer {\n                                    id\n                                    firstName\n                                    lastName\n                                    email\n                                    phone\n                                    addresses {\n                                        address1\n                                        address2\n                                        city\n                                        province\n                                        zip\n                                        country\n                                        phone\n                                    }\n                                }\n                                retailLocation {\n                                    id\n                                }\n                                metafields(first: 10) {\n                                    edges {\n                                        node {\n                                            namespace\n                                            key\n                                            value\n                                        }\n                                    }\n                                }\n                                tags\n                                shippingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                billingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                lineItems(first: 50) {\n                                    edges {\n                                        node {\n                                            id\n                                            name\n                                            quantity\n                                            sku\n                                            isGiftCard\n                                            currentQuantity\n                                            originalUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            discountedUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            variant {\n                                                id\n                                                sku\n                                                price\n                                                compareAtPrice\n                                                product {\n                                                    id\n                                                    title\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                                transactions(first: 10) {\n                                    id\n                                    kind\n                                    status\n                                    gateway\n                                    amountSet {\n                                        shopMoney {\n                                            amount\n                                            currencyCode\n                                        }\n                                    }\n                                    processedAt\n                                    receiptJson\n                                }\n                            }\n                        }\n                        pageInfo {\n                            hasNextPage\n                            endCursor\n                        }\n                    }\n                }\n                ', 'variables': {'first': 10, 'after': None, 'query': 'tag:returntest \n                    financial_status:refunded OR financial_status:partially_refunded OR return_status:RETURNED\n                    tag:sap_invoice_synced \n                    tag:sap_payment_synced \n                    -tag:sap_return_synced \n                    created_at:>=2025-08-31'}}, 'response': None, 'status': None}
2025-09-30 10:44:14,874 - sync_service - ERROR - GraphQL query error for store local: 
2025-09-30 10:44:35,921 - sync_service - ERROR - SAP logging client login error: All connection attempts failed
2025-09-30 10:44:35,924 - sync_service - ERROR - Failed to add API log to SAP: Failed to login to SAP
2025-09-30 10:44:37,931 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:44:37,931 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n                query getOrders($first: Int!, $after: String, $query: String) {\n                    orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                        edges {\n                            node {\n                                id\n                                name\n                                createdAt\n                                displayFinancialStatus\n                                displayFulfillmentStatus\n                                returnStatus\n                                sourceName\n                                sourceIdentifier\n                                totalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                subtotalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                totalShippingPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                customer {\n                                    id\n                                    firstName\n                                    lastName\n                                    email\n                                    phone\n                                    addresses {\n                                        address1\n                                        address2\n                                        city\n                                        province\n                                        zip\n                                        country\n                                        phone\n                                    }\n                                }\n                                retailLocation {\n                                    id\n                                }\n                                metafields(first: 10) {\n                                    edges {\n                                        node {\n                                            namespace\n                                            key\n                                            value\n                                        }\n                                    }\n                                }\n                                tags\n                                shippingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                billingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                lineItems(first: 50) {\n                                    edges {\n                                        node {\n                                            id\n                                            name\n                                            quantity\n                                            sku\n                                            isGiftCard\n                                            currentQuantity\n                                            originalUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            discountedUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            variant {\n                                                id\n                                                sku\n                                                price\n                                                compareAtPrice\n                                                product {\n                                                    id\n                                                    title\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                                transactions(first: 10) {\n                                    id\n                                    kind\n                                    status\n                                    gateway\n                                    amountSet {\n                                        shopMoney {\n                                            amount\n                                            currencyCode\n                                        }\n                                    }\n                                    processedAt\n                                    receiptJson\n                                }\n                            }\n                        }\n                        pageInfo {\n                            hasNextPage\n                            endCursor\n                        }\n                    }\n                }\n                ', 'variables': {'first': 10, 'after': None, 'query': 'tag:returntest \n                    financial_status:refunded OR financial_status:partially_refunded OR return_status:RETURNED\n                    tag:sap_invoice_synced \n                    tag:sap_payment_synced \n                    -tag:sap_return_synced \n                    created_at:>=2025-08-31'}}, 'response': None, 'status': None}
2025-09-30 10:44:38,613 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [{'node': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'createdAt': '2025-09-29T08:32:12Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'returnStatus': 'RETURNED', 'sourceName': 'pos', 'sourceIdentifier': '70074957890-1-1015', 'totalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'firstName': 'Eman', 'lastName': 'Mohamed', 'email': 'test215@test.com', 'phone': '+201005552224', 'addresses': []}, 'retailLocation': {'id': 'gid://shopify/Location/72407023682'}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072670904386', 'name': 'MM Watch - Blue', 'quantity': 1, 'sku': 'FG-0000715', 'isGiftCard': False, 'currentQuantity': 0, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': {'id': 'gid://shopify/ProductVariant/42387257458754', 'sku': 'FG-0000715', 'price': '5000.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7527948386370', 'title': 'MM Watch'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072670937154', 'name': 'Iron Man Necklace - Blue', 'quantity': 1, 'sku': 'FG-0000714', 'isGiftCard': False, 'currentQuantity': 1, 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072683290690', 'name': 'Gift Card', 'quantity': 1, 'sku': None, 'isGiftCard': True, 'currentQuantity': 1, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': None}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217014566978', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'gift_card', 'amountSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:11Z', 'receiptJson': '{"gift_card_id":550425428034,"gift_card_last_characters":"bcah"}'}, {'id': 'gid://shopify/OrderTransaction/8217014730818', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '4998.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:24Z', 'receiptJson': '{}'}]}}, {'node': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'createdAt': '2025-09-29T08:07:17Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'returnStatus': 'RETURNED', 'sourceName': 'pos', 'sourceIdentifier': '70074990658-1-1013', 'totalPriceSet': {'shopMoney': {'amount': '10000.0', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '10000.0', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'firstName': 'Nora', 'lastName': 'Maged', 'email': 'testawy@test.net', 'phone': '+201005528282', 'addresses': []}, 'retailLocation': {'id': 'gid://shopify/Location/72406990914'}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072642134082', 'name': 'MM Watch - Blue', 'quantity': 1, 'sku': 'FG-0000715', 'isGiftCard': False, 'currentQuantity': 0, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': {'id': 'gid://shopify/ProductVariant/42387257458754', 'sku': 'FG-0000715', 'price': '5000.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7527948386370', 'title': 'MM Watch'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072644427842', 'name': 'Gift Card', 'quantity': 1, 'sku': None, 'isGiftCard': True, 'currentQuantity': 1, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': None}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8216992448578', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'Valu POS', 'amountSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:07:17Z', 'receiptJson': '{}'}]}}], 'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo2NDIwNDMxODk2NjQyLCJsYXN0X3ZhbHVlIjoxNzU5MTMzMjM3MDAwfQ=='}}}, 'status': 'success'}
2025-09-30 10:44:38,616 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:44:38,616 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-09-30 10:44:39,047 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550437224514', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-30T06:59:36Z', 'expiresOn': '2026-09-30', 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'email': 'testawyyyy@test.com'}}}]}}, 'status': 'success'}
2025-09-30 10:44:49,969 - sync_service - INFO - SAP login successful
2025-09-30 10:44:52,699 - sync_service - INFO - SAP logging client login successful
2025-09-30 10:44:53,402 - sync_service - INFO - API log added to SAP: sap - IncomingPayments(22393) - success
2025-09-30 10:44:54,834 - sync_service - INFO - API log added to SAP: sap - Invoices(23216) - success
2025-09-30 10:44:57,708 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-30 10:44:57,708 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:44:57,709 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:45:07,717 - sync_service - ERROR - GraphQL query error for store local: 
2025-09-30 10:45:11,021 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-09-30 10:45:12,036 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:45:12,036 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:45:12,444 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:45:12,444 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:45:12,445 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced', 'sap_giftcard_invoice_synced']}}}, 'response': None, 'status': None}
2025-09-30 10:45:12,925 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:45:12,925 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:45:12,926 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:45:13,348 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:45:13,349 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:45:13,349 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced', 'sap_giftcard_invoice_23226']}}}, 'response': None, 'status': None}
2025-09-30 10:45:13,868 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23226', 'sap_giftcard_invoice_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:45:15,164 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-30 10:45:15,165 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:45:15,165 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:45:25,174 - sync_service - ERROR - GraphQL query error for store local: 
2025-09-30 10:46:14,006 - sync_service - ERROR - SAP logging client request error: 
2025-09-30 10:46:14,007 - sync_service - ERROR - Failed to add API log to SAP: SAP logging client request error: 
2025-09-30 10:46:15,016 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:46:15,017 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:46:15,448 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23226', 'sap_giftcard_invoice_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:46:15,449 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:46:15,449 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23226', 'sap_giftcard_invoice_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced', 'sap_giftcard_payment_synced']}}}, 'response': None, 'status': None}
2025-09-30 10:46:15,965 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23226', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:46:15,966 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:46:15,967 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:46:16,412 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23226', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:46:16,413 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:46:16,413 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23226', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced', 'sap_giftcard_payment_22400']}}}, 'response': None, 'status': None}
2025-09-30 10:46:16,899 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23226', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22400', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:46:16,900 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:46:16,900 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-09-30 10:46:17,307 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23226', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22400', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:46:17,308 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:46:17,308 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23226', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22400', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced', 'sap_return_synced']}}}, 'response': None, 'status': None}
2025-09-30 10:46:17,765 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23226', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22400', 'sap_giftcard_payment_synced', 'sap_invoice_23216', 'sap_invoice_synced', 'sap_payment_22389', 'sap_payment_22393', 'sap_payment_synced', 'sap_return_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:46:17,765 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:46:17,766 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-09-30 10:46:18,218 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550437224514', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-30T06:59:36Z', 'expiresOn': '2026-09-30', 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'email': 'testawyyyy@test.com'}}}]}}, 'status': 'success'}
2025-09-30 10:46:39,251 - sync_service - ERROR - SAP request error: All connection attempts failed
2025-09-30 10:50:07,969 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-30 10:50:08,021 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-09-30 10:50:08,022 - sync_service - INFO - Starting all syncs...
2025-09-30 10:50:08,022 - sync_service - INFO - Starting returns sync...
2025-09-30 10:50:08,022 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:50:08,023 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n                query getOrders($first: Int!, $after: String, $query: String) {\n                    orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                        edges {\n                            node {\n                                id\n                                name\n                                createdAt\n                                displayFinancialStatus\n                                displayFulfillmentStatus\n                                returnStatus\n                                sourceName\n                                sourceIdentifier\n                                totalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                subtotalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                totalShippingPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                customer {\n                                    id\n                                    firstName\n                                    lastName\n                                    email\n                                    phone\n                                    addresses {\n                                        address1\n                                        address2\n                                        city\n                                        province\n                                        zip\n                                        country\n                                        phone\n                                    }\n                                }\n                                retailLocation {\n                                    id\n                                }\n                                metafields(first: 10) {\n                                    edges {\n                                        node {\n                                            namespace\n                                            key\n                                            value\n                                        }\n                                    }\n                                }\n                                tags\n                                shippingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                billingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                lineItems(first: 50) {\n                                    edges {\n                                        node {\n                                            id\n                                            name\n                                            quantity\n                                            sku\n                                            isGiftCard\n                                            currentQuantity\n                                            originalUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            discountedUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            variant {\n                                                id\n                                                sku\n                                                price\n                                                compareAtPrice\n                                                product {\n                                                    id\n                                                    title\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                                transactions(first: 10) {\n                                    id\n                                    kind\n                                    status\n                                    gateway\n                                    amountSet {\n                                        shopMoney {\n                                            amount\n                                            currencyCode\n                                        }\n                                    }\n                                    processedAt\n                                    receiptJson\n                                }\n                            }\n                        }\n                        pageInfo {\n                            hasNextPage\n                            endCursor\n                        }\n                    }\n                }\n                ', 'variables': {'first': 10, 'after': None, 'query': 'tag:returntest \n                    financial_status:refunded OR financial_status:partially_refunded OR return_status:RETURNED\n                    tag:sap_invoice_synced \n                    tag:sap_payment_synced \n                    -tag:sap_return_synced \n                    created_at:>=2025-08-31'}}, 'response': None, 'status': None}
2025-09-30 10:50:18,052 - sync_service - ERROR - GraphQL query error for store local: 
2025-09-30 10:50:19,502 - sync_service - INFO - SAP logging client login successful
2025-09-30 10:50:20,872 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-09-30 10:50:22,873 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:50:22,876 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n                query getOrders($first: Int!, $after: String, $query: String) {\n                    orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                        edges {\n                            node {\n                                id\n                                name\n                                createdAt\n                                displayFinancialStatus\n                                displayFulfillmentStatus\n                                returnStatus\n                                sourceName\n                                sourceIdentifier\n                                totalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                subtotalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                totalShippingPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                customer {\n                                    id\n                                    firstName\n                                    lastName\n                                    email\n                                    phone\n                                    addresses {\n                                        address1\n                                        address2\n                                        city\n                                        province\n                                        zip\n                                        country\n                                        phone\n                                    }\n                                }\n                                retailLocation {\n                                    id\n                                }\n                                metafields(first: 10) {\n                                    edges {\n                                        node {\n                                            namespace\n                                            key\n                                            value\n                                        }\n                                    }\n                                }\n                                tags\n                                shippingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                billingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                lineItems(first: 50) {\n                                    edges {\n                                        node {\n                                            id\n                                            name\n                                            quantity\n                                            sku\n                                            isGiftCard\n                                            currentQuantity\n                                            originalUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            discountedUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            variant {\n                                                id\n                                                sku\n                                                price\n                                                compareAtPrice\n                                                product {\n                                                    id\n                                                    title\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                                transactions(first: 10) {\n                                    id\n                                    kind\n                                    status\n                                    gateway\n                                    amountSet {\n                                        shopMoney {\n                                            amount\n                                            currencyCode\n                                        }\n                                    }\n                                    processedAt\n                                    receiptJson\n                                }\n                            }\n                        }\n                        pageInfo {\n                            hasNextPage\n                            endCursor\n                        }\n                    }\n                }\n                ', 'variables': {'first': 10, 'after': None, 'query': 'tag:returntest \n                    financial_status:refunded OR financial_status:partially_refunded OR return_status:RETURNED\n                    tag:sap_invoice_synced \n                    tag:sap_payment_synced \n                    -tag:sap_return_synced \n                    created_at:>=2025-08-31'}}, 'response': None, 'status': None}
2025-09-30 10:50:23,538 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [{'node': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'createdAt': '2025-09-29T08:07:17Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'returnStatus': 'RETURNED', 'sourceName': 'pos', 'sourceIdentifier': '70074990658-1-1013', 'totalPriceSet': {'shopMoney': {'amount': '10000.0', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '10000.0', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'firstName': 'Nora', 'lastName': 'Maged', 'email': 'testawy@test.net', 'phone': '+201005528282', 'addresses': []}, 'retailLocation': {'id': 'gid://shopify/Location/72406990914'}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072642134082', 'name': 'MM Watch - Blue', 'quantity': 1, 'sku': 'FG-0000715', 'isGiftCard': False, 'currentQuantity': 0, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': {'id': 'gid://shopify/ProductVariant/42387257458754', 'sku': 'FG-0000715', 'price': '5000.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7527948386370', 'title': 'MM Watch'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072644427842', 'name': 'Gift Card', 'quantity': 1, 'sku': None, 'isGiftCard': True, 'currentQuantity': 1, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': None}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8216992448578', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'Valu POS', 'amountSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:07:17Z', 'receiptJson': '{}'}]}}], 'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo2NDIwNDMxODk2NjQyLCJsYXN0X3ZhbHVlIjoxNzU5MTMzMjM3MDAwfQ=='}}}, 'status': 'success'}
2025-09-30 10:50:23,541 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:50:23,542 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-09-30 10:50:24,100 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550437224514', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-30T06:59:36Z', 'expiresOn': '2026-09-30', 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'email': 'testawyyyy@test.com'}}}]}}, 'status': 'success'}
2025-09-30 10:50:25,638 - sync_service - INFO - SAP login successful
2025-09-30 10:50:28,522 - sync_service - INFO - API log added to SAP: sap - IncomingPayments(22390) - success
2025-09-30 10:50:30,624 - sync_service - INFO - API log added to SAP: sap - Invoices(23213) - success
2025-09-30 10:50:33,401 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-09-30 10:50:33,402 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:50:33,403 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420431896642'}}, 'response': None, 'status': None}
2025-09-30 10:50:35,333 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:50:35,334 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:50:35,335 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420431896642', 'tags': ['returntest', 'salestest', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced', 'sap_giftcard_invoice_synced']}}}, 'response': None, 'status': None}
2025-09-30 10:50:35,839 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:50:35,840 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:50:35,841 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420431896642'}}, 'response': None, 'status': None}
2025-09-30 10:50:36,236 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:50:36,237 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:50:36,238 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420431896642', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced', 'sap_giftcard_invoice_23227']}}}, 'response': None, 'status': None}
2025-09-30 10:50:36,714 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23227', 'sap_giftcard_invoice_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:50:37,845 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-09-30 10:50:37,846 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:50:37,847 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420431896642'}}, 'response': None, 'status': None}
2025-09-30 10:50:38,253 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23227', 'sap_giftcard_invoice_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:50:38,254 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:50:38,256 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420431896642', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23227', 'sap_giftcard_invoice_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced', 'sap_giftcard_payment_synced']}}}, 'response': None, 'status': None}
2025-09-30 10:50:38,729 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23227', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:50:38,730 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:50:38,731 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420431896642'}}, 'response': None, 'status': None}
2025-09-30 10:50:39,136 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23227', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:50:39,137 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:50:39,138 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420431896642', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23227', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced', 'sap_giftcard_payment_22401']}}}, 'response': None, 'status': None}
2025-09-30 10:50:39,698 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23227', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22401', 'sap_giftcard_payment_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-09-30 10:50:39,699 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:50:39,701 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420431896642'}}, 'response': None, 'status': None}
2025-09-30 10:50:40,126 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23227', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22401', 'sap_giftcard_payment_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced']}}, 'status': 'success'}
2025-09-30 10:50:40,127 - sync_service - INFO - Executing GraphQL query for store: local
2025-09-30 10:50:40,128 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420431896642', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23227', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22401', 'sap_giftcard_payment_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced', 'sap_return_synced']}}}, 'response': None, 'status': None}
2025-09-30 10:50:47,940 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420431896642', 'name': '#1712', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23227', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22401', 'sap_giftcard_payment_synced', 'sap_invoice_23213', 'sap_invoice_synced', 'sap_payment_22390', 'sap_payment_synced', 'sap_return_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-10-01 13:08:43,622 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-10-01 13:08:43,688 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-10-01 13:08:43,690 - sync_service - INFO - Starting all syncs...
2025-10-01 13:08:43,691 - sync_service - INFO - Starting sales orders sync...
2025-10-01 13:08:43,692 - sync_service - INFO - Starting orders sync...
2025-10-01 13:08:43,693 - sync_service - INFO - Fetching orders with filter: tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10
2025-10-01 13:08:43,694 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:08:43,695 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: false, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n                        retailLocation {\n                            id\n                        }\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        subtotalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        totalShippingPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Discounts applied ---\n                        discountApplications(first: 10) {\n                        edges {\n                            node {\n                            targetType        # ORDER or LINE_ITEM\n                            allocationMethod  # ACROSS / EACH / ONE\n                            value {\n                                __typename\n                                ... on PricingPercentageValue {\n                                percentage\n                                }\n                                ... on MoneyV2 {\n                                amount\n                                currencyCode\n                                }\n                            }\n                            ... on DiscountCodeApplication {\n                                code\n                            }\n                            ... on AutomaticDiscountApplication {\n                                title\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n                        \n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n                        shippingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n                        billingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n\n                        # --- Line Items with Discount Allocations ---\n                        lineItems(first: 50) {\n                        edges {\n                            node {\n                            id\n                            name\n                            quantity\n                            sku\n                            originalUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountedUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountAllocations {\n                                allocatedAmount {\n                                    amount\n                                    currencyCode\n                                }\n                                discountApplication {\n                                    __typename\n                                    ... on AutomaticDiscountApplication {\n                                        title\n                                    }\n                                    ... on DiscountCodeApplication {\n                                        code\n                                    }\n                                }\n                            }\n                            variant {\n                                id\n                                sku\n                                price\n                                compareAtPrice\n                                product {\n                                id\n                                title\n                                }\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Transactions (Gift cards show up here as gateway = "gift_card") ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson   # contains gift_card_id, last_characters etc if gift card used\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n\n            ', 'variables': {'first': 10, 'after': None, 'query': 'tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-10-01 13:08:44,498 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [{'node': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'createdAt': '2025-09-29T08:32:12Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '70074957890-1-1015', 'retailLocation': {'id': 'gid://shopify/Location/72407023682'}, 'totalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'firstName': 'Eman', 'lastName': 'Mohamed', 'email': 'test215@test.com', 'phone': '+201005552224', 'addresses': []}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072670904386', 'name': 'MM Watch - Blue', 'quantity': 1, 'sku': 'FG-0000715', 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42387257458754', 'sku': 'FG-0000715', 'price': '5000.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7527948386370', 'title': 'MM Watch'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072670937154', 'name': 'Iron Man Necklace - Blue', 'quantity': 1, 'sku': 'FG-0000714', 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072683290690', 'name': 'Gift Card', 'quantity': 1, 'sku': None, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': None}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217014566978', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'gift_card', 'amountSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:11Z', 'receiptJson': '{"gift_card_id":550425428034,"gift_card_last_characters":"bcah"}'}, {'id': 'gid://shopify/OrderTransaction/8217014730818', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '4998.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:24Z', 'receiptJson': '{}'}]}}], 'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo2NDIwNDQ2MTgzNDkwLCJsYXN0X3ZhbHVlIjoxNzU5MTM0NzMyMDAwfQ=='}}}, 'status': 'success'}
2025-10-01 13:08:44,499 - sync_service - INFO - Retrieved 1 unsynced orders (limited to 5 most recent) from Shopify store local
2025-10-01 13:08:44,499 - sync_service - INFO - Processing 1 orders from store local
2025-10-01 13:08:44,500 - sync_service - INFO - Processing order #1714 (ID: gid://shopify/Order/6420446183490)
2025-10-01 13:08:44,500 - sync_service - INFO - Found retail location ID for POS order: 72407023682
2025-10-01 13:08:44,501 - sync_service - INFO - Extracted POS receipt number: 1015
2025-10-01 13:08:44,501 - sync_service - INFO - Processing order: #1714 | Payment: PAID | Fulfillment: FULFILLED
2025-10-01 13:08:44,502 - sync_service - INFO - Payment Gateway: cash | Card Type: Unknown | Amount: 4998.5
2025-10-01 13:08:44,503 - sync_service - INFO -  GIFT CARDS USED: 1 cards, Total Amount: 10.0
2025-10-01 13:08:44,504 - sync_service - INFO -     Gift Card 1: bcah - 10.0 EGP
2025-10-01 13:08:44,506 - sync_service - INFO -  PAYMENT GATEWAYS USED: 1 gateways, Total Amount: 4998.5 EGP
2025-10-01 13:08:44,508 - sync_service - INFO -     Gateway 1: cash - 4998.5 EGP - Transaction ID: gid://shopify/OrderTransaction/8217014730818
2025-10-01 13:08:44,509 - sync_service - INFO -  SEARCHING CUSTOMER: Original phone: '+201005552224' -> Cleaned: '+201005552224'
2025-10-01 13:08:44,510 - sync_service - INFO -  SAP QUERY: Phone1 eq '+201005552224' or Phone2 eq '+201005552224' or Cellular eq '+201005552224'
2025-10-01 13:08:45,300 - sync_service - INFO - SAP login successful
2025-10-01 13:08:46,187 - sync_service - INFO -  CUSTOMER SEARCH RESULT: Found 1 customers
2025-10-01 13:08:46,187 - sync_service - INFO -  FOUND EXISTING CUSTOMER: C0021121 - Eman Mohamed
2025-10-01 13:08:46,188 - sync_service - INFO - Found existing customer: C0021121
2025-10-01 13:08:46,188 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000715', VariantSKU='fg-0000715', Name='mm watch - blue'
2025-10-01 13:08:46,189 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000714', VariantSKU='fg-0000714', Name='iron man necklace - blue'
2025-10-01 13:08:46,189 - sync_service - INFO - Checking line item for gift card: SKU='', VariantSKU='', Name='gift card'
2025-10-01 13:08:46,190 - sync_service - INFO - Found 1 gift card purchase(s) in order #1714
2025-10-01 13:08:46,190 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:08:46,191 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-10-01 13:08:46,720 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550437224514', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-30T06:59:36Z', 'expiresOn': '2026-09-30', 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'email': 'testawyyyy@test.com'}}}]}}, 'status': 'success'}
2025-10-01 13:08:46,723 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}
2025-10-01 13:08:46,724 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}
2025-10-01 13:08:46,725 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}
2025-10-01 13:08:46,725 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}
2025-10-01 13:08:46,726 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550437224514', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-30T06:59:36Z', 'expiresOn': '2026-09-30', 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'email': 'testawyyyy@test.com'}}}
2025-10-01 13:08:46,727 - sync_service - INFO - Found 1 gift cards for order 6420446183490
2025-10-01 13:08:46,727 - sync_service - INFO - Looking for gift card with unit price: 5000.0
2025-10-01 13:08:46,728 - sync_service - INFO - Available Shopify gift cards: [{'id': 'gid://shopify/GiftCard/550425493570', 'amount': 5000.0}]
2025-10-01 13:08:46,728 - sync_service - INFO - Checking gift card gid://shopify/GiftCard/550425493570 with amount 5000.0 against unit price 5000.0
2025-10-01 13:08:46,729 - sync_service - INFO -  Found matching gift card: gid://shopify/GiftCard/550425493570
2025-10-01 13:08:46,729 - sync_service - INFO - Preparing gift card data for invoice line: 550425493570 - Amount: 5000.0 - SKU: 
2025-10-01 13:08:46,730 - sync_service - INFO - Successfully created 1 gift card(s) in SAP
2025-10-01 13:08:46,733 - sync_service - INFO - Found retail location ID for POS order: 72407023682
2025-10-01 13:08:46,734 - sync_service - INFO - Extracted POS receipt number: 1015
2025-10-01 13:08:46,735 - sync_service - INFO - Using location-based costing codes for order #1714: {'COGSCostingCode': 'LakeTown', 'COGSCostingCode2': 'SAL', 'COGSCostingCode3': 'General', 'CostingCode': 'LakeTown', 'CostingCode2': 'SAL', 'CostingCode3': 'General', 'Warehouse': 'LTW'}
2025-10-01 13:08:46,737 - sync_service - INFO -  Pricing for FG-0000714: Original=10.00, Sale=8.50, Discount=15.0%
2025-10-01 13:08:46,741 - sync_service - INFO - Skipping gift card line item for POS refund: Gift Card - Amount: 5000.0
2025-10-01 13:08:46,743 - sync_service - INFO -  Processing 1 gift card redemption(s)
2025-10-01 13:08:46,747 - sync_service - INFO -  Created gift card expense: bcah - Amount: -10.0
2025-10-01 13:08:46,748 - sync_service - INFO - Added POS receipt number to invoice: 1015
2025-10-01 13:08:48,272 - sync_service - INFO - SAP logging client login successful
2025-10-01 13:08:49,009 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-10-01 13:08:51,062 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-10-01 13:08:51,063 - sync_service - INFO - Created invoice in SAP: 23228
2025-10-01 13:08:51,063 - sync_service - INFO - Created invoice data: {'DocEntry': 23228, 'DocNum': 100018934, 'DocTotal': 4998.5, 'TransNum': 97114}
2025-10-01 13:08:56,355 - sync_service - INFO - Added tag 'sap_invoice_23228' to order gid://shopify/Order/6420446183490
2025-10-01 13:08:58,082 - sync_service - INFO - Added tag 'sap_invoice_synced' to order gid://shopify/Order/6420446183490
2025-10-01 13:08:58,082 - sync_service - INFO -  Invoice created and tagged for order #1714
2025-10-01 13:08:58,082 - sync_service - INFO - Order #1714 is paid - creating incoming payment in SAP
2025-10-01 13:08:58,084 - sync_service - INFO -  POS ORDER DETECTED - Processing multiple payment types
2025-10-01 13:08:58,084 - sync_service - INFO -  CASH TRANSACTION: 4998.5 EGP - Account: 10801248
2025-10-01 13:08:58,084 - sync_service - INFO -  POS PAYMENT SUMMARY: Total Calculated Amount: 4998.5 EGP
2025-10-01 13:08:59,723 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - failure
2025-10-01 13:08:59,724 - sync_service - ERROR - Failed to create incoming payment in SAP: HTTP 400: {
   "error" : {
      "code" : -4013,
      "message" : {
         "lang" : "en-us",
         "value" : "Posting period locked; specify an alternative date"
      }
   }
}

2025-10-01 13:08:59,725 - sync_service - WARNING - Failed to create incoming payment for #1714: HTTP 400: {
   "error" : {
      "code" : -4013,
      "message" : {
         "lang" : "en-us",
         "value" : "Posting period locked; specify an alternative date"
      }
   }
}

2025-10-01 13:09:01,972 - sync_service - INFO - Added tag 'sap_payment_failed' to order gid://shopify/Order/6420446183490
2025-10-01 13:09:01,973 - sync_service - INFO - Successfully processed order #1714
2025-10-01 13:09:01,974 - sync_service - INFO -  Processed order #1714 -> SAP Invoice: 23228
2025-10-01 13:09:01,974 - sync_service - INFO -     Gateway: cash | Amount: 4998.5
2025-10-01 13:09:01,975 - sync_service - INFO - Sync Event: {'sync_type': 'sales_orders', 'items_processed': 1, 'success_count': 1, 'error_count': 0, 'details': None}
2025-10-01 13:09:01,975 - sync_service - INFO - Orders sync completed. Processed: 1, Success: 1, Errors: 0
2025-10-01 13:09:01,976 - sync_service - INFO - Starting returns sync...
2025-10-01 13:09:01,976 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:09:01,977 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n                query getOrders($first: Int!, $after: String, $query: String) {\n                    orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                        edges {\n                            node {\n                                id\n                                name\n                                createdAt\n                                displayFinancialStatus\n                                displayFulfillmentStatus\n                                returnStatus\n                                sourceName\n                                sourceIdentifier\n                                totalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                subtotalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                totalShippingPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                customer {\n                                    id\n                                    firstName\n                                    lastName\n                                    email\n                                    phone\n                                    addresses {\n                                        address1\n                                        address2\n                                        city\n                                        province\n                                        zip\n                                        country\n                                        phone\n                                    }\n                                }\n                                retailLocation {\n                                    id\n                                }\n                                metafields(first: 10) {\n                                    edges {\n                                        node {\n                                            namespace\n                                            key\n                                            value\n                                        }\n                                    }\n                                }\n                                tags\n                                shippingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                billingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                lineItems(first: 50) {\n                                    edges {\n                                        node {\n                                            id\n                                            name\n                                            quantity\n                                            sku\n                                            isGiftCard\n                                            currentQuantity\n                                            originalUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            discountedUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            variant {\n                                                id\n                                                sku\n                                                price\n                                                compareAtPrice\n                                                product {\n                                                    id\n                                                    title\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                                transactions(first: 10) {\n                                    id\n                                    kind\n                                    status\n                                    gateway\n                                    amountSet {\n                                        shopMoney {\n                                            amount\n                                            currencyCode\n                                        }\n                                    }\n                                    processedAt\n                                    receiptJson\n                                }\n                            }\n                        }\n                        pageInfo {\n                            hasNextPage\n                            endCursor\n                        }\n                    }\n                }\n                ', 'variables': {'first': 10, 'after': None, 'query': 'tag:returntest \n                    financial_status:refunded OR financial_status:partially_refunded OR return_status:RETURNED\n                    tag:sap_invoice_synced \n                    tag:sap_payment_synced \n                    -tag:sap_return_synced \n                    created_at:>=2025-09-01'}}, 'response': None, 'status': None}
2025-10-01 13:09:08,110 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [], 'pageInfo': {'hasNextPage': False, 'endCursor': None}}}, 'status': 'success'}
2025-10-01 13:14:18,170 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-10-01 13:14:18,185 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-10-01 13:14:18,186 - sync_service - INFO - Starting all syncs...
2025-10-01 13:14:18,187 - sync_service - INFO - Starting sales orders sync...
2025-10-01 13:14:18,187 - sync_service - INFO - Starting orders sync...
2025-10-01 13:14:18,187 - sync_service - INFO - Fetching orders with filter: tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10
2025-10-01 13:14:18,188 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:14:18,188 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: false, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n                        retailLocation {\n                            id\n                        }\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        subtotalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        totalShippingPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Discounts applied ---\n                        discountApplications(first: 10) {\n                        edges {\n                            node {\n                            targetType        # ORDER or LINE_ITEM\n                            allocationMethod  # ACROSS / EACH / ONE\n                            value {\n                                __typename\n                                ... on PricingPercentageValue {\n                                percentage\n                                }\n                                ... on MoneyV2 {\n                                amount\n                                currencyCode\n                                }\n                            }\n                            ... on DiscountCodeApplication {\n                                code\n                            }\n                            ... on AutomaticDiscountApplication {\n                                title\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n                        \n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n                        shippingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n                        billingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n\n                        # --- Line Items with Discount Allocations ---\n                        lineItems(first: 50) {\n                        edges {\n                            node {\n                            id\n                            name\n                            quantity\n                            sku\n                            originalUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountedUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountAllocations {\n                                allocatedAmount {\n                                    amount\n                                    currencyCode\n                                }\n                                discountApplication {\n                                    __typename\n                                    ... on AutomaticDiscountApplication {\n                                        title\n                                    }\n                                    ... on DiscountCodeApplication {\n                                        code\n                                    }\n                                }\n                            }\n                            variant {\n                                id\n                                sku\n                                price\n                                compareAtPrice\n                                product {\n                                id\n                                title\n                                }\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Transactions (Gift cards show up here as gateway = "gift_card") ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson   # contains gift_card_id, last_characters etc if gift card used\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n\n            ', 'variables': {'first': 10, 'after': None, 'query': 'tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-10-01 13:14:18,643 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [], 'pageInfo': {'hasNextPage': False, 'endCursor': None}}}, 'status': 'success'}
2025-10-01 13:14:18,643 - sync_service - INFO - Retrieved 0 unsynced orders (limited to 5 most recent) from Shopify store local
2025-10-01 13:14:18,643 - sync_service - INFO - No orders to process for store local
2025-10-01 13:14:18,644 - sync_service - INFO - Sync Event: {'sync_type': 'sales_orders', 'items_processed': 0, 'success_count': 0, 'error_count': 0, 'details': None}
2025-10-01 13:14:18,644 - sync_service - INFO - Orders sync completed. Processed: 0, Success: 0, Errors: 0
2025-10-01 13:14:18,644 - sync_service - INFO - Starting payment recovery sync...
2025-10-01 13:14:18,645 - sync_service - INFO - Starting payment recovery sync...
2025-10-01 13:14:18,645 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:14:18,645 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n\n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n\n                        # --- Transactions ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n            ', 'variables': {'first': 10, 'after': None, 'query': '(financial_status:paid OR financial_status:partially_refunded OR financial_status:refunded) AND tag:sap_invoice_synced AND -tag:sap_payment_synced AND -tag:sap_payment_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-10-01 13:14:19,126 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [], 'pageInfo': {'hasNextPage': False, 'endCursor': None}}}, 'status': 'success'}
2025-10-01 13:14:19,126 - sync_service - INFO - Retrieved 0 orders that need payment recovery from Shopify store local
2025-10-01 13:14:19,127 - sync_service - INFO - No orders need payment recovery for store local
2025-10-01 13:14:19,127 - sync_service - INFO - Sync Event: {'sync_type': 'payment_recovery', 'items_processed': 0, 'success_count': 0, 'error_count': 0, 'details': None}
2025-10-01 13:14:19,128 - sync_service - INFO - Payment recovery sync completed. Processed: 0, Success: 0, Skipped: 0, Errors: 0
2025-10-01 13:14:19,128 - sync_service - INFO - Starting returns sync...
2025-10-01 13:14:19,128 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:14:19,129 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n                query getOrders($first: Int!, $after: String, $query: String) {\n                    orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                        edges {\n                            node {\n                                id\n                                name\n                                createdAt\n                                displayFinancialStatus\n                                displayFulfillmentStatus\n                                returnStatus\n                                sourceName\n                                sourceIdentifier\n                                totalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                subtotalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                totalShippingPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                customer {\n                                    id\n                                    firstName\n                                    lastName\n                                    email\n                                    phone\n                                    addresses {\n                                        address1\n                                        address2\n                                        city\n                                        province\n                                        zip\n                                        country\n                                        phone\n                                    }\n                                }\n                                retailLocation {\n                                    id\n                                }\n                                metafields(first: 10) {\n                                    edges {\n                                        node {\n                                            namespace\n                                            key\n                                            value\n                                        }\n                                    }\n                                }\n                                tags\n                                shippingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                billingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                lineItems(first: 50) {\n                                    edges {\n                                        node {\n                                            id\n                                            name\n                                            quantity\n                                            sku\n                                            isGiftCard\n                                            currentQuantity\n                                            originalUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            discountedUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            variant {\n                                                id\n                                                sku\n                                                price\n                                                compareAtPrice\n                                                product {\n                                                    id\n                                                    title\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                                transactions(first: 10) {\n                                    id\n                                    kind\n                                    status\n                                    gateway\n                                    amountSet {\n                                        shopMoney {\n                                            amount\n                                            currencyCode\n                                        }\n                                    }\n                                    processedAt\n                                    receiptJson\n                                }\n                            }\n                        }\n                        pageInfo {\n                            hasNextPage\n                            endCursor\n                        }\n                    }\n                }\n                ', 'variables': {'first': 10, 'after': None, 'query': 'tag:returntest \n                    financial_status:refunded OR financial_status:partially_refunded OR return_status:RETURNED\n                    tag:sap_invoice_synced \n                    tag:sap_payment_synced \n                    -tag:sap_return_synced \n                    created_at:>=2025-09-01'}}, 'response': None, 'status': None}
2025-10-01 13:14:19,732 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [], 'pageInfo': {'hasNextPage': False, 'endCursor': None}}}, 'status': 'success'}
2025-10-01 13:14:31,374 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-10-01 13:14:31,391 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-10-01 13:14:31,394 - sync_service - INFO - Starting all syncs...
2025-10-01 13:14:31,394 - sync_service - INFO - Starting sales orders sync...
2025-10-01 13:14:31,395 - sync_service - INFO - Starting orders sync...
2025-10-01 13:14:31,396 - sync_service - INFO - Fetching orders with filter: tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10
2025-10-01 13:14:31,397 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:14:31,397 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: false, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n                        retailLocation {\n                            id\n                        }\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        subtotalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        totalShippingPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Discounts applied ---\n                        discountApplications(first: 10) {\n                        edges {\n                            node {\n                            targetType        # ORDER or LINE_ITEM\n                            allocationMethod  # ACROSS / EACH / ONE\n                            value {\n                                __typename\n                                ... on PricingPercentageValue {\n                                percentage\n                                }\n                                ... on MoneyV2 {\n                                amount\n                                currencyCode\n                                }\n                            }\n                            ... on DiscountCodeApplication {\n                                code\n                            }\n                            ... on AutomaticDiscountApplication {\n                                title\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n                        \n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n                        shippingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n                        billingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n\n                        # --- Line Items with Discount Allocations ---\n                        lineItems(first: 50) {\n                        edges {\n                            node {\n                            id\n                            name\n                            quantity\n                            sku\n                            originalUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountedUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountAllocations {\n                                allocatedAmount {\n                                    amount\n                                    currencyCode\n                                }\n                                discountApplication {\n                                    __typename\n                                    ... on AutomaticDiscountApplication {\n                                        title\n                                    }\n                                    ... on DiscountCodeApplication {\n                                        code\n                                    }\n                                }\n                            }\n                            variant {\n                                id\n                                sku\n                                price\n                                compareAtPrice\n                                product {\n                                id\n                                title\n                                }\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Transactions (Gift cards show up here as gateway = "gift_card") ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson   # contains gift_card_id, last_characters etc if gift card used\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n\n            ', 'variables': {'first': 10, 'after': None, 'query': 'tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-10-01 13:14:31,947 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [], 'pageInfo': {'hasNextPage': False, 'endCursor': None}}}, 'status': 'success'}
2025-10-01 13:14:31,948 - sync_service - INFO - Retrieved 0 unsynced orders (limited to 5 most recent) from Shopify store local
2025-10-01 13:14:31,949 - sync_service - INFO - No orders to process for store local
2025-10-01 13:14:31,949 - sync_service - INFO - Sync Event: {'sync_type': 'sales_orders', 'items_processed': 0, 'success_count': 0, 'error_count': 0, 'details': None}
2025-10-01 13:14:31,949 - sync_service - INFO - Orders sync completed. Processed: 0, Success: 0, Errors: 0
2025-10-01 13:14:31,950 - sync_service - INFO - Starting payment recovery sync...
2025-10-01 13:14:31,950 - sync_service - INFO - Starting payment recovery sync...
2025-10-01 13:14:31,951 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:14:31,951 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n\n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n\n                        # --- Transactions ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n            ', 'variables': {'first': 10, 'after': None, 'query': '(financial_status:paid OR financial_status:partially_refunded OR financial_status:refunded) AND tag:sap_invoice_synced AND -tag:sap_payment_synced AND -tag:sap_payment_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-10-01 13:14:32,410 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [{'node': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'createdAt': '2025-09-29T08:32:12Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '70074957890-1-1015', 'totalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'firstName': 'Eman', 'lastName': 'Mohamed', 'email': 'test215@test.com', 'phone': '+201005552224', 'addresses': []}, 'retailLocation': {'id': 'gid://shopify/Location/72407023682'}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest', 'sap_invoice_23228', 'sap_invoice_synced'], 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217014566978', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'gift_card', 'amountSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:11Z', 'receiptJson': '{"gift_card_id":550425428034,"gift_card_last_characters":"bcah"}'}, {'id': 'gid://shopify/OrderTransaction/8217014730818', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '4998.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:24Z', 'receiptJson': '{}'}]}}], 'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo2NDIwNDQ2MTgzNDkwLCJsYXN0X3ZhbHVlIjoxNzU5MTM0NzMyMDAwfQ=='}}}, 'status': 'success'}
2025-10-01 13:14:32,411 - sync_service - INFO - Retrieved 1 orders that need payment recovery from Shopify store local
2025-10-01 13:14:32,411 - sync_service - INFO - Processing 1 orders for payment recovery from store local
2025-10-01 13:14:32,412 - sync_service - INFO - Processing payment recovery for order #1714 (ID: gid://shopify/Order/6420446183490)
2025-10-01 13:14:32,412 - sync_service - INFO - Found retail location ID for POS order: 72407023682
2025-10-01 13:14:32,412 - sync_service - INFO - Extracted POS receipt number: 1015
2025-10-01 13:14:32,413 - sync_service - INFO - Processing payment recovery for order: #1714 | Payment: PAID | Fulfillment: FULFILLED
2025-10-01 13:14:32,413 - sync_service - INFO - Found SAP invoice DocEntry: 23228 for order #1714
2025-10-01 13:14:33,122 - sync_service - INFO - SAP login successful
2025-10-01 13:14:34,436 - sync_service - INFO - SAP logging client login successful
2025-10-01 13:14:35,105 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-10-01 13:14:35,106 - sync_service - INFO - Found SAP invoice DocEntry: 23228
2025-10-01 13:14:35,107 - sync_service - INFO - Found SAP invoice DocEntry: 23228 for order #1714
2025-10-01 13:14:36,690 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-10-01 13:14:36,691 - sync_service - INFO - Payment for order 6420446183490 already exists in SAP with DocEntry: 22389
2025-10-01 13:14:36,691 - sync_service - INFO - Payment for order #1714 already exists in SAP with DocEntry: 22389
2025-10-01 13:14:37,997 - sync_service - INFO - Added tag 'sap_payment_22389' to order gid://shopify/Order/6420446183490
2025-10-01 13:14:43,803 - sync_service - INFO - Added tag 'sap_payment_synced' to order gid://shopify/Order/6420446183490
2025-10-01 13:14:43,804 - sync_service - INFO -  Skipped order #1714 - Payment already exists in SAP
2025-10-01 13:14:43,805 - sync_service - INFO - Sync Event: {'sync_type': 'payment_recovery', 'items_processed': 1, 'success_count': 0, 'error_count': 0, 'details': None}
2025-10-01 13:14:43,806 - sync_service - INFO - Payment recovery sync completed. Processed: 1, Success: 0, Skipped: 1, Errors: 0
2025-10-01 13:14:43,808 - sync_service - INFO - Starting returns sync...
2025-10-01 13:14:43,808 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:14:43,809 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n                query getOrders($first: Int!, $after: String, $query: String) {\n                    orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                        edges {\n                            node {\n                                id\n                                name\n                                createdAt\n                                displayFinancialStatus\n                                displayFulfillmentStatus\n                                returnStatus\n                                sourceName\n                                sourceIdentifier\n                                totalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                subtotalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                totalShippingPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                customer {\n                                    id\n                                    firstName\n                                    lastName\n                                    email\n                                    phone\n                                    addresses {\n                                        address1\n                                        address2\n                                        city\n                                        province\n                                        zip\n                                        country\n                                        phone\n                                    }\n                                }\n                                retailLocation {\n                                    id\n                                }\n                                metafields(first: 10) {\n                                    edges {\n                                        node {\n                                            namespace\n                                            key\n                                            value\n                                        }\n                                    }\n                                }\n                                tags\n                                shippingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                billingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                lineItems(first: 50) {\n                                    edges {\n                                        node {\n                                            id\n                                            name\n                                            quantity\n                                            sku\n                                            isGiftCard\n                                            currentQuantity\n                                            originalUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            discountedUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            variant {\n                                                id\n                                                sku\n                                                price\n                                                compareAtPrice\n                                                product {\n                                                    id\n                                                    title\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                                transactions(first: 10) {\n                                    id\n                                    kind\n                                    status\n                                    gateway\n                                    amountSet {\n                                        shopMoney {\n                                            amount\n                                            currencyCode\n                                        }\n                                    }\n                                    processedAt\n                                    receiptJson\n                                }\n                            }\n                        }\n                        pageInfo {\n                            hasNextPage\n                            endCursor\n                        }\n                    }\n                }\n                ', 'variables': {'first': 10, 'after': None, 'query': 'tag:returntest \n                    financial_status:refunded OR financial_status:partially_refunded OR return_status:RETURNED\n                    tag:sap_invoice_synced \n                    tag:sap_payment_synced \n                    -tag:sap_return_synced \n                    created_at:>=2025-09-01'}}, 'response': None, 'status': None}
2025-10-01 13:14:44,327 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [], 'pageInfo': {'hasNextPage': False, 'endCursor': None}}}, 'status': 'success'}
2025-10-01 13:23:51,199 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-10-01 13:23:51,209 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-10-01 13:23:51,211 - sync_service - INFO - Starting all syncs...
2025-10-01 13:23:51,211 - sync_service - INFO - Starting sales orders sync...
2025-10-01 13:23:51,212 - sync_service - INFO - Starting orders sync...
2025-10-01 13:23:51,212 - sync_service - INFO - Fetching orders with filter: tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10
2025-10-01 13:23:51,212 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:23:51,213 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: false, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n                        retailLocation {\n                            id\n                        }\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        subtotalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        totalShippingPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Discounts applied ---\n                        discountApplications(first: 10) {\n                        edges {\n                            node {\n                            targetType        # ORDER or LINE_ITEM\n                            allocationMethod  # ACROSS / EACH / ONE\n                            value {\n                                __typename\n                                ... on PricingPercentageValue {\n                                percentage\n                                }\n                                ... on MoneyV2 {\n                                amount\n                                currencyCode\n                                }\n                            }\n                            ... on DiscountCodeApplication {\n                                code\n                            }\n                            ... on AutomaticDiscountApplication {\n                                title\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n                        \n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n                        shippingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n                        billingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n\n                        # --- Line Items with Discount Allocations ---\n                        lineItems(first: 50) {\n                        edges {\n                            node {\n                            id\n                            name\n                            quantity\n                            sku\n                            originalUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountedUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountAllocations {\n                                allocatedAmount {\n                                    amount\n                                    currencyCode\n                                }\n                                discountApplication {\n                                    __typename\n                                    ... on AutomaticDiscountApplication {\n                                        title\n                                    }\n                                    ... on DiscountCodeApplication {\n                                        code\n                                    }\n                                }\n                            }\n                            variant {\n                                id\n                                sku\n                                price\n                                compareAtPrice\n                                product {\n                                id\n                                title\n                                }\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Transactions (Gift cards show up here as gateway = "gift_card") ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson   # contains gift_card_id, last_characters etc if gift card used\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n\n            ', 'variables': {'first': 10, 'after': None, 'query': 'tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-10-01 13:24:01,235 - sync_service - ERROR - GraphQL query error for store local: 
2025-10-01 13:24:01,955 - sync_service - INFO - SAP logging client login successful
2025-10-01 13:24:02,620 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-10-01 13:24:02,622 - sync_service - WARNING - GraphQL attempt 1/3 failed: GraphQL query error for store local: 
2025-10-01 13:24:02,623 - sync_service - INFO - Retrying in 2 seconds...
2025-10-01 13:24:04,630 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:24:04,630 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: false, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n                        retailLocation {\n                            id\n                        }\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        subtotalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        totalShippingPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Discounts applied ---\n                        discountApplications(first: 10) {\n                        edges {\n                            node {\n                            targetType        # ORDER or LINE_ITEM\n                            allocationMethod  # ACROSS / EACH / ONE\n                            value {\n                                __typename\n                                ... on PricingPercentageValue {\n                                percentage\n                                }\n                                ... on MoneyV2 {\n                                amount\n                                currencyCode\n                                }\n                            }\n                            ... on DiscountCodeApplication {\n                                code\n                            }\n                            ... on AutomaticDiscountApplication {\n                                title\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n                        \n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n                        shippingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n                        billingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n\n                        # --- Line Items with Discount Allocations ---\n                        lineItems(first: 50) {\n                        edges {\n                            node {\n                            id\n                            name\n                            quantity\n                            sku\n                            originalUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountedUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountAllocations {\n                                allocatedAmount {\n                                    amount\n                                    currencyCode\n                                }\n                                discountApplication {\n                                    __typename\n                                    ... on AutomaticDiscountApplication {\n                                        title\n                                    }\n                                    ... on DiscountCodeApplication {\n                                        code\n                                    }\n                                }\n                            }\n                            variant {\n                                id\n                                sku\n                                price\n                                compareAtPrice\n                                product {\n                                id\n                                title\n                                }\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Transactions (Gift cards show up here as gateway = "gift_card") ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson   # contains gift_card_id, last_characters etc if gift card used\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n\n            ', 'variables': {'first': 10, 'after': None, 'query': 'tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-10-01 13:24:05,272 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [{'node': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'createdAt': '2025-09-29T08:32:12Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '70074957890-1-1015', 'retailLocation': {'id': 'gid://shopify/Location/72407023682'}, 'totalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'firstName': 'Eman', 'lastName': 'Mohamed', 'email': 'test215@test.com', 'phone': '+201005552224', 'addresses': []}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072670904386', 'name': 'MM Watch - Blue', 'quantity': 1, 'sku': 'FG-0000715', 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42387257458754', 'sku': 'FG-0000715', 'price': '5000.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7527948386370', 'title': 'MM Watch'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072670937154', 'name': 'Iron Man Necklace - Blue', 'quantity': 1, 'sku': 'FG-0000714', 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072683290690', 'name': 'Gift Card', 'quantity': 1, 'sku': None, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': None}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217014566978', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'gift_card', 'amountSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:11Z', 'receiptJson': '{"gift_card_id":550425428034,"gift_card_last_characters":"bcah"}'}, {'id': 'gid://shopify/OrderTransaction/8217014730818', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '4998.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:24Z', 'receiptJson': '{}'}]}}], 'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo2NDIwNDQ2MTgzNDkwLCJsYXN0X3ZhbHVlIjoxNzU5MTM0NzMyMDAwfQ=='}}}, 'status': 'success'}
2025-10-01 13:24:05,273 - sync_service - INFO - Retrieved 1 unsynced orders (limited to 5 most recent) from Shopify store local
2025-10-01 13:24:05,273 - sync_service - INFO - Processing 1 orders from store local
2025-10-01 13:24:05,274 - sync_service - INFO - Processing order #1714 (ID: gid://shopify/Order/6420446183490)
2025-10-01 13:24:05,274 - sync_service - INFO - Found retail location ID for POS order: 72407023682
2025-10-01 13:24:05,274 - sync_service - INFO - Extracted POS receipt number: 1015
2025-10-01 13:24:05,274 - sync_service - INFO - Processing order: #1714 | Payment: PAID | Fulfillment: FULFILLED
2025-10-01 13:24:05,275 - sync_service - INFO - Payment Gateway: cash | Card Type: Unknown | Amount: 4998.5
2025-10-01 13:24:05,276 - sync_service - INFO -  GIFT CARDS USED: 1 cards, Total Amount: 10.0
2025-10-01 13:24:05,276 - sync_service - INFO -     Gift Card 1: bcah - 10.0 EGP
2025-10-01 13:24:05,276 - sync_service - INFO -  PAYMENT GATEWAYS USED: 1 gateways, Total Amount: 4998.5 EGP
2025-10-01 13:24:05,277 - sync_service - INFO -     Gateway 1: cash - 4998.5 EGP - Transaction ID: gid://shopify/OrderTransaction/8217014730818
2025-10-01 13:24:05,277 - sync_service - INFO -  SEARCHING CUSTOMER: Original phone: '+201005552224' -> Cleaned: '+201005552224'
2025-10-01 13:24:05,277 - sync_service - INFO -  SAP QUERY: Phone1 eq '+201005552224' or Phone2 eq '+201005552224' or Cellular eq '+201005552224'
2025-10-01 13:24:05,943 - sync_service - INFO - SAP login successful
2025-10-01 13:24:06,717 - sync_service - INFO -  CUSTOMER SEARCH RESULT: Found 1 customers
2025-10-01 13:24:06,717 - sync_service - INFO -  FOUND EXISTING CUSTOMER: C0021121 - Eman Mohamed
2025-10-01 13:24:06,718 - sync_service - INFO - Found existing customer: C0021121
2025-10-01 13:24:06,718 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000715', VariantSKU='fg-0000715', Name='mm watch - blue'
2025-10-01 13:24:06,719 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000714', VariantSKU='fg-0000714', Name='iron man necklace - blue'
2025-10-01 13:24:06,719 - sync_service - INFO - Checking line item for gift card: SKU='', VariantSKU='', Name='gift card'
2025-10-01 13:24:06,720 - sync_service - INFO - Found 1 gift card purchase(s) in order #1714
2025-10-01 13:24:06,721 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:24:06,721 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-10-01 13:24:07,177 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550437224514', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-30T06:59:36Z', 'expiresOn': '2026-09-30', 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'email': 'testawyyyy@test.com'}}}]}}, 'status': 'success'}
2025-10-01 13:24:07,177 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}
2025-10-01 13:24:07,178 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}
2025-10-01 13:24:07,178 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}
2025-10-01 13:24:07,179 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}
2025-10-01 13:24:07,179 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550437224514', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-30T06:59:36Z', 'expiresOn': '2026-09-30', 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'email': 'testawyyyy@test.com'}}}
2025-10-01 13:24:07,179 - sync_service - INFO - Found 1 gift cards for order 6420446183490
2025-10-01 13:24:07,180 - sync_service - INFO - Looking for gift card with unit price: 5000.0
2025-10-01 13:24:07,180 - sync_service - INFO - Available Shopify gift cards: [{'id': 'gid://shopify/GiftCard/550425493570', 'amount': 5000.0}]
2025-10-01 13:24:07,180 - sync_service - INFO - Checking gift card gid://shopify/GiftCard/550425493570 with amount 5000.0 against unit price 5000.0
2025-10-01 13:24:07,181 - sync_service - INFO -  Found matching gift card: gid://shopify/GiftCard/550425493570
2025-10-01 13:24:07,181 - sync_service - INFO - Preparing gift card data for invoice line: 550425493570 - Amount: 5000.0 - SKU: 
2025-10-01 13:24:07,181 - sync_service - INFO - Successfully created 1 gift card(s) in SAP
2025-10-01 13:24:07,181 - sync_service - INFO - Found retail location ID for POS order: 72407023682
2025-10-01 13:24:07,181 - sync_service - INFO - Extracted POS receipt number: 1015
2025-10-01 13:24:07,182 - sync_service - INFO - Using location-based costing codes for order #1714: {'COGSCostingCode': 'LakeTown', 'COGSCostingCode2': 'SAL', 'COGSCostingCode3': 'General', 'CostingCode': 'LakeTown', 'CostingCode2': 'SAL', 'CostingCode3': 'General', 'Warehouse': 'LTW'}
2025-10-01 13:24:07,182 - sync_service - INFO -  Pricing for FG-0000714: Original=10.00, Sale=8.50, Discount=15.0%
2025-10-01 13:24:07,182 - sync_service - INFO - Skipping gift card line item for POS refund: Gift Card - Amount: 5000.0
2025-10-01 13:24:07,183 - sync_service - INFO -  Processing 1 gift card redemption(s)
2025-10-01 13:24:07,183 - sync_service - INFO -  Created gift card expense: bcah - Amount: -10.0
2025-10-01 13:24:07,183 - sync_service - INFO - Added POS receipt number to invoice: 1015
2025-10-01 13:24:08,524 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-10-01 13:24:10,432 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-10-01 13:24:10,433 - sync_service - INFO - Created invoice in SAP: 23229
2025-10-01 13:24:10,433 - sync_service - INFO - Created invoice data: {'DocEntry': 23229, 'DocNum': 100018935, 'DocTotal': 4998.5, 'TransNum': 97115}
2025-10-01 13:24:12,234 - sync_service - INFO - Added tag 'sap_invoice_23229' to order gid://shopify/Order/6420446183490
2025-10-01 13:24:14,116 - sync_service - INFO - Added tag 'sap_invoice_synced' to order gid://shopify/Order/6420446183490
2025-10-01 13:24:14,117 - sync_service - INFO -  Invoice created and tagged for order #1714
2025-10-01 13:24:14,117 - sync_service - INFO - Order #1714 is paid - creating incoming payment in SAP
2025-10-01 13:24:14,117 - sync_service - INFO -  POS ORDER DETECTED - Processing multiple payment types
2025-10-01 13:24:14,118 - sync_service - INFO -  CASH TRANSACTION: 4998.5 EGP - Account: 10801248
2025-10-01 13:24:14,118 - sync_service - INFO -  POS PAYMENT SUMMARY: Total Calculated Amount: 4998.5 EGP
2025-10-01 13:24:15,074 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - failure
2025-10-01 13:24:15,075 - sync_service - ERROR - Failed to create incoming payment in SAP: HTTP 400: {
   "error" : {
      "code" : -4013,
      "message" : {
         "lang" : "en-us",
         "value" : "Posting period locked; specify an alternative date"
      }
   }
}

2025-10-01 13:24:15,075 - sync_service - WARNING - Failed to create incoming payment for #1714: HTTP 400: {
   "error" : {
      "code" : -4013,
      "message" : {
         "lang" : "en-us",
         "value" : "Posting period locked; specify an alternative date"
      }
   }
}

2025-10-01 13:24:16,866 - sync_service - INFO - Added tag 'sap_payment_failed' to order gid://shopify/Order/6420446183490
2025-10-01 13:24:16,867 - sync_service - INFO - Successfully processed order #1714
2025-10-01 13:24:16,867 - sync_service - INFO -  Processed order #1714 -> SAP Invoice: 23229
2025-10-01 13:24:16,867 - sync_service - INFO -     Gateway: cash | Amount: 4998.5
2025-10-01 13:24:16,868 - sync_service - INFO - Sync Event: {'sync_type': 'sales_orders', 'items_processed': 1, 'success_count': 1, 'error_count': 0, 'details': None}
2025-10-01 13:24:16,868 - sync_service - INFO - Orders sync completed. Processed: 1, Success: 1, Errors: 0
2025-10-01 13:24:16,868 - sync_service - INFO - Starting payment recovery sync...
2025-10-01 13:24:16,869 - sync_service - INFO - Starting payment recovery sync...
2025-10-01 13:24:16,869 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:24:16,870 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n\n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n\n                        # --- Transactions ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n            ', 'variables': {'first': 10, 'after': None, 'query': '(financial_status:paid OR financial_status:partially_refunded OR financial_status:refunded) AND tag:sap_invoice_synced AND -tag:sap_payment_synced AND -tag:sap_payment_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-10-01 13:24:17,322 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [], 'pageInfo': {'hasNextPage': False, 'endCursor': None}}}, 'status': 'success'}
2025-10-01 13:24:17,323 - sync_service - INFO - Retrieved 0 orders that need payment recovery from Shopify store local
2025-10-01 13:24:17,323 - sync_service - INFO - No orders need payment recovery for store local
2025-10-01 13:24:17,324 - sync_service - INFO - Sync Event: {'sync_type': 'payment_recovery', 'items_processed': 0, 'success_count': 0, 'error_count': 0, 'details': None}
2025-10-01 13:24:17,324 - sync_service - INFO - Payment recovery sync completed. Processed: 0, Success: 0, Skipped: 0, Errors: 0
2025-10-01 13:24:17,324 - sync_service - INFO - Starting returns sync...
2025-10-01 13:24:17,325 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:24:17,325 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n                query getOrders($first: Int!, $after: String, $query: String) {\n                    orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                        edges {\n                            node {\n                                id\n                                name\n                                createdAt\n                                displayFinancialStatus\n                                displayFulfillmentStatus\n                                returnStatus\n                                sourceName\n                                sourceIdentifier\n                                totalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                subtotalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                totalShippingPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                customer {\n                                    id\n                                    firstName\n                                    lastName\n                                    email\n                                    phone\n                                    addresses {\n                                        address1\n                                        address2\n                                        city\n                                        province\n                                        zip\n                                        country\n                                        phone\n                                    }\n                                }\n                                retailLocation {\n                                    id\n                                }\n                                metafields(first: 10) {\n                                    edges {\n                                        node {\n                                            namespace\n                                            key\n                                            value\n                                        }\n                                    }\n                                }\n                                tags\n                                shippingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                billingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                lineItems(first: 50) {\n                                    edges {\n                                        node {\n                                            id\n                                            name\n                                            quantity\n                                            sku\n                                            isGiftCard\n                                            currentQuantity\n                                            originalUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            discountedUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            variant {\n                                                id\n                                                sku\n                                                price\n                                                compareAtPrice\n                                                product {\n                                                    id\n                                                    title\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                                transactions(first: 10) {\n                                    id\n                                    kind\n                                    status\n                                    gateway\n                                    amountSet {\n                                        shopMoney {\n                                            amount\n                                            currencyCode\n                                        }\n                                    }\n                                    processedAt\n                                    receiptJson\n                                }\n                            }\n                        }\n                        pageInfo {\n                            hasNextPage\n                            endCursor\n                        }\n                    }\n                }\n                ', 'variables': {'first': 10, 'after': None, 'query': 'tag:returntest \n                    financial_status:refunded OR financial_status:partially_refunded OR return_status:RETURNED\n                    tag:sap_invoice_synced \n                    tag:sap_payment_synced \n                    -tag:sap_return_synced \n                    created_at:>=2025-09-01'}}, 'response': None, 'status': None}
2025-10-01 13:24:17,807 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [], 'pageInfo': {'hasNextPage': False, 'endCursor': None}}}, 'status': 'success'}
2025-10-01 13:42:48,819 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-10-01 13:42:48,866 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-10-01 13:42:48,867 - sync_service - INFO - Starting all syncs...
2025-10-01 13:42:48,868 - sync_service - INFO - Starting sales orders sync...
2025-10-01 13:42:48,868 - sync_service - INFO - Starting orders sync...
2025-10-01 13:42:48,869 - sync_service - INFO - Fetching orders with filter: tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10
2025-10-01 13:42:48,869 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:42:48,870 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: false, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n                        retailLocation {\n                            id\n                        }\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        subtotalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        totalShippingPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Discounts applied ---\n                        discountApplications(first: 10) {\n                        edges {\n                            node {\n                            targetType        # ORDER or LINE_ITEM\n                            allocationMethod  # ACROSS / EACH / ONE\n                            value {\n                                __typename\n                                ... on PricingPercentageValue {\n                                percentage\n                                }\n                                ... on MoneyV2 {\n                                amount\n                                currencyCode\n                                }\n                            }\n                            ... on DiscountCodeApplication {\n                                code\n                            }\n                            ... on AutomaticDiscountApplication {\n                                title\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n                        \n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n                        shippingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n                        billingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n\n                        # --- Line Items with Discount Allocations ---\n                        lineItems(first: 50) {\n                        edges {\n                            node {\n                            id\n                            name\n                            quantity\n                            sku\n                            originalUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountedUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountAllocations {\n                                allocatedAmount {\n                                    amount\n                                    currencyCode\n                                }\n                                discountApplication {\n                                    __typename\n                                    ... on AutomaticDiscountApplication {\n                                        title\n                                    }\n                                    ... on DiscountCodeApplication {\n                                        code\n                                    }\n                                }\n                            }\n                            variant {\n                                id\n                                sku\n                                price\n                                compareAtPrice\n                                product {\n                                id\n                                title\n                                }\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Transactions (Gift cards show up here as gateway = "gift_card") ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson   # contains gift_card_id, last_characters etc if gift card used\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n\n            ', 'variables': {'first': 10, 'after': None, 'query': 'tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-10-01 13:42:58,896 - sync_service - ERROR - GraphQL query error for store local: 
2025-10-01 13:42:59,597 - sync_service - INFO - SAP logging client login successful
2025-10-01 13:43:00,268 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-10-01 13:43:00,268 - sync_service - WARNING - GraphQL attempt 1/3 failed: GraphQL query error for store local: 
2025-10-01 13:43:00,269 - sync_service - INFO - Retrying in 2 seconds...
2025-10-01 13:43:02,278 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:43:02,278 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: false, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n                        retailLocation {\n                            id\n                        }\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        subtotalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        totalShippingPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Discounts applied ---\n                        discountApplications(first: 10) {\n                        edges {\n                            node {\n                            targetType        # ORDER or LINE_ITEM\n                            allocationMethod  # ACROSS / EACH / ONE\n                            value {\n                                __typename\n                                ... on PricingPercentageValue {\n                                percentage\n                                }\n                                ... on MoneyV2 {\n                                amount\n                                currencyCode\n                                }\n                            }\n                            ... on DiscountCodeApplication {\n                                code\n                            }\n                            ... on AutomaticDiscountApplication {\n                                title\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n                        \n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n                        shippingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n                        billingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n\n                        # --- Line Items with Discount Allocations ---\n                        lineItems(first: 50) {\n                        edges {\n                            node {\n                            id\n                            name\n                            quantity\n                            sku\n                            originalUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountedUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountAllocations {\n                                allocatedAmount {\n                                    amount\n                                    currencyCode\n                                }\n                                discountApplication {\n                                    __typename\n                                    ... on AutomaticDiscountApplication {\n                                        title\n                                    }\n                                    ... on DiscountCodeApplication {\n                                        code\n                                    }\n                                }\n                            }\n                            variant {\n                                id\n                                sku\n                                price\n                                compareAtPrice\n                                product {\n                                id\n                                title\n                                }\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Transactions (Gift cards show up here as gateway = "gift_card") ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson   # contains gift_card_id, last_characters etc if gift card used\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n\n            ', 'variables': {'first': 10, 'after': None, 'query': 'tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-10-01 13:43:02,872 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [{'node': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'createdAt': '2025-09-29T08:32:12Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '70074957890-1-1015', 'retailLocation': {'id': 'gid://shopify/Location/72407023682'}, 'totalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'discountApplications': {'edges': []}, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'firstName': 'Eman', 'lastName': 'Mohamed', 'email': 'test215@test.com', 'phone': '+201005552224', 'addresses': []}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072670904386', 'name': 'MM Watch - Blue', 'quantity': 1, 'sku': 'FG-0000715', 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42387257458754', 'sku': 'FG-0000715', 'price': '5000.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7527948386370', 'title': 'MM Watch'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072670937154', 'name': 'Iron Man Necklace - Blue', 'quantity': 1, 'sku': 'FG-0000714', 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072683290690', 'name': 'Gift Card', 'quantity': 1, 'sku': None, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountAllocations': [], 'variant': None}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217014566978', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'gift_card', 'amountSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:11Z', 'receiptJson': '{"gift_card_id":550425428034,"gift_card_last_characters":"bcah"}'}, {'id': 'gid://shopify/OrderTransaction/8217014730818', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '4998.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:24Z', 'receiptJson': '{}'}]}}], 'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo2NDIwNDQ2MTgzNDkwLCJsYXN0X3ZhbHVlIjoxNzU5MTM0NzMyMDAwfQ=='}}}, 'status': 'success'}
2025-10-01 13:43:02,873 - sync_service - INFO - Retrieved 1 unsynced orders (limited to 5 most recent) from Shopify store local
2025-10-01 13:43:02,873 - sync_service - INFO - Processing 1 orders from store local
2025-10-01 13:43:02,874 - sync_service - INFO - Processing order #1714 (ID: gid://shopify/Order/6420446183490)
2025-10-01 13:43:02,874 - sync_service - INFO - Found retail location ID for POS order: 72407023682
2025-10-01 13:43:02,874 - sync_service - INFO - Extracted POS receipt number: 1015
2025-10-01 13:43:02,875 - sync_service - INFO - Processing order: #1714 | Payment: PAID | Fulfillment: FULFILLED
2025-10-01 13:43:02,876 - sync_service - INFO - Payment Gateway: cash | Card Type: Unknown | Amount: 4998.5
2025-10-01 13:43:02,876 - sync_service - INFO -  GIFT CARDS USED: 1 cards, Total Amount: 10.0
2025-10-01 13:43:02,876 - sync_service - INFO -     Gift Card 1: bcah - 10.0 EGP
2025-10-01 13:43:02,876 - sync_service - INFO -  PAYMENT GATEWAYS USED: 1 gateways, Total Amount: 4998.5 EGP
2025-10-01 13:43:02,877 - sync_service - INFO -     Gateway 1: cash - 4998.5 EGP - Transaction ID: gid://shopify/OrderTransaction/8217014730818
2025-10-01 13:43:02,877 - sync_service - INFO -  SEARCHING CUSTOMER: Original phone: '+201005552224' -> Cleaned: '+201005552224'
2025-10-01 13:43:02,877 - sync_service - INFO -  SAP QUERY: Phone1 eq '+201005552224' or Phone2 eq '+201005552224' or Cellular eq '+201005552224'
2025-10-01 13:43:03,585 - sync_service - INFO - SAP login successful
2025-10-01 13:43:04,345 - sync_service - INFO -  CUSTOMER SEARCH RESULT: Found 1 customers
2025-10-01 13:43:04,345 - sync_service - INFO -  FOUND EXISTING CUSTOMER: C0021121 - Eman Mohamed
2025-10-01 13:43:04,345 - sync_service - INFO - Found existing customer: C0021121
2025-10-01 13:43:04,346 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000715', VariantSKU='fg-0000715', Name='mm watch - blue'
2025-10-01 13:43:04,346 - sync_service - INFO - Checking line item for gift card: SKU='fg-0000714', VariantSKU='fg-0000714', Name='iron man necklace - blue'
2025-10-01 13:43:04,346 - sync_service - INFO - Checking line item for gift card: SKU='', VariantSKU='', Name='gift card'
2025-10-01 13:43:04,347 - sync_service - INFO - Found 1 gift card purchase(s) in order #1714
2025-10-01 13:43:04,347 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:43:04,348 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-10-01 13:43:04,772 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550437224514', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-30T06:59:36Z', 'expiresOn': '2026-09-30', 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'email': 'testawyyyy@test.com'}}}]}}, 'status': 'success'}
2025-10-01 13:43:04,773 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}
2025-10-01 13:43:04,773 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}
2025-10-01 13:43:04,774 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}
2025-10-01 13:43:04,774 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}
2025-10-01 13:43:04,775 - sync_service - ERROR - Error processing gift card edge: 'NoneType' object has no attribute 'get' - Edge: {'node': {'id': 'gid://shopify/GiftCard/550437224514', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-30T06:59:36Z', 'expiresOn': '2026-09-30', 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'email': 'testawyyyy@test.com'}}}
2025-10-01 13:43:04,776 - sync_service - INFO - Found 1 gift cards for order 6420446183490
2025-10-01 13:43:04,776 - sync_service - INFO - Looking for gift card with unit price: 5000.0
2025-10-01 13:43:04,777 - sync_service - INFO - Available Shopify gift cards: [{'id': 'gid://shopify/GiftCard/550425493570', 'amount': 5000.0}]
2025-10-01 13:43:04,777 - sync_service - INFO - Checking gift card gid://shopify/GiftCard/550425493570 with amount 5000.0 against unit price 5000.0
2025-10-01 13:43:04,778 - sync_service - INFO -  Found matching gift card: gid://shopify/GiftCard/550425493570
2025-10-01 13:43:04,778 - sync_service - INFO - Preparing gift card data for invoice line: 550425493570 - Amount: 5000.0 - SKU: 
2025-10-01 13:43:04,778 - sync_service - INFO - Successfully created 1 gift card(s) in SAP
2025-10-01 13:43:04,779 - sync_service - INFO - Found retail location ID for POS order: 72407023682
2025-10-01 13:43:04,779 - sync_service - INFO - Extracted POS receipt number: 1015
2025-10-01 13:43:04,780 - sync_service - INFO - Using location-based costing codes for order #1714: {'COGSCostingCode': 'LakeTown', 'COGSCostingCode2': 'SAL', 'COGSCostingCode3': 'General', 'CostingCode': 'LakeTown', 'CostingCode2': 'SAL', 'CostingCode3': 'General', 'Warehouse': 'LTW'}
2025-10-01 13:43:04,781 - sync_service - INFO -  Pricing for FG-0000714: Original=10.00, Sale=8.50, Discount=15.0%
2025-10-01 13:43:04,781 - sync_service - INFO - Skipping gift card line item for POS refund: Gift Card - Amount: 5000.0
2025-10-01 13:43:04,781 - sync_service - INFO -  Processing 1 gift card redemption(s)
2025-10-01 13:43:04,781 - sync_service - INFO -  Created gift card expense: bcah - Amount: -10.0
2025-10-01 13:43:04,782 - sync_service - INFO - Added POS receipt number to invoice: 1015
2025-10-01 13:43:06,150 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-10-01 13:43:07,900 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-10-01 13:43:07,901 - sync_service - INFO - Created invoice in SAP: 23230
2025-10-01 13:43:07,901 - sync_service - INFO - Created invoice data: {'DocEntry': 23230, 'DocNum': 100018936, 'DocTotal': 4998.5, 'TransNum': 97116, 'DocDate': '2025-09-29'}
2025-10-01 13:43:09,677 - sync_service - INFO - Added tag 'sap_invoice_23230' to order gid://shopify/Order/6420446183490
2025-10-01 13:43:11,309 - sync_service - INFO - Added tag 'sap_invoice_synced' to order gid://shopify/Order/6420446183490
2025-10-01 13:43:11,310 - sync_service - INFO -  Invoice created and tagged for order #1714
2025-10-01 13:43:11,310 - sync_service - INFO - Order #1714 is paid - creating incoming payment in SAP
2025-10-01 13:43:11,310 - sync_service - INFO -  POS ORDER DETECTED - Processing multiple payment types
2025-10-01 13:43:11,311 - sync_service - INFO -  CASH TRANSACTION: 4998.5 EGP - Account: 10801248
2025-10-01 13:43:11,311 - sync_service - INFO -  POS PAYMENT SUMMARY: Total Calculated Amount: 4998.5 EGP
2025-10-01 13:43:12,526 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-10-01 13:43:12,527 - sync_service - INFO - Created incoming payment in SAP: 22402
2025-10-01 13:43:12,527 - sync_service - INFO - Successfully created incoming payment: 22402
2025-10-01 13:43:20,778 - sync_service - INFO - Added tag 'sap_payment_22402' to order gid://shopify/Order/6420446183490
2025-10-01 13:43:22,478 - sync_service - INFO - Added tag 'sap_payment_synced' to order gid://shopify/Order/6420446183490
2025-10-01 13:43:22,478 - sync_service - INFO - Successfully processed order #1714
2025-10-01 13:43:22,479 - sync_service - INFO -  Processed order #1714 -> SAP Invoice: 23230
2025-10-01 13:43:22,479 - sync_service - INFO -     Gateway: cash | Amount: 4998.5
2025-10-01 13:43:22,479 - sync_service - INFO - Sync Event: {'sync_type': 'sales_orders', 'items_processed': 1, 'success_count': 1, 'error_count': 0, 'details': None}
2025-10-01 13:43:22,480 - sync_service - INFO - Orders sync completed. Processed: 1, Success: 1, Errors: 0
2025-10-01 13:43:22,480 - sync_service - INFO - Starting payment recovery sync...
2025-10-01 13:43:22,480 - sync_service - INFO - Starting payment recovery sync...
2025-10-01 13:43:22,480 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:43:22,481 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n\n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n\n                        # --- Transactions ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n            ', 'variables': {'first': 10, 'after': None, 'query': '(financial_status:paid OR financial_status:partially_refunded OR financial_status:refunded) AND tag:sap_invoice_synced AND -tag:sap_payment_synced AND -tag:sap_payment_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-10-01 13:43:22,950 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [{'node': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'createdAt': '2025-09-29T08:32:12Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'sourceName': 'pos', 'sourceIdentifier': '70074957890-1-1015', 'totalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'firstName': 'Eman', 'lastName': 'Mohamed', 'email': 'test215@test.com', 'phone': '+201005552224', 'addresses': []}, 'retailLocation': {'id': 'gid://shopify/Location/72407023682'}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced'], 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217014566978', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'gift_card', 'amountSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:11Z', 'receiptJson': '{"gift_card_id":550425428034,"gift_card_last_characters":"bcah"}'}, {'id': 'gid://shopify/OrderTransaction/8217014730818', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '4998.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:24Z', 'receiptJson': '{}'}]}}], 'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo2NDIwNDQ2MTgzNDkwLCJsYXN0X3ZhbHVlIjoxNzU5MTM0NzMyMDAwfQ=='}}}, 'status': 'success'}
2025-10-01 13:43:22,951 - sync_service - INFO - Retrieved 1 orders that need payment recovery from Shopify store local
2025-10-01 13:43:22,952 - sync_service - INFO - Processing 1 orders for payment recovery from store local
2025-10-01 13:43:22,953 - sync_service - INFO - Processing payment recovery for order #1714 (ID: gid://shopify/Order/6420446183490)
2025-10-01 13:43:22,953 - sync_service - INFO - Found retail location ID for POS order: 72407023682
2025-10-01 13:43:22,954 - sync_service - INFO - Extracted POS receipt number: 1015
2025-10-01 13:43:22,955 - sync_service - INFO - Processing payment recovery for order: #1714 | Payment: PAID | Fulfillment: FULFILLED
2025-10-01 13:43:22,955 - sync_service - INFO - Found SAP invoice DocEntry: 23230 for order #1714
2025-10-01 13:43:24,235 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-10-01 13:43:24,236 - sync_service - INFO - Found SAP invoice DocEntry: 23230
2025-10-01 13:43:24,236 - sync_service - INFO - Found SAP invoice DocEntry: 23230 for order #1714
2025-10-01 13:43:25,176 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-10-01 13:43:25,177 - sync_service - INFO - Payment for order 6420446183490 already exists in SAP with DocEntry: 22402
2025-10-01 13:43:25,177 - sync_service - INFO - Payment for order #1714 already exists in SAP with DocEntry: 22402
2025-10-01 13:43:30,201 - sync_service - WARNING - Error adding tag to order gid://shopify/Order/6420446183490, attempt 1/3: 
2025-10-01 13:43:33,466 - sync_service - INFO - Added tag 'sap_payment_22402' to order gid://shopify/Order/6420446183490
2025-10-01 13:43:34,465 - sync_service - INFO - Added tag 'sap_payment_synced' to order gid://shopify/Order/6420446183490
2025-10-01 13:43:34,466 - sync_service - INFO -  Skipped order #1714 - Payment already exists in SAP
2025-10-01 13:43:34,467 - sync_service - INFO - Sync Event: {'sync_type': 'payment_recovery', 'items_processed': 1, 'success_count': 0, 'error_count': 0, 'details': None}
2025-10-01 13:43:34,467 - sync_service - INFO - Payment recovery sync completed. Processed: 1, Success: 0, Skipped: 1, Errors: 0
2025-10-01 13:43:34,467 - sync_service - INFO - Starting returns sync...
2025-10-01 13:43:34,467 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:43:34,468 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n                query getOrders($first: Int!, $after: String, $query: String) {\n                    orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                        edges {\n                            node {\n                                id\n                                name\n                                createdAt\n                                displayFinancialStatus\n                                displayFulfillmentStatus\n                                returnStatus\n                                sourceName\n                                sourceIdentifier\n                                totalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                subtotalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                totalShippingPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                customer {\n                                    id\n                                    firstName\n                                    lastName\n                                    email\n                                    phone\n                                    addresses {\n                                        address1\n                                        address2\n                                        city\n                                        province\n                                        zip\n                                        country\n                                        phone\n                                    }\n                                }\n                                retailLocation {\n                                    id\n                                }\n                                metafields(first: 10) {\n                                    edges {\n                                        node {\n                                            namespace\n                                            key\n                                            value\n                                        }\n                                    }\n                                }\n                                tags\n                                shippingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                billingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                lineItems(first: 50) {\n                                    edges {\n                                        node {\n                                            id\n                                            name\n                                            quantity\n                                            sku\n                                            isGiftCard\n                                            currentQuantity\n                                            originalUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            discountedUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            variant {\n                                                id\n                                                sku\n                                                price\n                                                compareAtPrice\n                                                product {\n                                                    id\n                                                    title\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                                transactions(first: 10) {\n                                    id\n                                    kind\n                                    status\n                                    gateway\n                                    amountSet {\n                                        shopMoney {\n                                            amount\n                                            currencyCode\n                                        }\n                                    }\n                                    processedAt\n                                    receiptJson\n                                }\n                            }\n                        }\n                        pageInfo {\n                            hasNextPage\n                            endCursor\n                        }\n                    }\n                }\n                ', 'variables': {'first': 10, 'after': None, 'query': 'tag:returntest \n                    financial_status:refunded OR financial_status:partially_refunded OR return_status:RETURNED\n                    tag:sap_invoice_synced \n                    tag:sap_payment_synced \n                    -tag:sap_return_synced \n                    created_at:>=2025-09-01'}}, 'response': None, 'status': None}
2025-10-01 13:43:36,762 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [{'node': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'createdAt': '2025-09-29T08:32:12Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'returnStatus': 'RETURNED', 'sourceName': 'pos', 'sourceIdentifier': '70074957890-1-1015', 'totalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'firstName': 'Eman', 'lastName': 'Mohamed', 'email': 'test215@test.com', 'phone': '+201005552224', 'addresses': []}, 'retailLocation': {'id': 'gid://shopify/Location/72407023682'}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072670904386', 'name': 'MM Watch - Blue', 'quantity': 1, 'sku': 'FG-0000715', 'isGiftCard': False, 'currentQuantity': 0, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': {'id': 'gid://shopify/ProductVariant/42387257458754', 'sku': 'FG-0000715', 'price': '5000.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7527948386370', 'title': 'MM Watch'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072670937154', 'name': 'Iron Man Necklace - Blue', 'quantity': 1, 'sku': 'FG-0000714', 'isGiftCard': False, 'currentQuantity': 1, 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072683290690', 'name': 'Gift Card', 'quantity': 1, 'sku': None, 'isGiftCard': True, 'currentQuantity': 1, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': None}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217014566978', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'gift_card', 'amountSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:11Z', 'receiptJson': '{"gift_card_id":550425428034,"gift_card_last_characters":"bcah"}'}, {'id': 'gid://shopify/OrderTransaction/8217014730818', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '4998.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:24Z', 'receiptJson': '{}'}]}}], 'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo2NDIwNDQ2MTgzNDkwLCJsYXN0X3ZhbHVlIjoxNzU5MTM0NzMyMDAwfQ=='}}}, 'status': 'success'}
2025-10-01 13:43:36,766 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:43:36,767 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-10-01 13:43:37,233 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550437224514', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-30T06:59:36Z', 'expiresOn': '2026-09-30', 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'email': 'testawyyyy@test.com'}}}]}}, 'status': 'success'}
2025-10-01 13:43:37,932 - sync_service - INFO - SAP login successful
2025-10-01 13:43:39,534 - sync_service - INFO - API log added to SAP: sap - IncomingPayments(22402) - success
2025-10-01 13:43:40,721 - sync_service - INFO - API log added to SAP: sap - IncomingPayments(22402)/Cancel - success
2025-10-01 13:43:41,612 - sync_service - INFO - API log added to SAP: sap - Invoices(23230) - success
2025-10-01 13:43:43,137 - sync_service - INFO - API log added to SAP: sap - Invoices(23230)/Cancel - success
2025-10-01 13:43:44,868 - sync_service - INFO - API log added to SAP: sap - Invoices - failure
2025-10-01 13:43:44,869 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:43:44,870 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-10-01 13:43:45,281 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced']}}, 'status': 'success'}
2025-10-01 13:43:45,281 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:43:45,282 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced', 'sap_giftcard_invoice_failed']}}}, 'response': None, 'status': None}
2025-10-01 13:43:45,762 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_failed', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-10-01 13:51:16,395 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-10-01 13:51:16,449 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-10-01 13:51:16,453 - sync_service - INFO - Starting all syncs...
2025-10-01 13:51:16,453 - sync_service - INFO - Starting sales orders sync...
2025-10-01 13:51:16,454 - sync_service - INFO - Starting orders sync...
2025-10-01 13:51:16,455 - sync_service - INFO - Fetching orders with filter: tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10
2025-10-01 13:51:16,455 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:51:16,456 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: false, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n                        retailLocation {\n                            id\n                        }\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        subtotalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        totalShippingPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Discounts applied ---\n                        discountApplications(first: 10) {\n                        edges {\n                            node {\n                            targetType        # ORDER or LINE_ITEM\n                            allocationMethod  # ACROSS / EACH / ONE\n                            value {\n                                __typename\n                                ... on PricingPercentageValue {\n                                percentage\n                                }\n                                ... on MoneyV2 {\n                                amount\n                                currencyCode\n                                }\n                            }\n                            ... on DiscountCodeApplication {\n                                code\n                            }\n                            ... on AutomaticDiscountApplication {\n                                title\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n                        \n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n                        shippingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n                        billingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n\n                        # --- Line Items with Discount Allocations ---\n                        lineItems(first: 50) {\n                        edges {\n                            node {\n                            id\n                            name\n                            quantity\n                            sku\n                            originalUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountedUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountAllocations {\n                                allocatedAmount {\n                                    amount\n                                    currencyCode\n                                }\n                                discountApplication {\n                                    __typename\n                                    ... on AutomaticDiscountApplication {\n                                        title\n                                    }\n                                    ... on DiscountCodeApplication {\n                                        code\n                                    }\n                                }\n                            }\n                            variant {\n                                id\n                                sku\n                                price\n                                compareAtPrice\n                                product {\n                                id\n                                title\n                                }\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Transactions (Gift cards show up here as gateway = "gift_card") ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson   # contains gift_card_id, last_characters etc if gift card used\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n\n            ', 'variables': {'first': 10, 'after': None, 'query': 'tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-10-01 13:51:16,943 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [], 'pageInfo': {'hasNextPage': False, 'endCursor': None}}}, 'status': 'success'}
2025-10-01 13:51:16,946 - sync_service - INFO - Retrieved 0 unsynced orders (limited to 5 most recent) from Shopify store local
2025-10-01 13:51:16,947 - sync_service - INFO - No orders to process for store local
2025-10-01 13:51:16,952 - sync_service - INFO - Sync Event: {'sync_type': 'sales_orders', 'items_processed': 0, 'success_count': 0, 'error_count': 0, 'details': None}
2025-10-01 13:51:16,953 - sync_service - INFO - Orders sync completed. Processed: 0, Success: 0, Errors: 0
2025-10-01 13:51:16,955 - sync_service - INFO - Starting payment recovery sync...
2025-10-01 13:51:16,958 - sync_service - INFO - Starting payment recovery sync...
2025-10-01 13:51:16,963 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:51:16,967 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n\n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n\n                        # --- Transactions ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n            ', 'variables': {'first': 10, 'after': None, 'query': '(financial_status:paid OR financial_status:partially_refunded OR financial_status:refunded) tag:sap_invoice_synced -tag:sap_payment_synced -tag:sap_payment_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-10-01 13:51:17,461 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [], 'pageInfo': {'hasNextPage': False, 'endCursor': None}}}, 'status': 'success'}
2025-10-01 13:51:17,461 - sync_service - INFO - Retrieved 0 orders that need payment recovery from Shopify store local
2025-10-01 13:51:17,462 - sync_service - INFO - No orders need payment recovery for store local
2025-10-01 13:51:17,463 - sync_service - INFO - Sync Event: {'sync_type': 'payment_recovery', 'items_processed': 0, 'success_count': 0, 'error_count': 0, 'details': None}
2025-10-01 13:51:17,463 - sync_service - INFO - Payment recovery sync completed. Processed: 0, Success: 0, Skipped: 0, Errors: 0
2025-10-01 13:51:17,464 - sync_service - INFO - Starting returns sync...
2025-10-01 13:51:17,465 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:51:17,466 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n                query getOrders($first: Int!, $after: String, $query: String) {\n                    orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                        edges {\n                            node {\n                                id\n                                name\n                                createdAt\n                                displayFinancialStatus\n                                displayFulfillmentStatus\n                                returnStatus\n                                sourceName\n                                sourceIdentifier\n                                totalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                subtotalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                totalShippingPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                customer {\n                                    id\n                                    firstName\n                                    lastName\n                                    email\n                                    phone\n                                    addresses {\n                                        address1\n                                        address2\n                                        city\n                                        province\n                                        zip\n                                        country\n                                        phone\n                                    }\n                                }\n                                retailLocation {\n                                    id\n                                }\n                                metafields(first: 10) {\n                                    edges {\n                                        node {\n                                            namespace\n                                            key\n                                            value\n                                        }\n                                    }\n                                }\n                                tags\n                                shippingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                billingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                lineItems(first: 50) {\n                                    edges {\n                                        node {\n                                            id\n                                            name\n                                            quantity\n                                            sku\n                                            isGiftCard\n                                            currentQuantity\n                                            originalUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            discountedUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            variant {\n                                                id\n                                                sku\n                                                price\n                                                compareAtPrice\n                                                product {\n                                                    id\n                                                    title\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                                transactions(first: 10) {\n                                    id\n                                    kind\n                                    status\n                                    gateway\n                                    amountSet {\n                                        shopMoney {\n                                            amount\n                                            currencyCode\n                                        }\n                                    }\n                                    processedAt\n                                    receiptJson\n                                }\n                            }\n                        }\n                        pageInfo {\n                            hasNextPage\n                            endCursor\n                        }\n                    }\n                }\n                ', 'variables': {'first': 10, 'after': None, 'query': 'tag:returntest \n                    financial_status:refunded OR financial_status:partially_refunded OR return_status:RETURNED\n                    tag:sap_invoice_synced \n                    tag:sap_payment_synced \n                    -tag:sap_return_synced \n                    created_at:>=2025-09-01'}}, 'response': None, 'status': None}
2025-10-01 13:51:27,480 - sync_service - ERROR - GraphQL query error for store local: 
2025-10-01 13:51:28,212 - sync_service - INFO - SAP logging client login successful
2025-10-01 13:51:28,905 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-10-01 13:51:30,913 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:51:30,914 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n                query getOrders($first: Int!, $after: String, $query: String) {\n                    orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                        edges {\n                            node {\n                                id\n                                name\n                                createdAt\n                                displayFinancialStatus\n                                displayFulfillmentStatus\n                                returnStatus\n                                sourceName\n                                sourceIdentifier\n                                totalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                subtotalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                totalShippingPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                customer {\n                                    id\n                                    firstName\n                                    lastName\n                                    email\n                                    phone\n                                    addresses {\n                                        address1\n                                        address2\n                                        city\n                                        province\n                                        zip\n                                        country\n                                        phone\n                                    }\n                                }\n                                retailLocation {\n                                    id\n                                }\n                                metafields(first: 10) {\n                                    edges {\n                                        node {\n                                            namespace\n                                            key\n                                            value\n                                        }\n                                    }\n                                }\n                                tags\n                                shippingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                billingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                lineItems(first: 50) {\n                                    edges {\n                                        node {\n                                            id\n                                            name\n                                            quantity\n                                            sku\n                                            isGiftCard\n                                            currentQuantity\n                                            originalUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            discountedUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            variant {\n                                                id\n                                                sku\n                                                price\n                                                compareAtPrice\n                                                product {\n                                                    id\n                                                    title\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                                transactions(first: 10) {\n                                    id\n                                    kind\n                                    status\n                                    gateway\n                                    amountSet {\n                                        shopMoney {\n                                            amount\n                                            currencyCode\n                                        }\n                                    }\n                                    processedAt\n                                    receiptJson\n                                }\n                            }\n                        }\n                        pageInfo {\n                            hasNextPage\n                            endCursor\n                        }\n                    }\n                }\n                ', 'variables': {'first': 10, 'after': None, 'query': 'tag:returntest \n                    financial_status:refunded OR financial_status:partially_refunded OR return_status:RETURNED\n                    tag:sap_invoice_synced \n                    tag:sap_payment_synced \n                    -tag:sap_return_synced \n                    created_at:>=2025-09-01'}}, 'response': None, 'status': None}
2025-10-01 13:51:31,450 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [{'node': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'createdAt': '2025-09-29T08:32:12Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'returnStatus': 'RETURNED', 'sourceName': 'pos', 'sourceIdentifier': '70074957890-1-1015', 'totalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'firstName': 'Eman', 'lastName': 'Mohamed', 'email': 'test215@test.com', 'phone': '+201005552224', 'addresses': []}, 'retailLocation': {'id': 'gid://shopify/Location/72407023682'}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072670904386', 'name': 'MM Watch - Blue', 'quantity': 1, 'sku': 'FG-0000715', 'isGiftCard': False, 'currentQuantity': 0, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': {'id': 'gid://shopify/ProductVariant/42387257458754', 'sku': 'FG-0000715', 'price': '5000.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7527948386370', 'title': 'MM Watch'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072670937154', 'name': 'Iron Man Necklace - Blue', 'quantity': 1, 'sku': 'FG-0000714', 'isGiftCard': False, 'currentQuantity': 1, 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072683290690', 'name': 'Gift Card', 'quantity': 1, 'sku': None, 'isGiftCard': True, 'currentQuantity': 1, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': None}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217014566978', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'gift_card', 'amountSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:11Z', 'receiptJson': '{"gift_card_id":550425428034,"gift_card_last_characters":"bcah"}'}, {'id': 'gid://shopify/OrderTransaction/8217014730818', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '4998.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:24Z', 'receiptJson': '{}'}]}}], 'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo2NDIwNDQ2MTgzNDkwLCJsYXN0X3ZhbHVlIjoxNzU5MTM0NzMyMDAwfQ=='}}}, 'status': 'success'}
2025-10-01 13:51:31,451 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:51:31,451 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-10-01 13:51:31,902 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550437224514', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-30T06:59:36Z', 'expiresOn': '2026-09-30', 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'email': 'testawyyyy@test.com'}}}]}}, 'status': 'success'}
2025-10-01 13:51:32,574 - sync_service - INFO - SAP login successful
2025-10-01 13:51:33,896 - sync_service - INFO - API log added to SAP: sap - IncomingPayments(22402) - success
2025-10-01 13:51:35,196 - sync_service - INFO - API log added to SAP: sap - Invoices(23230) - success
2025-10-01 13:51:36,618 - sync_service - INFO - API log added to SAP: sap - Invoices - failure
2025-10-01 13:51:36,619 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:51:36,620 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-10-01 13:51:46,634 - sync_service - ERROR - GraphQL query error for store local: 
2025-10-01 13:51:46,900 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-10-01 13:51:47,917 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:51:47,918 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-10-01 13:51:57,920 - sync_service - ERROR - GraphQL query error for store local: 
2025-10-01 13:51:58,188 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-10-01 13:52:00,199 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:52:00,199 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-10-01 13:52:00,624 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced']}}, 'status': 'success'}
2025-10-01 13:52:00,625 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:52:00,625 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced', 'sap_giftcard_invoice_failed']}}}, 'response': None, 'status': None}
2025-10-01 13:52:01,198 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_failed', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-10-01 13:55:36,223 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-10-01 13:55:36,270 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-10-01 13:55:36,273 - sync_service - INFO - Starting all syncs...
2025-10-01 13:55:36,275 - sync_service - INFO - Starting sales orders sync...
2025-10-01 13:55:36,280 - sync_service - INFO - Starting orders sync...
2025-10-01 13:55:36,283 - sync_service - INFO - Fetching orders with filter: tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10
2025-10-01 13:55:36,284 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:55:36,285 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: false, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n                        retailLocation {\n                            id\n                        }\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        subtotalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        totalShippingPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Discounts applied ---\n                        discountApplications(first: 10) {\n                        edges {\n                            node {\n                            targetType        # ORDER or LINE_ITEM\n                            allocationMethod  # ACROSS / EACH / ONE\n                            value {\n                                __typename\n                                ... on PricingPercentageValue {\n                                percentage\n                                }\n                                ... on MoneyV2 {\n                                amount\n                                currencyCode\n                                }\n                            }\n                            ... on DiscountCodeApplication {\n                                code\n                            }\n                            ... on AutomaticDiscountApplication {\n                                title\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n                        \n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n                        shippingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n                        billingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n\n                        # --- Line Items with Discount Allocations ---\n                        lineItems(first: 50) {\n                        edges {\n                            node {\n                            id\n                            name\n                            quantity\n                            sku\n                            originalUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountedUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountAllocations {\n                                allocatedAmount {\n                                    amount\n                                    currencyCode\n                                }\n                                discountApplication {\n                                    __typename\n                                    ... on AutomaticDiscountApplication {\n                                        title\n                                    }\n                                    ... on DiscountCodeApplication {\n                                        code\n                                    }\n                                }\n                            }\n                            variant {\n                                id\n                                sku\n                                price\n                                compareAtPrice\n                                product {\n                                id\n                                title\n                                }\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Transactions (Gift cards show up here as gateway = "gift_card") ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson   # contains gift_card_id, last_characters etc if gift card used\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n\n            ', 'variables': {'first': 10, 'after': None, 'query': 'tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-10-01 13:55:46,333 - sync_service - ERROR - GraphQL query error for store local: 
2025-10-01 13:55:47,037 - sync_service - INFO - SAP logging client login successful
2025-10-01 13:55:47,685 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-10-01 13:55:47,686 - sync_service - WARNING - GraphQL attempt 1/3 failed: GraphQL query error for store local: 
2025-10-01 13:55:47,686 - sync_service - INFO - Retrying in 2 seconds...
2025-10-01 13:55:49,703 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:55:49,703 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: false, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n                        retailLocation {\n                            id\n                        }\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        subtotalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        totalShippingPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Discounts applied ---\n                        discountApplications(first: 10) {\n                        edges {\n                            node {\n                            targetType        # ORDER or LINE_ITEM\n                            allocationMethod  # ACROSS / EACH / ONE\n                            value {\n                                __typename\n                                ... on PricingPercentageValue {\n                                percentage\n                                }\n                                ... on MoneyV2 {\n                                amount\n                                currencyCode\n                                }\n                            }\n                            ... on DiscountCodeApplication {\n                                code\n                            }\n                            ... on AutomaticDiscountApplication {\n                                title\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n                        \n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n                        shippingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n                        billingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n\n                        # --- Line Items with Discount Allocations ---\n                        lineItems(first: 50) {\n                        edges {\n                            node {\n                            id\n                            name\n                            quantity\n                            sku\n                            originalUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountedUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountAllocations {\n                                allocatedAmount {\n                                    amount\n                                    currencyCode\n                                }\n                                discountApplication {\n                                    __typename\n                                    ... on AutomaticDiscountApplication {\n                                        title\n                                    }\n                                    ... on DiscountCodeApplication {\n                                        code\n                                    }\n                                }\n                            }\n                            variant {\n                                id\n                                sku\n                                price\n                                compareAtPrice\n                                product {\n                                id\n                                title\n                                }\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Transactions (Gift cards show up here as gateway = "gift_card") ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson   # contains gift_card_id, last_characters etc if gift card used\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n\n            ', 'variables': {'first': 10, 'after': None, 'query': 'tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-10-01 13:55:50,181 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [], 'pageInfo': {'hasNextPage': False, 'endCursor': None}}}, 'status': 'success'}
2025-10-01 13:55:50,182 - sync_service - INFO - Retrieved 0 unsynced orders (limited to 5 most recent) from Shopify store local
2025-10-01 13:55:50,182 - sync_service - INFO - No orders to process for store local
2025-10-01 13:55:50,183 - sync_service - INFO - Sync Event: {'sync_type': 'sales_orders', 'items_processed': 0, 'success_count': 0, 'error_count': 0, 'details': None}
2025-10-01 13:55:50,183 - sync_service - INFO - Orders sync completed. Processed: 0, Success: 0, Errors: 0
2025-10-01 13:55:50,184 - sync_service - INFO - Starting payment recovery sync...
2025-10-01 13:55:50,185 - sync_service - INFO - Starting payment recovery sync...
2025-10-01 13:55:50,185 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:55:50,186 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n\n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n\n                        # --- Transactions ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n            ', 'variables': {'first': 10, 'after': None, 'query': '(financial_status:paid OR financial_status:partially_refunded OR financial_status:refunded) tag:sap_invoice_synced -tag:sap_payment_synced -tag:sap_payment_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-10-01 13:55:50,634 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [], 'pageInfo': {'hasNextPage': False, 'endCursor': None}}}, 'status': 'success'}
2025-10-01 13:55:50,634 - sync_service - INFO - Retrieved 0 orders that need payment recovery from Shopify store local
2025-10-01 13:55:50,635 - sync_service - INFO - No orders need payment recovery for store local
2025-10-01 13:55:50,635 - sync_service - INFO - Sync Event: {'sync_type': 'payment_recovery', 'items_processed': 0, 'success_count': 0, 'error_count': 0, 'details': None}
2025-10-01 13:55:50,635 - sync_service - INFO - Payment recovery sync completed. Processed: 0, Success: 0, Skipped: 0, Errors: 0
2025-10-01 13:55:50,636 - sync_service - INFO - Starting returns sync...
2025-10-01 13:55:50,636 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:55:50,637 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n                query getOrders($first: Int!, $after: String, $query: String) {\n                    orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                        edges {\n                            node {\n                                id\n                                name\n                                createdAt\n                                displayFinancialStatus\n                                displayFulfillmentStatus\n                                returnStatus\n                                sourceName\n                                sourceIdentifier\n                                totalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                subtotalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                totalShippingPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                customer {\n                                    id\n                                    firstName\n                                    lastName\n                                    email\n                                    phone\n                                    addresses {\n                                        address1\n                                        address2\n                                        city\n                                        province\n                                        zip\n                                        country\n                                        phone\n                                    }\n                                }\n                                retailLocation {\n                                    id\n                                }\n                                metafields(first: 10) {\n                                    edges {\n                                        node {\n                                            namespace\n                                            key\n                                            value\n                                        }\n                                    }\n                                }\n                                tags\n                                shippingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                billingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                lineItems(first: 50) {\n                                    edges {\n                                        node {\n                                            id\n                                            name\n                                            quantity\n                                            sku\n                                            isGiftCard\n                                            currentQuantity\n                                            originalUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            discountedUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            variant {\n                                                id\n                                                sku\n                                                price\n                                                compareAtPrice\n                                                product {\n                                                    id\n                                                    title\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                                transactions(first: 10) {\n                                    id\n                                    kind\n                                    status\n                                    gateway\n                                    amountSet {\n                                        shopMoney {\n                                            amount\n                                            currencyCode\n                                        }\n                                    }\n                                    processedAt\n                                    receiptJson\n                                }\n                            }\n                        }\n                        pageInfo {\n                            hasNextPage\n                            endCursor\n                        }\n                    }\n                }\n                ', 'variables': {'first': 10, 'after': None, 'query': 'tag:returntest \n                    financial_status:refunded OR financial_status:partially_refunded OR return_status:RETURNED\n                    tag:sap_invoice_synced \n                    tag:sap_payment_synced \n                    -tag:sap_return_synced \n                    created_at:>=2025-09-01'}}, 'response': None, 'status': None}
2025-10-01 13:55:51,161 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [{'node': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'createdAt': '2025-09-29T08:32:12Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'returnStatus': 'RETURNED', 'sourceName': 'pos', 'sourceIdentifier': '70074957890-1-1015', 'totalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'firstName': 'Eman', 'lastName': 'Mohamed', 'email': 'test215@test.com', 'phone': '+201005552224', 'addresses': []}, 'retailLocation': {'id': 'gid://shopify/Location/72407023682'}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072670904386', 'name': 'MM Watch - Blue', 'quantity': 1, 'sku': 'FG-0000715', 'isGiftCard': False, 'currentQuantity': 0, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': {'id': 'gid://shopify/ProductVariant/42387257458754', 'sku': 'FG-0000715', 'price': '5000.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7527948386370', 'title': 'MM Watch'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072670937154', 'name': 'Iron Man Necklace - Blue', 'quantity': 1, 'sku': 'FG-0000714', 'isGiftCard': False, 'currentQuantity': 1, 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072683290690', 'name': 'Gift Card', 'quantity': 1, 'sku': None, 'isGiftCard': True, 'currentQuantity': 1, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': None}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217014566978', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'gift_card', 'amountSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:11Z', 'receiptJson': '{"gift_card_id":550425428034,"gift_card_last_characters":"bcah"}'}, {'id': 'gid://shopify/OrderTransaction/8217014730818', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '4998.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:24Z', 'receiptJson': '{}'}]}}], 'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo2NDIwNDQ2MTgzNDkwLCJsYXN0X3ZhbHVlIjoxNzU5MTM0NzMyMDAwfQ=='}}}, 'status': 'success'}
2025-10-01 13:55:51,162 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:55:51,162 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-10-01 13:55:51,603 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550437224514', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-30T06:59:36Z', 'expiresOn': '2026-09-30', 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'email': 'testawyyyy@test.com'}}}]}}, 'status': 'success'}
2025-10-01 13:55:52,287 - sync_service - INFO - SAP login successful
2025-10-01 13:55:53,575 - sync_service - INFO - API log added to SAP: sap - IncomingPayments(22402) - success
2025-10-01 13:55:54,862 - sync_service - INFO - API log added to SAP: sap - Invoices(23230) - success
2025-10-01 13:55:56,579 - sync_service - INFO - API log added to SAP: sap - Invoices - success
2025-10-01 13:55:56,579 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:55:56,580 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-10-01 13:55:57,003 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced']}}, 'status': 'success'}
2025-10-01 13:55:57,004 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:55:57,004 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced', 'sap_giftcard_invoice_synced']}}}, 'response': None, 'status': None}
2025-10-01 13:55:57,507 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-10-01 13:55:57,507 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:55:57,508 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-10-01 13:55:57,964 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced']}}, 'status': 'success'}
2025-10-01 13:55:57,965 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:55:57,965 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_synced', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced', 'sap_giftcard_invoice_23232']}}}, 'response': None, 'status': None}
2025-10-01 13:55:58,514 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23232', 'sap_giftcard_invoice_synced', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-10-01 13:55:59,418 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - failure
2025-10-01 13:55:59,419 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:55:59,419 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-10-01 13:55:59,839 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23232', 'sap_giftcard_invoice_synced', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced']}}, 'status': 'success'}
2025-10-01 13:55:59,839 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:55:59,840 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23232', 'sap_giftcard_invoice_synced', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced', 'sap_giftcard_payment_failed']}}}, 'response': None, 'status': None}
2025-10-01 13:56:00,347 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23232', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_failed', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-10-01 13:59:28,558 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-10-01 13:59:28,579 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-10-01 13:59:28,580 - sync_service - INFO - Starting all syncs...
2025-10-01 13:59:28,580 - sync_service - INFO - Starting sales orders sync...
2025-10-01 13:59:28,581 - sync_service - INFO - Starting orders sync...
2025-10-01 13:59:28,581 - sync_service - INFO - Fetching orders with filter: tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10
2025-10-01 13:59:28,581 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:59:28,581 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: false, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n                        retailLocation {\n                            id\n                        }\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        subtotalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        totalShippingPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Discounts applied ---\n                        discountApplications(first: 10) {\n                        edges {\n                            node {\n                            targetType        # ORDER or LINE_ITEM\n                            allocationMethod  # ACROSS / EACH / ONE\n                            value {\n                                __typename\n                                ... on PricingPercentageValue {\n                                percentage\n                                }\n                                ... on MoneyV2 {\n                                amount\n                                currencyCode\n                                }\n                            }\n                            ... on DiscountCodeApplication {\n                                code\n                            }\n                            ... on AutomaticDiscountApplication {\n                                title\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n                        \n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n                        shippingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n                        billingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n\n                        # --- Line Items with Discount Allocations ---\n                        lineItems(first: 50) {\n                        edges {\n                            node {\n                            id\n                            name\n                            quantity\n                            sku\n                            originalUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountedUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountAllocations {\n                                allocatedAmount {\n                                    amount\n                                    currencyCode\n                                }\n                                discountApplication {\n                                    __typename\n                                    ... on AutomaticDiscountApplication {\n                                        title\n                                    }\n                                    ... on DiscountCodeApplication {\n                                        code\n                                    }\n                                }\n                            }\n                            variant {\n                                id\n                                sku\n                                price\n                                compareAtPrice\n                                product {\n                                id\n                                title\n                                }\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Transactions (Gift cards show up here as gateway = "gift_card") ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson   # contains gift_card_id, last_characters etc if gift card used\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n\n            ', 'variables': {'first': 10, 'after': None, 'query': 'tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-10-01 13:59:38,606 - sync_service - ERROR - GraphQL query error for store local: 
2025-10-01 13:59:39,368 - sync_service - INFO - SAP logging client login successful
2025-10-01 13:59:40,118 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-10-01 13:59:40,118 - sync_service - WARNING - GraphQL attempt 1/3 failed: GraphQL query error for store local: 
2025-10-01 13:59:40,119 - sync_service - INFO - Retrying in 2 seconds...
2025-10-01 13:59:42,126 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:59:42,126 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: false, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n                        retailLocation {\n                            id\n                        }\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        subtotalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        totalShippingPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Discounts applied ---\n                        discountApplications(first: 10) {\n                        edges {\n                            node {\n                            targetType        # ORDER or LINE_ITEM\n                            allocationMethod  # ACROSS / EACH / ONE\n                            value {\n                                __typename\n                                ... on PricingPercentageValue {\n                                percentage\n                                }\n                                ... on MoneyV2 {\n                                amount\n                                currencyCode\n                                }\n                            }\n                            ... on DiscountCodeApplication {\n                                code\n                            }\n                            ... on AutomaticDiscountApplication {\n                                title\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n                        \n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n                        shippingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n                        billingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n\n                        # --- Line Items with Discount Allocations ---\n                        lineItems(first: 50) {\n                        edges {\n                            node {\n                            id\n                            name\n                            quantity\n                            sku\n                            originalUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountedUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountAllocations {\n                                allocatedAmount {\n                                    amount\n                                    currencyCode\n                                }\n                                discountApplication {\n                                    __typename\n                                    ... on AutomaticDiscountApplication {\n                                        title\n                                    }\n                                    ... on DiscountCodeApplication {\n                                        code\n                                    }\n                                }\n                            }\n                            variant {\n                                id\n                                sku\n                                price\n                                compareAtPrice\n                                product {\n                                id\n                                title\n                                }\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Transactions (Gift cards show up here as gateway = "gift_card") ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson   # contains gift_card_id, last_characters etc if gift card used\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n\n            ', 'variables': {'first': 10, 'after': None, 'query': 'tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-10-01 13:59:42,576 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [], 'pageInfo': {'hasNextPage': False, 'endCursor': None}}}, 'status': 'success'}
2025-10-01 13:59:42,576 - sync_service - INFO - Retrieved 0 unsynced orders (limited to 5 most recent) from Shopify store local
2025-10-01 13:59:42,577 - sync_service - INFO - No orders to process for store local
2025-10-01 13:59:42,577 - sync_service - INFO - Sync Event: {'sync_type': 'sales_orders', 'items_processed': 0, 'success_count': 0, 'error_count': 0, 'details': None}
2025-10-01 13:59:42,578 - sync_service - INFO - Orders sync completed. Processed: 0, Success: 0, Errors: 0
2025-10-01 13:59:42,578 - sync_service - INFO - Starting payment recovery sync...
2025-10-01 13:59:42,579 - sync_service - INFO - Starting payment recovery sync...
2025-10-01 13:59:42,579 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:59:42,579 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n\n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n\n                        # --- Transactions ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n            ', 'variables': {'first': 10, 'after': None, 'query': '(financial_status:paid OR financial_status:partially_refunded OR financial_status:refunded) tag:sap_invoice_synced -tag:sap_payment_synced -tag:sap_payment_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-10-01 13:59:42,990 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [], 'pageInfo': {'hasNextPage': False, 'endCursor': None}}}, 'status': 'success'}
2025-10-01 13:59:42,991 - sync_service - INFO - Retrieved 0 orders that need payment recovery from Shopify store local
2025-10-01 13:59:42,991 - sync_service - INFO - No orders need payment recovery for store local
2025-10-01 13:59:42,991 - sync_service - INFO - Sync Event: {'sync_type': 'payment_recovery', 'items_processed': 0, 'success_count': 0, 'error_count': 0, 'details': None}
2025-10-01 13:59:42,992 - sync_service - INFO - Payment recovery sync completed. Processed: 0, Success: 0, Skipped: 0, Errors: 0
2025-10-01 13:59:42,992 - sync_service - INFO - Starting returns sync...
2025-10-01 13:59:42,992 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:59:42,993 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n                query getOrders($first: Int!, $after: String, $query: String) {\n                    orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                        edges {\n                            node {\n                                id\n                                name\n                                createdAt\n                                displayFinancialStatus\n                                displayFulfillmentStatus\n                                returnStatus\n                                sourceName\n                                sourceIdentifier\n                                totalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                subtotalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                totalShippingPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                customer {\n                                    id\n                                    firstName\n                                    lastName\n                                    email\n                                    phone\n                                    addresses {\n                                        address1\n                                        address2\n                                        city\n                                        province\n                                        zip\n                                        country\n                                        phone\n                                    }\n                                }\n                                retailLocation {\n                                    id\n                                }\n                                metafields(first: 10) {\n                                    edges {\n                                        node {\n                                            namespace\n                                            key\n                                            value\n                                        }\n                                    }\n                                }\n                                tags\n                                shippingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                billingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                lineItems(first: 50) {\n                                    edges {\n                                        node {\n                                            id\n                                            name\n                                            quantity\n                                            sku\n                                            isGiftCard\n                                            currentQuantity\n                                            originalUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            discountedUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            variant {\n                                                id\n                                                sku\n                                                price\n                                                compareAtPrice\n                                                product {\n                                                    id\n                                                    title\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                                transactions(first: 10) {\n                                    id\n                                    kind\n                                    status\n                                    gateway\n                                    amountSet {\n                                        shopMoney {\n                                            amount\n                                            currencyCode\n                                        }\n                                    }\n                                    processedAt\n                                    receiptJson\n                                }\n                            }\n                        }\n                        pageInfo {\n                            hasNextPage\n                            endCursor\n                        }\n                    }\n                }\n                ', 'variables': {'first': 10, 'after': None, 'query': 'tag:returntest \n                    financial_status:refunded OR financial_status:partially_refunded OR return_status:RETURNED\n                    tag:sap_invoice_synced \n                    tag:sap_payment_synced \n                    -tag:sap_return_synced \n                    created_at:>=2025-09-01'}}, 'response': None, 'status': None}
2025-10-01 13:59:43,546 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [{'node': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'createdAt': '2025-09-29T08:32:12Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'returnStatus': 'RETURNED', 'sourceName': 'pos', 'sourceIdentifier': '70074957890-1-1015', 'totalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'firstName': 'Eman', 'lastName': 'Mohamed', 'email': 'test215@test.com', 'phone': '+201005552224', 'addresses': []}, 'retailLocation': {'id': 'gid://shopify/Location/72407023682'}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23232', 'sap_giftcard_invoice_synced', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072670904386', 'name': 'MM Watch - Blue', 'quantity': 1, 'sku': 'FG-0000715', 'isGiftCard': False, 'currentQuantity': 0, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': {'id': 'gid://shopify/ProductVariant/42387257458754', 'sku': 'FG-0000715', 'price': '5000.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7527948386370', 'title': 'MM Watch'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072670937154', 'name': 'Iron Man Necklace - Blue', 'quantity': 1, 'sku': 'FG-0000714', 'isGiftCard': False, 'currentQuantity': 1, 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072683290690', 'name': 'Gift Card', 'quantity': 1, 'sku': None, 'isGiftCard': True, 'currentQuantity': 1, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': None}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217014566978', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'gift_card', 'amountSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:11Z', 'receiptJson': '{"gift_card_id":550425428034,"gift_card_last_characters":"bcah"}'}, {'id': 'gid://shopify/OrderTransaction/8217014730818', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '4998.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:24Z', 'receiptJson': '{}'}]}}], 'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo2NDIwNDQ2MTgzNDkwLCJsYXN0X3ZhbHVlIjoxNzU5MTM0NzMyMDAwfQ=='}}}, 'status': 'success'}
2025-10-01 13:59:43,546 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:59:43,547 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-10-01 13:59:43,975 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550437224514', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-30T06:59:36Z', 'expiresOn': '2026-09-30', 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'email': 'testawyyyy@test.com'}}}]}}, 'status': 'success'}
2025-10-01 13:59:44,744 - sync_service - INFO - SAP login successful
2025-10-01 13:59:46,675 - sync_service - INFO - API log added to SAP: sap - IncomingPayments(22402) - success
2025-10-01 13:59:48,000 - sync_service - INFO - API log added to SAP: sap - Invoices(23230) - success
2025-10-01 13:59:49,310 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - failure
2025-10-01 13:59:49,311 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 13:59:49,311 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-10-01 13:59:59,314 - sync_service - ERROR - GraphQL query error for store local: 
2025-10-01 13:59:59,596 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-10-01 14:00:00,603 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 14:00:00,604 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-10-01 14:00:01,003 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23232', 'sap_giftcard_invoice_synced', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced']}}, 'status': 'success'}
2025-10-01 14:00:01,003 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 14:00:01,004 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23232', 'sap_giftcard_invoice_synced', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced', 'sap_giftcard_payment_failed']}}}, 'response': None, 'status': None}
2025-10-01 14:00:01,534 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23232', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_failed', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-10-01 14:04:44,432 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-10-01 14:04:44,451 - sync_service - INFO - Initialized Shopify client for store: Local Store (local)
2025-10-01 14:04:44,452 - sync_service - INFO - Starting all syncs...
2025-10-01 14:04:44,453 - sync_service - INFO - Starting sales orders sync...
2025-10-01 14:04:44,454 - sync_service - INFO - Starting orders sync...
2025-10-01 14:04:44,455 - sync_service - INFO - Fetching orders with filter: tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10
2025-10-01 14:04:44,456 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 14:04:44,456 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: false, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n                        retailLocation {\n                            id\n                        }\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        subtotalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        totalShippingPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Discounts applied ---\n                        discountApplications(first: 10) {\n                        edges {\n                            node {\n                            targetType        # ORDER or LINE_ITEM\n                            allocationMethod  # ACROSS / EACH / ONE\n                            value {\n                                __typename\n                                ... on PricingPercentageValue {\n                                percentage\n                                }\n                                ... on MoneyV2 {\n                                amount\n                                currencyCode\n                                }\n                            }\n                            ... on DiscountCodeApplication {\n                                code\n                            }\n                            ... on AutomaticDiscountApplication {\n                                title\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n                        \n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n                        shippingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n                        billingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n\n                        # --- Line Items with Discount Allocations ---\n                        lineItems(first: 50) {\n                        edges {\n                            node {\n                            id\n                            name\n                            quantity\n                            sku\n                            originalUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountedUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountAllocations {\n                                allocatedAmount {\n                                    amount\n                                    currencyCode\n                                }\n                                discountApplication {\n                                    __typename\n                                    ... on AutomaticDiscountApplication {\n                                        title\n                                    }\n                                    ... on DiscountCodeApplication {\n                                        code\n                                    }\n                                }\n                            }\n                            variant {\n                                id\n                                sku\n                                price\n                                compareAtPrice\n                                product {\n                                id\n                                title\n                                }\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Transactions (Gift cards show up here as gateway = "gift_card") ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson   # contains gift_card_id, last_characters etc if gift card used\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n\n            ', 'variables': {'first': 10, 'after': None, 'query': 'tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-10-01 14:04:54,547 - sync_service - ERROR - GraphQL query error for store local: 
2025-10-01 14:04:55,232 - sync_service - INFO - SAP logging client login successful
2025-10-01 14:04:55,884 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-10-01 14:04:55,884 - sync_service - WARNING - GraphQL attempt 1/3 failed: GraphQL query error for store local: 
2025-10-01 14:04:55,885 - sync_service - INFO - Retrying in 2 seconds...
2025-10-01 14:04:57,877 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 14:04:57,877 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: false, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n                        retailLocation {\n                            id\n                        }\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        subtotalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n                        totalShippingPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Discounts applied ---\n                        discountApplications(first: 10) {\n                        edges {\n                            node {\n                            targetType        # ORDER or LINE_ITEM\n                            allocationMethod  # ACROSS / EACH / ONE\n                            value {\n                                __typename\n                                ... on PricingPercentageValue {\n                                percentage\n                                }\n                                ... on MoneyV2 {\n                                amount\n                                currencyCode\n                                }\n                            }\n                            ... on DiscountCodeApplication {\n                                code\n                            }\n                            ... on AutomaticDiscountApplication {\n                                title\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n                        \n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n                        shippingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n                        billingAddress {\n                        address1\n                        address2\n                        city\n                        province\n                        zip\n                        country\n                        phone\n                        firstName\n                        lastName\n                        company\n                        }\n\n                        # --- Line Items with Discount Allocations ---\n                        lineItems(first: 50) {\n                        edges {\n                            node {\n                            id\n                            name\n                            quantity\n                            sku\n                            originalUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountedUnitPriceSet {\n                                shopMoney {\n                                    amount\n                                    currencyCode\n                                }\n                            }\n                            discountAllocations {\n                                allocatedAmount {\n                                    amount\n                                    currencyCode\n                                }\n                                discountApplication {\n                                    __typename\n                                    ... on AutomaticDiscountApplication {\n                                        title\n                                    }\n                                    ... on DiscountCodeApplication {\n                                        code\n                                    }\n                                }\n                            }\n                            variant {\n                                id\n                                sku\n                                price\n                                compareAtPrice\n                                product {\n                                id\n                                title\n                                }\n                            }\n                            }\n                        }\n                        }\n\n                        # --- Transactions (Gift cards show up here as gateway = "gift_card") ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson   # contains gift_card_id, last_characters etc if gift card used\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n\n            ', 'variables': {'first': 10, 'after': None, 'query': 'tag:salestest -tag:sap_invoice_synced -tag:sap_invoice_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-10-01 14:04:58,367 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [], 'pageInfo': {'hasNextPage': False, 'endCursor': None}}}, 'status': 'success'}
2025-10-01 14:04:58,368 - sync_service - INFO - Retrieved 0 unsynced orders (limited to 5 most recent) from Shopify store local
2025-10-01 14:04:58,368 - sync_service - INFO - No orders to process for store local
2025-10-01 14:04:58,369 - sync_service - INFO - Sync Event: {'sync_type': 'sales_orders', 'items_processed': 0, 'success_count': 0, 'error_count': 0, 'details': None}
2025-10-01 14:04:58,369 - sync_service - INFO - Orders sync completed. Processed: 0, Success: 0, Errors: 0
2025-10-01 14:04:58,370 - sync_service - INFO - Starting payment recovery sync...
2025-10-01 14:04:58,370 - sync_service - INFO - Starting payment recovery sync...
2025-10-01 14:04:58,370 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 14:04:58,371 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getOrders($first: Int!, $after: String, $query: String) {\n                orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                    edges {\n                    node {\n                        id\n                        name\n                        createdAt\n                        displayFinancialStatus\n                        displayFulfillmentStatus\n                        sourceName\n                        sourceIdentifier\n\n                        totalPriceSet {\n                        shopMoney {\n                            amount\n                            currencyCode\n                        }\n                        }\n\n                        # --- Customer Info ---\n                        customer {\n                        id\n                        firstName\n                        lastName\n                        email\n                        phone\n                        addresses {\n                            address1\n                            address2\n                            city\n                            province\n                            zip\n                            country\n                            phone\n                        }\n                        }\n\n                        # --- Retail Location ---\n                        retailLocation {\n                            id\n                        }\n\n                        # --- Metafields ---\n                        metafields(first: 10) {\n                        edges {\n                            node {\n                            namespace\n                            key\n                            value\n                            }\n                        }\n                        }\n                        \n                        # --- Tags ---\n                        tags\n\n                        # --- Transactions ---\n                        transactions(first: 10) {\n                        id\n                        kind\n                        status\n                        gateway\n                        amountSet {\n                            shopMoney {\n                            amount\n                            currencyCode\n                            }\n                        }\n                        processedAt\n                        receiptJson\n                        }\n                    }\n                    }\n                    pageInfo {\n                    hasNextPage\n                    endCursor\n                    }\n                }\n            }\n            ', 'variables': {'first': 10, 'after': None, 'query': '(financial_status:paid OR financial_status:partially_refunded OR financial_status:refunded) tag:sap_invoice_synced -tag:sap_payment_synced -tag:sap_payment_failed created_at:>=2025-09-10'}}, 'response': None, 'status': None}
2025-10-01 14:04:58,903 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [], 'pageInfo': {'hasNextPage': False, 'endCursor': None}}}, 'status': 'success'}
2025-10-01 14:04:58,904 - sync_service - INFO - Retrieved 0 orders that need payment recovery from Shopify store local
2025-10-01 14:04:58,904 - sync_service - INFO - No orders need payment recovery for store local
2025-10-01 14:04:58,905 - sync_service - INFO - Sync Event: {'sync_type': 'payment_recovery', 'items_processed': 0, 'success_count': 0, 'error_count': 0, 'details': None}
2025-10-01 14:04:58,905 - sync_service - INFO - Payment recovery sync completed. Processed: 0, Success: 0, Skipped: 0, Errors: 0
2025-10-01 14:04:58,906 - sync_service - INFO - Starting returns sync...
2025-10-01 14:04:58,906 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 14:04:58,906 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n                query getOrders($first: Int!, $after: String, $query: String) {\n                    orders(first: $first, after: $after, sortKey: CREATED_AT, reverse: true, query: $query) {\n                        edges {\n                            node {\n                                id\n                                name\n                                createdAt\n                                displayFinancialStatus\n                                displayFulfillmentStatus\n                                returnStatus\n                                sourceName\n                                sourceIdentifier\n                                totalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                subtotalPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                totalShippingPriceSet {\n                                    shopMoney {\n                                        amount\n                                        currencyCode\n                                    }\n                                }\n                                customer {\n                                    id\n                                    firstName\n                                    lastName\n                                    email\n                                    phone\n                                    addresses {\n                                        address1\n                                        address2\n                                        city\n                                        province\n                                        zip\n                                        country\n                                        phone\n                                    }\n                                }\n                                retailLocation {\n                                    id\n                                }\n                                metafields(first: 10) {\n                                    edges {\n                                        node {\n                                            namespace\n                                            key\n                                            value\n                                        }\n                                    }\n                                }\n                                tags\n                                shippingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                billingAddress {\n                                    address1\n                                    address2\n                                    city\n                                    province\n                                    zip\n                                    country\n                                    phone\n                                    firstName\n                                    lastName\n                                    company\n                                }\n                                lineItems(first: 50) {\n                                    edges {\n                                        node {\n                                            id\n                                            name\n                                            quantity\n                                            sku\n                                            isGiftCard\n                                            currentQuantity\n                                            originalUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            discountedUnitPriceSet {\n                                                shopMoney {\n                                                    amount\n                                                    currencyCode\n                                                }\n                                            }\n                                            variant {\n                                                id\n                                                sku\n                                                price\n                                                compareAtPrice\n                                                product {\n                                                    id\n                                                    title\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                                transactions(first: 10) {\n                                    id\n                                    kind\n                                    status\n                                    gateway\n                                    amountSet {\n                                        shopMoney {\n                                            amount\n                                            currencyCode\n                                        }\n                                    }\n                                    processedAt\n                                    receiptJson\n                                }\n                            }\n                        }\n                        pageInfo {\n                            hasNextPage\n                            endCursor\n                        }\n                    }\n                }\n                ', 'variables': {'first': 10, 'after': None, 'query': 'tag:returntest \n                    financial_status:refunded OR financial_status:partially_refunded OR return_status:RETURNED\n                    tag:sap_invoice_synced \n                    tag:sap_payment_synced \n                    -tag:sap_return_synced \n                    created_at:>=2025-09-01'}}, 'response': None, 'status': None}
2025-10-01 14:04:59,476 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orders': {'edges': [{'node': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'createdAt': '2025-09-29T08:32:12Z', 'displayFinancialStatus': 'PAID', 'displayFulfillmentStatus': 'FULFILLED', 'returnStatus': 'RETURNED', 'sourceName': 'pos', 'sourceIdentifier': '70074957890-1-1015', 'totalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'subtotalPriceSet': {'shopMoney': {'amount': '10008.5', 'currencyCode': 'EGP'}}, 'totalShippingPriceSet': {'shopMoney': {'amount': '0.0', 'currencyCode': 'EGP'}}, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'firstName': 'Eman', 'lastName': 'Mohamed', 'email': 'test215@test.com', 'phone': '+201005552224', 'addresses': []}, 'retailLocation': {'id': 'gid://shopify/Location/72407023682'}, 'metafields': {'edges': []}, 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23232', 'sap_giftcard_invoice_synced', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced'], 'shippingAddress': None, 'billingAddress': None, 'lineItems': {'edges': [{'node': {'id': 'gid://shopify/LineItem/16072670904386', 'name': 'MM Watch - Blue', 'quantity': 1, 'sku': 'FG-0000715', 'isGiftCard': False, 'currentQuantity': 0, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': {'id': 'gid://shopify/ProductVariant/42387257458754', 'sku': 'FG-0000715', 'price': '5000.00', 'compareAtPrice': None, 'product': {'id': 'gid://shopify/Product/7527948386370', 'title': 'MM Watch'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072670937154', 'name': 'Iron Man Necklace - Blue', 'quantity': 1, 'sku': 'FG-0000714', 'isGiftCard': False, 'currentQuantity': 1, 'originalUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '8.5', 'currencyCode': 'EGP'}}, 'variant': {'id': 'gid://shopify/ProductVariant/42444515835970', 'sku': 'FG-0000714', 'price': '8.50', 'compareAtPrice': '10.00', 'product': {'id': 'gid://shopify/Product/7542966190146', 'title': 'Iron Man Necklace'}}}}, {'node': {'id': 'gid://shopify/LineItem/16072683290690', 'name': 'Gift Card', 'quantity': 1, 'sku': None, 'isGiftCard': True, 'currentQuantity': 1, 'originalUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'discountedUnitPriceSet': {'shopMoney': {'amount': '5000.0', 'currencyCode': 'EGP'}}, 'variant': None}}]}, 'transactions': [{'id': 'gid://shopify/OrderTransaction/8217014566978', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'gift_card', 'amountSet': {'shopMoney': {'amount': '10.0', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:11Z', 'receiptJson': '{"gift_card_id":550425428034,"gift_card_last_characters":"bcah"}'}, {'id': 'gid://shopify/OrderTransaction/8217014730818', 'kind': 'SALE', 'status': 'SUCCESS', 'gateway': 'cash', 'amountSet': {'shopMoney': {'amount': '4998.5', 'currencyCode': 'EGP'}}, 'processedAt': '2025-09-29T08:32:24Z', 'receiptJson': '{}'}]}}], 'pageInfo': {'hasNextPage': False, 'endCursor': 'eyJsYXN0X2lkIjo2NDIwNDQ2MTgzNDkwLCJsYXN0X3ZhbHVlIjoxNzU5MTM0NzMyMDAwfQ=='}}}, 'status': 'success'}
2025-10-01 14:04:59,477 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 14:04:59,478 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            query getGiftCards($query: String!) {\n                giftCards(first: 50, query: $query) {\n                    edges {\n                        node {\n                            id   \n                            order {\n                                id\n                            }     \n                            initialValue {\n                                amount\n                                currencyCode\n                            }\n                            createdAt\n                            expiresOn\n                            customer {\n                                id\n                                email\n                            }\n                        }\n                    }\n                }\n            }\n            ', 'variables': {'query': 'createdAt:>=2025-09-29'}}, 'response': None, 'status': None}
2025-10-01 14:04:59,924 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'giftCards': {'edges': [{'node': {'id': 'gid://shopify/GiftCard/548952375362', 'order': {'id': 'gid://shopify/Order/6240098123842'}, 'initialValue': {'amount': '7000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-22T08:07:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7886642348098', 'email': 'luciamarigo.lm@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549003231298', 'order': {'id': 'gid://shopify/Order/6245259968578'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-06-25T15:50:59Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7897452216386', 'email': 'heba7977@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549193678914', 'order': {'id': 'gid://shopify/Order/6269720854594'}, 'initialValue': {'amount': '3000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-07-09T08:23:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7848224915522', 'email': 'abeya99@yahoo.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549510152258', 'order': {'id': 'gid://shopify/Order/6314790420546'}, 'initialValue': {'amount': '3800.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-03T12:30:09Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549802475586', 'order': {'id': 'gid://shopify/Order/6347058708546'}, 'initialValue': {'amount': '100.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T11:43:24Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/549803065410', 'order': {'id': 'gid://shopify/Order/6347117658178'}, 'initialValue': {'amount': '1.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-21T12:42:51Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8081546084418', 'email': None}}}, {'node': {'id': 'gid://shopify/GiftCard/549948358722', 'order': {'id': 'gid://shopify/Order/6350536704066'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-08-25T17:30:39Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8087593484354', 'email': 'rejewa@hotmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550228426818', 'order': {'id': 'gid://shopify/Order/6383762276418'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-10T11:53:41Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550304481346', 'order': {'id': 'gid://shopify/Order/6397225631810'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-17T14:13:37Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358253634', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T09:39:45Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550358614082', 'order': {'id': 'gid://shopify/Order/6397747036226'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T10:41:54Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550361628738', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-23T12:37:53Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550372737090', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T06:41:38Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377193538', 'order': {'id': 'gid://shopify/Order/6410244096066'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:53:34Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550377259074', 'order': {'id': 'gid://shopify/Order/6410247241794'}, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T09:54:03Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550379946050', 'order': None, 'initialValue': {'amount': '200.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-24T13:15:19Z', 'expiresOn': '2026-09-24', 'customer': {'id': 'gid://shopify/Customer/8147855999042', 'email': 'test@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425362498', 'order': {'id': 'gid://shopify/Order/6420431896642'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:09:00Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203687723074', 'email': 'testawy@test.net'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425395266', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425428034', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425460802', 'order': {'id': 'gid://shopify/Order/6420443136066'}, 'initialValue': {'amount': '10.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:27:50Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/7539785334850', 'email': 'karimwafik.kw@gmail.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550425493570', 'order': {'id': 'gid://shopify/Order/6420446183490'}, 'initialValue': {'amount': '5000.0', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-29T08:41:29Z', 'expiresOn': None, 'customer': {'id': 'gid://shopify/Customer/8203718688834', 'email': 'test215@test.com'}}}, {'node': {'id': 'gid://shopify/GiftCard/550437224514', 'order': None, 'initialValue': {'amount': '8.5', 'currencyCode': 'EGP'}, 'createdAt': '2025-09-30T06:59:36Z', 'expiresOn': '2026-09-30', 'customer': {'id': 'gid://shopify/Customer/8203737235522', 'email': 'testawyyyy@test.com'}}}]}}, 'status': 'success'}
2025-10-01 14:05:00,622 - sync_service - INFO - SAP login successful
2025-10-01 14:05:01,936 - sync_service - INFO - API log added to SAP: sap - IncomingPayments(22402) - success
2025-10-01 14:05:03,757 - sync_service - INFO - API log added to SAP: sap - Invoices(23230) - success
2025-10-01 14:05:05,382 - sync_service - INFO - API log added to SAP: sap - IncomingPayments - success
2025-10-01 14:05:05,384 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 14:05:05,385 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-10-01 14:05:15,394 - sync_service - ERROR - GraphQL query error for store local: 
2025-10-01 14:05:15,665 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-10-01 14:05:16,688 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 14:05:16,688 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-10-01 14:05:26,696 - sync_service - ERROR - GraphQL query error for store local: 
2025-10-01 14:05:26,969 - sync_service - INFO - API log added to SAP: shopify - /admin/api/graphql_local - failure
2025-10-01 14:05:28,977 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 14:05:28,978 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-10-01 14:05:29,392 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23232', 'sap_giftcard_invoice_synced', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced']}}, 'status': 'success'}
2025-10-01 14:05:29,392 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 14:05:29,393 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23232', 'sap_giftcard_invoice_synced', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced', 'sap_giftcard_payment_synced']}}}, 'response': None, 'status': None}
2025-10-01 14:05:29,969 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23232', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-10-01 14:05:29,970 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 14:05:29,970 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-10-01 14:05:30,388 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23232', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced']}}, 'status': 'success'}
2025-10-01 14:05:30,389 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 14:05:30,389 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23232', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_synced', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced', 'sap_giftcard_payment_22403']}}}, 'response': None, 'status': None}
2025-10-01 14:05:30,867 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23232', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22403', 'sap_giftcard_payment_synced', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced']}, 'userErrors': []}}, 'status': 'success'}
2025-10-01 14:05:30,868 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 14:05:30,868 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n        query getOrder($id: ID!) {\n            order(id: $id) {\n                id\n                name\n                tags\n            }\n        }\n        ', 'variables': {'id': 'gid://shopify/Order/6420446183490'}}, 'response': None, 'status': None}
2025-10-01 14:05:31,277 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23232', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22403', 'sap_giftcard_payment_synced', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced']}}, 'status': 'success'}
2025-10-01 14:05:31,277 - sync_service - INFO - Executing GraphQL query for store: local
2025-10-01 14:05:31,277 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': {'query': '\n            mutation orderUpdate($input: OrderInput!) {\n                orderUpdate(input: $input) {\n                    order {\n                        id\n                        name\n                        tags\n                    }\n                    userErrors {\n                        field\n                        message\n                    }\n                }\n            }\n            ', 'variables': {'input': {'id': 'gid://shopify/Order/6420446183490', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23232', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22403', 'sap_giftcard_payment_synced', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced', 'sap_return_synced']}}}, 'response': None, 'status': None}
2025-10-01 14:05:31,778 - sync_service - INFO - API Call: {'service': 'shopify', 'endpoint': 'graphql_local', 'request': None, 'response': {'orderUpdate': {'order': {'id': 'gid://shopify/Order/6420446183490', 'name': '#1714', 'tags': ['returntest', 'salestest', 'sap_giftcard_invoice_23232', 'sap_giftcard_invoice_synced', 'sap_giftcard_payment_22403', 'sap_giftcard_payment_synced', 'sap_invoice_23230', 'sap_invoice_synced', 'sap_payment_22402', 'sap_payment_synced', 'sap_return_synced']}, 'userErrors': []}}, 'status': 'success'}
